// Automatically generated file.  Do not edit!
var g;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function fa(a,b){if(b)a:{var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ca(c,a,{configurable:!0,writable:!0,value:b})}}
fa("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,h){this.op=f;ca(this,"description",{configurable:!0,writable:!0,value:h})}if(a)return a;c.prototype.toString=function(){return this.op};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});
fa("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ea[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ca(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(aa(this))}})}return a});function ha(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function ia(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}fa("Array.prototype.keys",function(a){return a?a:function(){return ia(this,function(b){return b})}});fa("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});
fa("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});
fa("String.prototype.includes",function(a){return a?a:function(b,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==(this+"").indexOf(b,c||0)}});function ja(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
fa("WeakMap",function(a){function b(l){this.re=(k+=Math.random()+1).toString();if(l){l=ba(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}}function c(){}function d(l){var m=typeof l;return"object"===m&&null!==l||"function"===m}function e(l){if(!ja(l,h)){var m=new c;ca(l,h,{value:m})}}function f(l){var m=Object[l];m&&(Object[l]=function(p){if(p instanceof c)return p;Object.isExtensible(p)&&e(p);return m(p)})}if(function(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),
p=new a([[l,2],[m,3]]);if(2!=p.get(l)||3!=p.get(m))return!1;p.delete(l);p.set(m,4);return!p.has(l)&&4==p.get(m)}catch(t){return!1}}())return a;var h="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var k=0;b.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");e(l);if(!ja(l,h))throw Error("WeakMap key fail: "+l);l[h][this.re]=m;return this};b.prototype.get=function(l){return d(l)&&ja(l,h)?l[h][this.re]:void 0};b.prototype.has=function(l){return d(l)&&
ja(l,h)&&ja(l[h],this.re)};b.prototype.delete=function(l){return d(l)&&ja(l,h)&&ja(l[h],this.re)?delete l[h][this.re]:!1};return b});
fa("Map",function(a){function b(){var k={};return k.qd=k.next=k.head=k}function c(k,l){var m=k.fd;return ha(function(){if(m){for(;m.head!=k.fd;)m=m.qd;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})}function d(k,l){var m=l&&typeof l;"object"==m||"function"==m?f.has(l)?m=f.get(l):(m=""+ ++h,f.set(l,m)):m="p_"+l;var p=k.Bg[m];if(p&&ja(k.Bg,m))for(k=0;k<p.length;k++){var t=p[k];if(l!==l&&t.key!==t.key||l===t.key)return{id:m,list:p,index:k,mb:t}}return{id:m,
list:p,index:-1,mb:void 0}}function e(k){this.Bg={};this.fd=b();this.size=0;if(k){k=ba(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var k=Object.seal({x:4}),l=new a(ba([[k,"s"]]));if("s"!=l.get(k)||1!=l.size||l.get({x:4})||l.set({x:4},"t")!=l||2!=l.size)return!1;var m=l.entries(),p=m.next();if(p.done||p.value[0]!=k||"s"!=p.value[1])return!1;p=m.next();return p.done||4!=p.value[0].x||
"t"!=p.value[1]||!m.next().done?!1:!0}catch(t){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(k,l){k=0===k?0:k;var m=d(this,k);m.list||(m.list=this.Bg[m.id]=[]);m.mb?m.mb.value=l:(m.mb={next:this.fd,qd:this.fd.qd,head:this.fd,key:k,value:l},m.list.push(m.mb),this.fd.qd.next=m.mb,this.fd.qd=m.mb,this.size++);return this};e.prototype.delete=function(k){k=d(this,k);return k.mb&&k.list?(k.list.splice(k.index,1),k.list.length||delete this.Bg[k.id],k.mb.qd.next=k.mb.next,k.mb.next.qd=
k.mb.qd,k.mb.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.Bg={};this.fd=this.fd.qd=b();this.size=0};e.prototype.has=function(k){return!!d(this,k).mb};e.prototype.get=function(k){return(k=d(this,k).mb)&&k.value};e.prototype.entries=function(){return c(this,function(k){return[k.key,k.value]})};e.prototype.keys=function(){return c(this,function(k){return k.key})};e.prototype.values=function(){return c(this,function(k){return k.value})};e.prototype.forEach=function(k,l){for(var m=this.entries(),
p;!(p=m.next()).done;)p=p.value,k.call(l,p[1],p[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});
var ka={},la;
var ma=[,2,1,4,3];
var n=function(){return"object"===typeof self?self:"object"===typeof window?window:"object"===typeof global?global:this}();
var q={};n.Blockly||(n.Blockly={});n.Blockly.Msg||(n.Blockly.Msg=q);function na(a){a=String(a).toLowerCase().trim();var b=oa[a];if(b)return b;b="0x"==a.substring(0,2)?"#"+a.substring(2):a;b="#"==b[0]?b:"#"+b;if(/^#[0-9a-f]{6}$/.test(b))return b;if(/^#[0-9a-f]{3}$/.test(b))return["#",b[1],b[1],b[2],b[2],b[3],b[3]].join("");var c=a.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return c&&(a=Number(c[1]),b=Number(c[2]),c=Number(c[3]),0<=a&&256>a&&0<=b&&256>b&&0<=c&&256>c)?pa(a,b,c):null}
function pa(a,b,c){b=a<<16|b<<8|c;return 16>a?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)}function qa(a){a=na(a);if(!a)return[0,0,0];a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]}function ra(a,b,c){a=na(a);if(!a)return null;b=na(b);if(!b)return null;a=qa(a);b=qa(b);return pa(Math.round(b[0]+c*(a[0]-b[0])),Math.round(b[1]+c*(a[1]-b[1])),Math.round(b[2]+c*(a[2]-b[2])))}
var oa={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};function r(a,b){this.x=a;this.y=b}function sa(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1}function ta(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function ua(a,b){return new r(a.x-b.x,a.y-b.y)}function va(a,b){return new r(a.x+b.x,a.y+b.y)}r.prototype.clone=function(){return new r(this.x,this.y)};r.prototype.scale=function(a){this.x*=a;this.y*=a;return this};r.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};function wa(a,b,c,d){this.top=a;this.bottom=b;this.left=c;this.right=d}wa.prototype.contains=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};function xa(a){return a.length?a.reduce(function(b,c){return b.length<c.length?b:c}).length:0}function ya(a,b){if(!a.length)return 0;if(1==a.length)return a[0].length;var c=0;b=b||xa(a);for(var d=0;d<b;d++){for(var e=a[0][d],f=1;f<a.length;f++)if(e!=a[f][d])return c;" "==e&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f][d])&&" "!=e)return c;return b}
function za(a,b){if(!a.length)return 0;if(1==a.length)return a[0].length;var c=0;b=b||xa(a);for(var d=0;d<b;d++){for(var e=a[0].substr(-d-1,1),f=1;f<a.length;f++)if(e!=a[f].substr(-d-1,1))return c;" "==e&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f].charAt(a[f].length-d-1))&&" "!=e)return c;return b}
function Aa(a,b){a=a.split("\n");for(var c=0;c<a.length;c++){var d=c;var e=a[c],f=b;if(e.length<=f)var h=e;else{for(var k=e.trim().split(/\s+/),l=0;l<k.length;l++)k[l].length>f&&(f=k[l].length);l=-Infinity;var m=1;do{var p=l;h=e;e=[];var t=k.length/m,y=1;for(l=0;l<k.length-1;l++)y<(l+1.5)/t?(y++,e[l]=!0):e[l]=!1;e=Ba(k,e,f);l=Ca(k,e,f);t=k;y=[];for(var G=0;G<t.length;G++)y.push(t[G]),void 0!==e[G]&&y.push(e[G]?"\n":" ");e=y.join("");m++}while(l>p)}a[d]=h}return a.join("\n")}
function Ca(a,b,c){for(var d=[0],e=[],f=0;f<a.length;f++)d[d.length-1]+=a[f].length,!0===b[f]?(d.push(0),e.push(a[f].charAt(a[f].length-1))):!1===b[f]&&d[d.length-1]++;a=Math.max.apply(Math,d);for(f=b=0;f<d.length;f++)b-=2*Math.pow(Math.abs(c-d[f]),1.5),b-=Math.pow(a-d[f],1.5),-1!=".?!".indexOf(e[f])?b+=c/3:-1!=",;)]}".indexOf(e[f])&&(b+=c/4);1<d.length&&d[d.length-1]<=d[d.length-2]&&(b+=.5);return b}
function Ba(a,b,c){for(var d=Ca(a,b,c),e,f=0;f<b.length-1;f++)if(b[f]!=b[f+1]){var h=[].concat(b);h[f]=!h[f];h[f+1]=!h[f+1];var k=Ca(a,h,c);k>d&&(d=k,e=h)}return e?Ba(a,e,c):b};function Da(a,b){this.width=a;this.height=b};function Ea(a){var b;(b=Fa(a,"display"))||(b=a.currentStyle?a.currentStyle.display:null);if("none"!=(b||a.style&&a.style.display))return new Da(a.offsetWidth,a.offsetHeight);b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";var f=a.offsetWidth;a=a.offsetHeight;b.display=c;b.position=e;b.visibility=d;return new Da(f,a)}
function Fa(a,b){return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}function Ga(a){var b=new r(0,0);a=a.getBoundingClientRect();var c=document.documentElement;c=new r(window.pageXOffset||c.scrollLeft,window.pageYOffset||c.scrollTop);b.x=a.left+c.x;b.y=a.top+c.y;return b};var Ha,Ia,Ja,Ka,La,Ma,Oa,Pa,Qa,Ra,Sa,Ta,Ua;
(function(a){function b(d){return-1!=c.indexOf(d.toUpperCase())}Ua=a;var c=Ua.toUpperCase();Ha=b("Trident")||b("MSIE");Ia=b("Edge");Ja=b("JavaFX");!b("Chrome")&&b("CriOS");Ka=b("WebKit")&&!Ia;La=b("Gecko")&&!Ka&&!Ha&&!Ia;Ma=b("Android");a=n.navigator&&n.navigator.maxTouchPoints;Oa=b("iPad")||b("Macintosh")&&0<a;Pa=b("iPod");Qa=b("iPhone")&&!Oa&&!Pa;Ra=b("Macintosh");Sa=Oa||Ma&&!b("Mobile")||b("Silk");Ta=!Sa&&(Pa||Qa||Ma||b("IEMobile"))})(n.navigator&&n.navigator.userAgent||"");
function Va(a){a.preventDefault();a.stopPropagation()}function Wa(a){return"textarea"==a.target.type||"text"==a.target.type||"number"==a.target.type||"email"==a.target.type||"password"==a.target.type||"search"==a.target.type||"tel"==a.target.type||"url"==a.target.type||a.target.isContentEditable||a.target.dataset&&"true"==a.target.dataset.As}
function Xa(a){var b=new r(0,0),c=a.getAttribute("x");c&&(b.x=parseInt(c,10));if(c=a.getAttribute("y"))b.y=parseInt(c,10);if(c=(c=a.getAttribute("transform"))&&c.match(Ya))b.x+=Number(c[1]),c[3]&&(b.y+=Number(c[3]));(a=a.getAttribute("style"))&&-1<a.indexOf("translate")&&(a=a.match(Za))&&(b.x+=Number(a[1]),a[3]&&(b.y+=Number(a[3])));return b}
function $a(a){for(var b=0,c=0;a;){var d=Xa(a);b+=d.x;c+=d.y;if(-1!=(" "+(a.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;a=a.parentNode}return new r(b,c)}var Ya=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Za=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;function ab(a){return a.ctrlKey&&Ra?!0:2==a.button}function bb(a,b,c){var d=b.createSVGPoint();d.x=a.clientX;d.y=a.clientY;c||(c=b.getScreenCTM().inverse());return d.matrixTransform(c)}
function cb(a){switch(a.deltaMode){default:return{x:a.deltaX,y:a.deltaY};case 1:return{x:40*a.deltaX,y:40*a.deltaY};case 2:return{x:125*a.deltaX,y:125*a.deltaY}}}function db(a){if("string"!=typeof a)return a;a=eb(a,!1);return a.length?String(a[0]):""}
function eb(a,b){var c=[],d=a.split("");d.push("");var e=0;a=[];for(var f=null,h=0;h<d.length;h++){var k=d[h];0==e?"%"==k?((k=a.join(""))&&c.push(k),a.length=0,e=1):a.push(k):1==e?"%"==k?(a.push(k),e=0):b&&"0"<=k&&"9">=k?(e=2,f=k,(k=a.join(""))&&c.push(k),a.length=0):"{"==k?e=3:(a.push("%",k),e=0):2==e?"0"<=k&&"9">=k?f+=k:(c.push(parseInt(f,10)),h--,e=0):3==e&&(""==k?(a.splice(0,0,"%{"),h--,e=0):"}"!=k?a.push(k):(e=a.join(""),/[A-Z]\w*/i.test(e)?(k=e.toUpperCase(),(k=0==k.lastIndexOf("BKY_",0)?k.substring(4):
null)&&k in q?(e=q[k],"string"==typeof e?Array.prototype.push.apply(c,eb(e,b)):b?c.push(String(e)):c.push(e)):c.push("%{"+e+"}")):c.push("%{"+e+"}"),e=a.length=0))}(k=a.join(""))&&c.push(k);b=[];for(h=a.length=0;h<c.length;++h)"string"==typeof c[h]?a.push(c[h]):((k=a.join(""))&&b.push(k),a.length=0,b.push(c[h]));(k=a.join(""))&&b.push(k);a.length=0;return b}function fb(){for(var a=hb.length,b=[],c=0;20>c;c++)b[c]=hb.charAt(Math.random()*a);return b.join("")}var hb="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
function ib(){if(void 0!==jb)return jb;if(!n.getComputedStyle)return!1;var a=document.createElement("p"),b="none",c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c)if(void 0!==a.style[d]){a.style[d]="translate3d(1px,1px,1px)";b=n.getComputedStyle(a);if(!b)return document.body.removeChild(a),!1;b=b.getPropertyValue(c[d])}document.body.removeChild(a);return jb=
"none"!==b}var jb;function kb(a){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)a();else var b=setInterval(function(){"complete"==document.readyState&&(clearInterval(b),a())},10)}function lb(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0}
function mb(a,b){var c=Object.create(null),d=nb(a,!0);b&&(a=ob(a))&&(a=d.indexOf(a),d.splice(a,d.length-a));for(a=0;b=d[a];a++)c[b.type]?c[b.type]++:c[b.type]=1;return c}
function pb(a){var b="string"==typeof a?db(a):a,c=Number(b);if(!isNaN(c)&&0<=c&&360>=c){var d=b=a=0,e=Math.floor(c/60),f=c/60-e,h=165.75*.55,k=165.75*(1-.45*f);f=165.75*(1-.45*(1-f));switch(e){case 1:a=k;b=165.75;d=h;break;case 2:a=h;b=165.75;d=f;break;case 3:a=h;b=k;d=165.75;break;case 4:a=f;b=h;d=165.75;break;case 5:a=165.75;b=h;d=k;break;case 6:case 0:a=165.75,b=f,d=h}a=pa(Math.floor(a),Math.floor(b),Math.floor(d));return{Kq:c,Qg:a}}if(c=na(b))return{Kq:null,Qg:c};c='Invalid colour: "'+b+'"';a!=
b&&(c+=' (from "'+a+'")');throw Error(c);};var qb="ontouchstart"in n||!!(n.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!n.navigator||!n.navigator.maxTouchPoints&&!n.navigator.msMaxTouchPoints),rb=null,sb={};
n.PointerEvent?sb={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:qb&&(sb={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});var tb=0;
function ub(a,b){vb();a.changedTouches&&1!=a.changedTouches.length||(tb=setTimeout(function(){a.changedTouches&&(a.button=2,a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY);b&&wb(b,a)},750))}function vb(){tb&&(clearTimeout(tb),tb=0)}function xb(a){return void 0!=a.pointerId?a.pointerId:a.changedTouches&&a.changedTouches[0]&&void 0!==a.changedTouches[0].identifier&&null!==a.changedTouches[0].identifier?a.changedTouches[0].identifier:"mouse"}
function yb(a){var b=xb(a);return void 0!==rb&&null!==rb?rb==b:"mousedown"==a.type||"touchstart"==a.type||"pointerdown"==a.type?(rb=b,!0):!1}function zb(a){return 0==a.type.lastIndexOf("touch",0)||0==a.type.lastIndexOf("mouse",0)||0==a.type.lastIndexOf("pointer",0)}function Ab(a){return 0==a.type.lastIndexOf("touch",0)||0==a.type.lastIndexOf("pointer",0)}
function Bb(a){var b=[];if(a.changedTouches)for(var c=0;c<a.changedTouches.length;c++)b[c]={type:a.type,changedTouches:[a.changedTouches[c]],target:a.target,stopPropagation:function(){a.stopPropagation()},preventDefault:function(){a.preventDefault()}};else b.push(a);return b};function u(a,b,c,d,e,f){function h(y){var G=!e;y=Bb(y);for(var gb=0,Na;Na=y[gb];gb++)if(!G||!zb(Na)||yb(Na)){var Fb=Na;if(0==Fb.type.lastIndexOf("touch",0)){var he=Fb.changedTouches[0];Fb.clientX=he.clientX;Fb.clientY=he.clientY}c?d.call(c,Na):d(Na);k=!0}}var k=!1,l=[];if(n.PointerEvent&&b in sb)for(var m=0,p;p=sb[b][m];m++)a.addEventListener(p,h,!1),l.push([a,p,h]);else if(a.addEventListener(b,h,!1),l.push([a,b,h]),b in sb){var t=function(y){h(y);var G=!f;k&&G&&y.preventDefault()};for(m=0;p=sb[b][m];m++)a.addEventListener(p,
t,!1),l.push([a,p,t])}return l}function Cb(a,b,c,d){function e(m){c?d.call(c,m):d(m)}var f=[];if(n.PointerEvent&&b in sb)for(var h=0,k;k=sb[b][h];h++)a.addEventListener(k,e,!1),f.push([a,k,e]);else if(a.addEventListener(b,e,!1),f.push([a,b,e]),b in sb){var l=function(m){if(m.changedTouches&&1==m.changedTouches.length){var p=m.changedTouches[0];m.clientX=p.clientX;m.clientY=p.clientY}e(m);m.preventDefault()};for(h=0;k=sb[b][h];h++)a.addEventListener(k,l,!1),f.push([a,k,l])}return f}
function v(a){for(;a.length;){var b=a.pop();b[0].removeEventListener(b[1],b[2],!1)}};
function Db(){this.Bd=Object.create(null);this.kf=Object.create(null)}function Eb(a,b){var c=b.component.id;if(a.Bd[c])throw Error('Plugin "'+c+'" with capabilities "'+a.Bd[c].zd+'" already added.');a.Bd[c]=b;for(var d=[],e=0;e<b.zd.length;e++){var f=String(b.zd[e]).toLowerCase();d.push(f);void 0===a.kf[f]?a.kf[f]=[c]:a.kf[f].push(c)}a.Bd[c].zd=d}
function Gb(a,b){var c=a.Bd[b];if(c){for(var d=0;d<c.zd.length;d++){var e=String(c.zd[d]).toLowerCase();a.kf[e].splice(a.kf[e].indexOf(b),1)}delete a.Bd[b]}}function Hb(a,b){var c=Ib;c=String(c).toLowerCase();return-1!==a.Bd[b].zd.indexOf(c)}function Jb(a,b){b=String(b).toLowerCase();b=a.kf[b];if(!b)return[];var c=[],d=[],e=a.Bd;b.forEach(function(f){d.push(e[f])});d.sort(function(f,h){return f.weight-h.weight});d.forEach(function(f){c.push(f.component)});return c}function Kb(a){this.fh=a}
Kb.prototype.toString=function(){return this.fh};var Lb=new Kb("positionable"),Mb=new Kb("drag_target"),Ib=new Kb("delete_area"),Nb=new Kb("autohideable");
function w(a){this.Cr=a}w.prototype.toString=function(){return this.Cr};var Ob=new w("animate"),Pb=new w("circle"),Qb=new w("clipPath"),Rb=new w("defs"),Sb=new w("feComposite"),Tb=new w("feGaussianBlur"),Ub=new w("fePointLight"),Vb=new w("feSpecularLighting"),Wb=new w("filter"),Xb=new w("g"),Yb=new w("image"),Zb=new w("line"),$b=new w("path"),ac=new w("pattern"),bc=new w("polygon"),cc=new w("rect"),dc=new w("svg"),ec=new w("text"),fc=new w("tspan");var gc=null,hc=0,ic=null;function x(a,b,c){a=document.createElementNS("http://www.w3.org/2000/svg",String(a));for(var d in b)a.setAttribute(d,b[d]);document.body.runtimeStyle&&(a.runtimeStyle=a.currentStyle=a.style);c&&c.appendChild(a);return a}function z(a,b){var c=a.getAttribute("class")||"";a.setAttribute("class",c+" "+b)}
function jc(a,b){for(var c=(a.getAttribute("class")||"").split(/\s+/),d=0;d<c.length;d++)c[d]&&c[d]!=b||(c.splice(d,1),d--);c.length?a.setAttribute("class",c.join(" ")):a.removeAttribute("class")}function kc(a,b){return-1!=(" "+(a.getAttribute("class")||"")+" ").indexOf(" "+b+" ")}function A(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function lc(a,b){var c=b.nextSibling;b=b.parentNode;if(!b)throw Error("Reference node has no parent.");c?b.insertBefore(a,c):b.appendChild(a)}
function mc(a,b){a.style.transform=b;a.style["-webkit-transform"]=b}function nc(){hc++;gc||(gc=Object.create(null))}function oc(){hc--;hc||(gc=null)}function pc(a,b,c,d){var e=a.textContent;a=e+"\n"+a.className.baseVal;var f;if(gc&&(f=gc[a]))return f;ic||(f=document.createElement("canvas"),f.className="blocklyComputeCanvas",document.body.appendChild(f),ic=f.getContext("2d"));ic.font=c+" "+b+" "+d;f=ic.measureText(e).width;gc&&(gc[a]=f);return f};function qc(a,b,c){if(c<a){var d=c;c=a;a=d}return Math.max(a,Math.min(b,c))};


var rc,sc,tc,uc=null,vc=null,wc=null,xc=null,yc="",zc="";
function Ac(){if(!rc){var a=document.createElement("div");a.className="blocklyDropDownDiv";(Bc||document.body).appendChild(a);rc=a;var b=document.createElement("div");b.className="blocklyDropDownContent";a.appendChild(b);sc=b;b=document.createElement("div");b.className="blocklyDropDownArrow";a.appendChild(b);tc=b;rc.style.opacity=0;rc.style.transition="transform 0.25s, opacity 0.25s";a.addEventListener("focusin",function(){z(a,"blocklyFocused")});a.addEventListener("focusout",function(){jc(a,"blocklyFocused")})}}
function Cc(a,b){var c=Dc(a);var d=new wa(c.top,c.bottom,c.left,c.right);c=d.left+(d.right-d.left)/2;var e=d.bottom;d=d.top;for(var f=a.F(),h=f.j;h.options.bb;)h=h.options.bb;uc=B(h).parentNode;f=f.s;vc=a;xc=b||null;a=rc;a.style.direction=f?"rtl":"ltr";b=Ec;yc=b.pa.pc();zc=b.ed().pc();z(a,yc);z(a,zc);a=Ga(uc);b=Ea(uc);a={left:a.x,right:a.x+b.width,top:a.y,bottom:a.y+b.height,width:b.width,height:b.height};b=Ea(rc);e+b.height<a.bottom?c=Fc(c,e,a,b):d-b.height>a.top?c=Gc(c,d,a,b):e+b.height<document.documentElement.clientHeight?
c=Fc(c,e,a,b):d-b.height>document.documentElement.clientTop?c=Gc(c,d,a,b):(c=Hc(c,a.left,a.right,b.width),c={cl:c.sf,dl:0,Nk:c.sf,Ok:0,bk:null,hf:null,dk:null,ck:!1});a=c;a.ck?(tc.style.display="",tc.style.transform="translate("+a.hf+"px,"+a.dk+"px) rotate(45deg)",tc.setAttribute("class",a.bk?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):tc.style.display="none";c=Math.floor(a.cl);e=Math.floor(a.dl);d=Math.floor(a.Nk);a=Math.floor(a.Ok);b=rc;b.style.left=c+"px";
b.style.top=e+"px";b.style.display="block";b.style.opacity=1;b.style.transform="translate("+(d-c)+"px,"+(a-e)+"px)"}function Fc(a,b,c,d){a=Hc(a,c.left,c.right,d.width);return{cl:a.sf,dl:b,Nk:a.sf,Ok:b+16,hf:a.hf,dk:-9,bk:!0,ck:!0}}function Gc(a,b,c,d){a=Hc(a,c.left,c.right,d.width);return{cl:a.sf,dl:b-d.height,Nk:a.sf,Ok:b-d.height-16,hf:a.hf,dk:d.height-2-8,bk:!1,ck:!0}}function Hc(a,b,c,d){var e=a;a=qc(b,a-d/2,c-d);b=qc(12,e-8-a,d-12-16);return{hf:b,sf:a}}
function Ic(){var a=rc;a.style.transform="translate(0, 0)";a.style.opacity=0;wc=setTimeout(function(){Jc()},250);xc&&(xc(),xc=null)}function Jc(){if(vc){wc&&clearTimeout(wc);var a=rc;a.style.transform="";a.style.left="";a.style.top="";a.style.opacity=0;a.style.display="none";a.style.backgroundColor="";a.style.borderColor="";xc&&(xc(),xc=null);sc.textContent="";sc.style.width="";vc=null;yc&&(jc(a,yc),yc="");zc&&(jc(a,zc),zc="");Kc(Ec)}};var Lc=Object.create(null);function Mc(a){this.fh=a}Mc.prototype.toString=function(){return this.fh};var Nc=new Mc("connectionChecker"),Oc=new Mc("cursor"),Pc=new Mc("event"),Qc=new Mc("field"),Rc=new Mc("renderer"),Sc=new Mc("toolbox"),Tc=new Mc("theme"),Uc=new Mc("flyoutsVerticalToolbox"),Vc=new Mc("metricsManager"),Wc=new Mc("blockDragger");
function C(a,b,c){if(!(a instanceof Mc)&&"string"!=typeof a||""==String(a).trim())throw Error('Invalid type "'+a+'". The type must be a non-empty string or a Blockly.registry.Type.');a=String(a).toLowerCase();if("string"!=typeof b||""==b.trim())throw Error('Invalid name "'+b+'". The name must be a non-empty string.');b=b.toLowerCase();if(!c)throw Error("Can not register a null value");var d=Lc[a];d||(d=Lc[a]=Object.create(null));switch(a){case String(Qc):if("function"!=typeof c.N)throw Error('Type "'+
a+'" must have a fromJson function');}if(d[b])throw Error('Name "'+b+'" with type "'+a+'" already registered.');d[b]=c}function Xc(a,b,c){a=String(a).toLowerCase();b=b.toLowerCase();var d=Lc[a];if(!d||!d[b]){b="Unable to find ["+b+"]["+a+"] in the registry.";if(c)throw Error(b+" You must require or register a "+a+" plugin.");console.warn(b);return null}return d[b]}function Yc(a,b,c){b=b.plugins[a.toString()]||"default";return"function"==typeof b?b:Xc(a,b,c)};var Zc="",$c=!0,D=0,ad=["create","move"],bd=[];function E(a){0==D&&(bd.length||setTimeout(cd,0),bd.push(a))}function cd(){for(var a=dd(bd,!0),b=bd.length=0,c;c=a[b];b++)if(c.Wa){var d=ed[c.Wa]||null;if(d){var e=c;if(e.cb)for(d.Qe.push(e),d.oh.length=0;d.Qe.length>d.Lm&&0<=d.Lm;)d.Qe.shift();for(var f=0;c=d.Ja[f];f++)c(e)}}}
function dd(a,b){a=a.slice();b||a.reverse();for(var c=[],d=Object.create(null),e=0,f;f=a[e];e++)if(!f.Xi()){var h=[f.kl?"ui":f.type,f.$,f.Wa].join(" "),k=d[h],l=k?k.event:null;if(!k)d[h]={event:f,index:e},c.push(f);else if("move"==f.type&&k.index==e-1)l.Be=f.Be,l.Ae=f.Ae,l.Qd=f.Qd,k.index=e;else if("change"==f.type&&f.element==l.element&&f.name==l.name)l.newValue=f.newValue;else if("viewport_change"==f.type)l.ic=f.ic,l.hc=f.hc,l.scale=f.scale,l.gh=f.gh;else if("click"!=f.type||"bubble_open"!=l.type)d[h]=
{event:f,index:e},c.push(f)}a=c.filter(function(m){return!m.Xi()});b||a.reverse();for(e=1;f=a[e];e++)"change"==f.type&&"mutation"==f.element&&a.unshift(a.splice(e,1)[0]);return a}function F(a){Zc="boolean"==typeof a?a?fb():"":a}function fd(a){var b=[];a=nb(a,!1);for(var c=0,d;d=a[c];c++)b[c]=d.id;return b}function H(a){return Xc(Pc,a)}
function gd(a){if(("move"==a.type||"create"==a.type)&&a.Wa){var b=ed[a.Wa]||null,c=b.Jb(a.$);if(c){a=$c;try{$c=!1;var d=c.getParent();if(d&&d.isEnabled()){var e=nb(c,!1);b=0;for(var f;f=e[b];b++)f.Qc(!0)}else if((c.u||c.G)&&!b.Ra()){do c.Qc(!1),c=ob(c);while(c)}}finally{$c=a}}}};
function hd(){this.Jc=null;this.Wa=void 0;this.group=Zc;this.cb=$c}g=hd.prototype;g.kl=!1;g.R=function(){var a={type:this.type};this.group&&(a.group=this.group);return a};g.N=function(a){this.Jc=!1;this.group=a.group};g.Xi=function(){return!1};g.run=function(){};function id(a){if(a.Wa)var b=ed[a.Wa]||null;if(!b)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return b};function I(a,b){a.i=b.prototype;a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function jd(a,b){for(var c in b)a[c]=b[c]}function kd(a){return Object.values?Object.values(a):Object.keys(a).map(function(b){return a[b]})};function J(a){return document.createElementNS("https://developers.google.com/blockly/xml",a)};function ld(a){for(var b=K,c=J("xml"),d=md(b),e=J("variables"),f=0,h;h=d[f];f++){var k=J("variable");k.appendChild(document.createTextNode(h.name));h.type&&k.setAttribute("type",h.type);k.id=h.Ya();e.appendChild(k)}e.hasChildNodes()&&c.appendChild(e);e=[].concat(b.Jj);1<e.length&&(b.Rc.offset=Math.sin(3*Math.PI/180),b.s&&(b.Rc.offset*=-1),e.sort(b.Rc));for(d=0;f=e[d];d++)c.appendChild(f.Is(a));b=b.sa(!0);for(d=0;e=b[d];d++)c.appendChild(nd(e,a));return c}
function nd(a,b){if(a.zb()&&(a=od(a,!1)[0],!a))return new DocumentFragment;var c;a.j.s&&(c=a.j.Hd());b=pd(a,b);var d=a.aa();b.setAttribute("x",Math.round(a.j.s?c-d.x:d.x));b.setAttribute("y",Math.round(d.y));return b}
function pd(a,b){if(a.zb())return(a=od(a,!1)[0])?pd(a):new DocumentFragment;var c=J(a.S?"shadow":"block");c.setAttribute("type",a.type);b||c.setAttribute("id",a.id);if(a.$b){var d=a.$b();d&&(d.hasChildNodes()||d.hasAttributes())&&c.appendChild(d)}d=0;for(var e;e=a.A[d];d++)for(var f=0,h;h=e.ga[f];f++){var k=!1;h.name&&(h.kg?k=!0:h.Vh&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),
k=!0));k?(k=J("field"),k.setAttribute("name",h.name||""),k.textContent=h.Ga,h=k):h=null;h&&c.appendChild(h)}if(d=a.mc.text)e=a.mc.size,f=a.mc.Fo,h=J("comment"),h.appendChild(document.createTextNode(d)),h.setAttribute("pinned",f),h.setAttribute("h",e.height),h.setAttribute("w",e.width),c.appendChild(h);a.data&&(d=J("data"),d.appendChild(document.createTextNode(a.data)),c.appendChild(d));for(d=0;e=a.A[d];d++){var l;f=!0;5!=e.type&&(k=e.connection.I(),1==e.type?l=J("value"):3==e.type&&(l=J("statement")),
h=e.connection.xf(),!h||k&&k.S||l.appendChild(qd(h,b)),k&&(h=pd(k,b),1==h.nodeType&&(l.appendChild(h),f=!1)),l.setAttribute("name",e.name),f||c.appendChild(l))}void 0!=a.jd&&a.jd!=a.Lq&&c.setAttribute("inline",a.jd);a.isCollapsed()&&c.setAttribute("collapsed",!0);a.isEnabled()||c.setAttribute("disabled",!0);a.Lc()||a.S||c.setAttribute("deletable",!1);a.$a()||a.S||c.setAttribute("movable",!1);a.yb()||c.setAttribute("editable",!1);if(d=ob(a))h=pd(d,b),1==h.nodeType&&(l=J("next"),l.appendChild(h),c.appendChild(l));
h=a.C&&a.C.xf();!h||d&&d.S||l.appendChild(qd(h,b));return c}function qd(a,b){for(var c=a=a.cloneNode(!0),d;c;)if(b&&"shadow"==c.nodeName&&c.removeAttribute("id"),c.firstChild)c=c.firstChild;else{for(;c&&!c.nextSibling;)d=c,c=c.parentNode,3==d.nodeType&&""==d.data.trim()&&c.firstChild!=d&&A(d);c&&(d=c,c=c.nextSibling,3==d.nodeType&&""==d.data.trim()&&A(d))}return a}function rd(a){return(new XMLSerializer).serializeToString(a).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")}
function sd(a){var b=(new DOMParser).parseFromString(a,"text/xml");if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+a);return b.documentElement}
function td(a,b){var c;b.s&&(c=b.Hd());var d=[];nc();var e=Zc;e||F(!0);b.eb&&b.eb(!1);var f=!0;try{for(var h=0,k;k=a.childNodes[h];h++){var l=k.nodeName.toLowerCase(),m=k;if("block"==l||"shadow"==l&&!$c){var p=ud(m,b);d.push(p.id);var t=m.hasAttribute("x")?parseInt(m.getAttribute("x"),10):10,y=m.hasAttribute("y")?parseInt(m.getAttribute("y"),10):10;isNaN(t)||isNaN(y)||p.moveBy(b.s?c-t:t,y);f=!1}else{if("shadow"==l)throw TypeError("Shadow block cannot be a top-level block.");if("variables"==l){if(f)for(var G=
void 0,gb=b,Na=0;G=m.childNodes[Na];Na++){if(1==G.nodeType){var Fb=G.getAttribute("type"),he=G.getAttribute("id");gb.Ed(G.textContent,Fb,he)}}else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");f=!1}}}}finally{e||F(!1),oc()}b.eb&&b.eb(!0);E(new (H("finished_loading"))(b))}
function ud(a,b){if(a instanceof vd){var c=a;a=b;b=c;console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}D++;c=b.uf();try{var d=wd(a,b),e=nb(d,!1);if(b.L){xd(d,!1);for(var f=e.length-1;0<=f;f--)e[f].hd();for(f=e.length-1;0<=f;f--)e[f].V(!1);setTimeout(function(){d.Vb||xd(d,!0)},1);yd(d);zd(b)}else for(f=e.length-1;0<=f;f--);}finally{D--}if(0==D){a=Ad(b,c);for(f=0;f<a.length;f++)b=a[f],E(new (H("var_create"))(b));E(new (H("create"))(d))}return d}
function Bd(a,b){for(var c=0,d;d=a[c];c++){var e=d.textContent,f="true"==d.getAttribute("pinned"),h=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10);b.Tf(e);b.mc.Fo=f;isNaN(h)||isNaN(d)||(b.mc.size=new Da(h,d));f&&b.wq&&!b.Za&&setTimeout(function(){b.lc.ta(!0)},1)}}function Cd(a){for(var b={pg:null,qg:null},c=0,d;d=a.childNodes[c];c++)1==d.nodeType&&("block"==d.nodeName.toLowerCase()?b.pg=d:"shadow"==d.nodeName.toLowerCase()&&(b.qg=d));return b}
function wd(a,b,c,d){var e=a.getAttribute("type");if(!e)throw TypeError("Block type unspecified: "+a.outerHTML);var f=a.getAttribute("id");f=b.Lf(e,f);for(var h=[],k=[],l=[],m=[],p=[],t=[],y=0,G;G=a.childNodes[y];y++)if(3!=G.nodeType)switch(G.nodeName.toLowerCase()){case "mutation":h.push(G);break;case "comment":if(!ka.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}k.push(G);break;case "data":l.push(G);break;case "title":case "field":m.push(G);break;case "value":case "statement":p.push(G);
break;case "next":t.push(G);break;default:console.warn("Ignoring unknown tag: "+G.nodeName)}y=!1;G=0;for(var gb;gb=h[G];G++)f.cd&&(f.cd(gb),f.hd&&(y=!0));h=y;Bd(k,f);for(k=0;y=l[k];k++)f.data=y.textContent;if(c)if(d)if(f.G)c.connect(f.G);else throw TypeError("Next block does not have previous statement.");else if(f.u)c.connect(f.u);else if(f.G)c.connect(f.G);else throw TypeError("Child block does not have output or previous statement.");for(c=0;k=m[c];c++)l=k.getAttribute("name"),d=f,(y=Dd(d,l))?
y.Qk(k):console.warn("Ignoring non-existent field "+l+" in block "+d.type);for(m=0;d=p[m];m++){l=d.getAttribute("name");c=L(f,l);if(!c){console.warn("Ignoring non-existent input "+l+" in block "+e);break}d=Cd(d);if(d.pg){if(!c.connection)throw TypeError("Input connection does not exist.");wd(d.pg,b,c.connection,!1)}d.qg&&c.connection.wh(d.qg)}for(e=0;p=t[e];e++){p=Cd(p);if(p.pg){if(!f.C)throw TypeError("Next statement does not exist.");if(f.C.isConnected())throw TypeError("Next statement is already connected.");
wd(p.pg,b,f.C,!0)}p.qg&&f.C&&f.C.wh(p.qg)}h&&f.hd();(b=a.getAttribute("inline"))&&f.Je("true"==b);(b=a.getAttribute("disabled"))&&f.Qc("true"!=b&&"disabled"!=b);if(b=a.getAttribute("deletable"))f.wk="true"==b;(b=a.getAttribute("movable"))&&f.xj("true"==b);(b=a.getAttribute("editable"))&&f.jm("true"==b);(b=a.getAttribute("collapsed"))&&f.He("true"==b);if("shadow"==a.nodeName.toLowerCase()){a=od(f,!1);for(b=0;t=a[b];b++)if(!t.S)throw TypeError("Shadow block not allowed non-shadow child.");if(Ed(f).length)throw TypeError("Shadow blocks cannot have variable references.");
f.mm(!0)}return f};function Fd(a){Fd.i.constructor.call(this);this.$=(this.Jc="undefined"==typeof a)?"":a.id;this.Wa=this.Jc?"":a.j.id}I(Fd,hd);Fd.prototype.R=function(){var a=Fd.i.R.call(this);a.blockId=this.$;return a};Fd.prototype.N=function(a){Fd.i.N.call(this,a);this.$=a.blockId};function Gd(a,b,c,d,e){Gd.i.constructor.call(this,a);a&&(this.element="undefined"==typeof b?"":b,this.name="undefined"==typeof c?"":c,this.oldValue="undefined"==typeof d?"":d,this.newValue="undefined"==typeof e?"":e)}I(Gd,Fd);g=Gd.prototype;
g.type="change";g.R=function(){var a=Gd.i.R.call(this);a.element=this.element;this.name&&(a.name=this.name);a.oldValue=this.oldValue;a.newValue=this.newValue;return a};g.N=function(a){Gd.i.N.call(this,a);this.element=a.element;this.name=a.name;this.oldValue=a.oldValue;this.newValue=a.newValue};g.Xi=function(){return this.oldValue==this.newValue};
g.run=function(a){var b=id(this).Jb(this.$);if(b)switch(b.Ab&&b.Ab.ta(!1),a=a?this.newValue:this.oldValue,this.element){case "field":(b=Dd(b,this.name))?Hd(b,a):console.warn("Can't set non-existent field: "+this.name);break;case "comment":b.Tf(a||null);break;case "collapsed":b.He(!!a);break;case "disabled":b.Qc(!a);break;case "inline":b.Je(!!a);break;case "mutation":var c="";b.$b&&(c=(c=b.$b())&&rd(c));if(b.cd){var d=sd(a||"<mutation/>");b.cd(d)}E(new Gd(b,"mutation",null,c,a));break;default:console.warn("Unknown change type: "+
this.element)}else console.warn("Can't change non-existent block: "+this.$)};function Id(a){Id.i.constructor.call(this,a);a&&(a.S&&(this.cb=!1),this.xml=a.j.L?nd(a):pd(a),this.se=fd(a))}I(Id,Fd);Id.prototype.type="create";Id.prototype.R=function(){var a=Id.i.R.call(this);a.xml=rd(this.xml);a.ids=this.se;this.cb||(a.recordUndo=this.cb);return a};Id.prototype.N=function(a){Id.i.N.call(this,a);this.xml=sd(a.xml);this.se=a.ids;void 0!==a.recordUndo&&(this.cb=a.recordUndo)};
Id.prototype.run=function(a){var b=id(this);if(a)a=J("xml"),a.appendChild(this.xml),td(a,b);else{a=0;for(var c;c=this.se[a];a++){var d=b.Jb(c);d?d.m(!1):c==this.$&&console.warn("Can't uncreate non-existent block: "+c)}}};function Jd(a){Jd.i.constructor.call(this,a);if(a){if(a.getParent())throw Error("Connected blocks cannot be deleted.");a.S&&(this.cb=!1);this.Mf=a.j.L?nd(a):pd(a);this.se=fd(a)}}I(Jd,Fd);Jd.prototype.type="delete";
Jd.prototype.R=function(){var a=Jd.i.R.call(this);a.oldXml=rd(this.Mf);a.ids=this.se;this.cb||(a.recordUndo=this.cb);return a};Jd.prototype.N=function(a){Jd.i.N.call(this,a);this.Mf=sd(a.oldXml);this.se=a.ids;void 0!==a.recordUndo&&(this.cb=a.recordUndo)};Jd.prototype.run=function(a){var b=id(this);if(a){a=0;for(var c;c=this.se[a];a++){var d=b.Jb(c);d?d.m(!1):c==this.$&&console.warn("Can't delete non-existent block: "+c)}}else a=J("xml"),a.appendChild(this.Mf),td(a,b)};
function Kd(a){Kd.i.constructor.call(this,a);a&&(a.S&&(this.cb=!1),a=Ld(this),this.uo=a.Co,this.qo=a.Rn,this.Fl=a.ln)}I(Kd,Fd);g=Kd.prototype;g.type="move";g.R=function(){var a=Kd.i.R.call(this);this.Be&&(a.newParentId=this.Be);this.Ae&&(a.newInputName=this.Ae);this.Qd&&(a.newCoordinate=Math.round(this.Qd.x)+","+Math.round(this.Qd.y));this.cb||(a.recordUndo=this.cb);return a};
g.N=function(a){Kd.i.N.call(this,a);this.Be=a.newParentId;this.Ae=a.newInputName;if(a.newCoordinate){var b=a.newCoordinate.split(",");this.Qd=new r(Number(b[0]),Number(b[1]))}void 0!==a.recordUndo&&(this.cb=a.recordUndo)};function Md(a){var b=Ld(a);a.Be=b.Co;a.Ae=b.Rn;a.Qd=b.ln}function Ld(a){var b=id(a).Jb(a.$);a={};var c=b.getParent();if(c){if(a.Co=c.id,b=Nd(c,b))a.Rn=b.name}else a.ln=b.aa();return a}g.Xi=function(){return this.uo==this.Be&&this.qo==this.Ae&&sa(this.Fl,this.Qd)};
g.run=function(a){var b=id(this),c=b.Jb(this.$);if(c){var d=a?this.Be:this.uo,e=a?this.Ae:this.qo,f=a?this.Qd:this.Fl;a=null;if(d&&(a=b.Jb(d),!a)){console.warn("Can't connect to non-existent block: "+d);return}c.getParent()&&Od(c);if(f)e=c.aa(),c.moveBy(f.x-e.x,f.y-e.y);else{c=c.u||c.G;b=c.type;if(e){if(a=L(a,e))var h=a.connection}else 4==b&&(h=a.C);h?c.connect(h):console.warn("Can't connect to non-existent input: "+e)}}else console.warn("Can't move non-existent block: "+this.$)};C(Pc,"create",Id);
C(Pc,"delete",Jd);C(Pc,"change",Gd);C(Pc,"move",Kd);function Pd(a){this.Jc="undefined"==typeof a;this.Wa=a?a.id:"";this.group=Zc;this.cb=!1}I(Pd,hd);Pd.prototype.type="finished_loading";Pd.prototype.R=function(){var a={type:this.type};this.group&&(a.group=this.group);this.Wa&&(a.workspaceId=this.Wa);return a};Pd.prototype.N=function(a){this.Jc=!1;this.Wa=a.workspaceId;this.group=a.group};C(Pc,"finished_loading",Pd);function Qd(a){Qd.i.constructor.call(this);this.Jc="undefined"==typeof a;this.Wa=a?a:"";this.cb=!1}I(Qd,hd);Qd.prototype.kl=!0;function Rd(a,b,c,d){Rd.i.constructor.call(this,a?a.j.id:void 0);this.$=a?a.id:null;this.element="undefined"==typeof b?"":b;this.oldValue="undefined"==typeof c?"":c;this.newValue="undefined"==typeof d?"":d}I(Rd,Qd);Rd.prototype.type="ui";
Rd.prototype.R=function(){var a=Rd.i.R.call(this);a.element=this.element;void 0!==this.newValue&&(a.newValue=this.newValue);this.$&&(a.blockId=this.$);return a};Rd.prototype.N=function(a){Rd.i.N.call(this,a);this.element=a.element;this.newValue=a.newValue;this.$=a.blockId};C(Pc,"ui",Rd);function Sd(a){Sd.i.constructor.call(this);this.ee=(this.Jc="undefined"==typeof a)?"":a.Ya();this.Wa=this.Jc?"":a.j.id}I(Sd,hd);Sd.prototype.R=function(){var a=Sd.i.R.call(this);a.varId=this.ee;return a};Sd.prototype.N=function(a){Sd.i.R.call(this);this.ee=a.varId};function Td(a){Td.i.constructor.call(this,a);a&&(this.Te=a.type,this.Se=a.name)}I(Td,Sd);Td.prototype.type="var_create";Td.prototype.R=function(){var a=Td.i.R.call(this);a.varType=this.Te;a.varName=this.Se;return a};
Td.prototype.N=function(a){Td.i.N.call(this,a);this.Te=a.varType;this.Se=a.varName};Td.prototype.run=function(a){var b=id(this);a?b.Ed(this.Se,this.Te,this.ee):b.rf(this.ee)};function Ud(a){Ud.i.constructor.call(this,a);a&&(this.Te=a.type,this.Se=a.name)}I(Ud,Sd);Ud.prototype.type="var_delete";Ud.prototype.R=function(){var a=Ud.i.R.call(this);a.varType=this.Te;a.varName=this.Se;return a};Ud.prototype.N=function(a){Ud.i.N.call(this,a);this.Te=a.varType;this.Se=a.varName};
Ud.prototype.run=function(a){var b=id(this);a?b.rf(this.ee):b.Ed(this.Se,this.Te,this.ee)};function Vd(a,b){Vd.i.constructor.call(this,a);a&&(this.Gl=a.name,this.Dl="undefined"==typeof b?"":b)}I(Vd,Sd);Vd.prototype.type="var_rename";Vd.prototype.R=function(){var a=Vd.i.R.call(this);a.oldName=this.Gl;a.newName=this.Dl;return a};Vd.prototype.N=function(a){Vd.i.N.call(this,a);this.Gl=a.oldName;this.Dl=a.newName};Vd.prototype.run=function(a){var b=id(this);a?b.Qf(this.ee,this.Dl):b.Qf(this.ee,this.Gl)};
C(Pc,"var_create",Td);C(Pc,"var_delete",Ud);C(Pc,"var_rename",Vd);function Wd(a){this.wg=a;this.ya()}g=Wd.prototype;g.ka=null;g.Ec=null;g.wg=null;g.Xd=1;g.Ch=null;g.hn=new r(0,0);g.ya=function(){this.ka||(this.ka=x(dc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyBlockDragSurface"},this.wg),this.Ec=x(Xb,{},this.ka))};
function Xd(a,b){if(a.Ec.childNodes.length)throw Error("Already dragging a block.");a.Ec.appendChild(b);a.ka.style.display="block";a.Ch=new r(0,0)}g.Pe=function(a,b){this.Ch=new r(a*this.Xd,b*this.Xd);a=this.Ch.x;b=this.Ch.y;a=a.toFixed(0);b=b.toFixed(0);this.ka.style.display="block";mc(this.ka,"translate3d("+a+"px, "+b+"px, 0px)")};g.Uk=function(){var a=Xa(this.ka);return new r(a.x/this.Xd,a.y/this.Xd)};g.J=function(){return this.ka};
g.oi=function(a){a?a.appendChild(this.Ec.firstChild):this.Ec.removeChild(this.Ec.firstChild);this.ka.style.display="none";if(this.Ec.childNodes.length)throw Error("Drag group was not cleared.");this.Ch=null};var Yd=!1,Zd=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;",
"left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);",
"color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {",
"max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;",
"border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;",
"}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;",
"}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;",
"}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",
".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {",
"margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;",
"}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",
".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",
".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {",
"box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {",
"background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"];function $d(a,b){this.zf=a;this.pm=b.spacing;this.$n=b.length;this.Mq=(this.ql=a.firstChild)&&this.ql.nextSibling;this.rr=b.snap}$d.prototype.Xd=1;$d.prototype.m=function(){this.zf=null};$d.prototype.update=function(a){this.Xd=a;var b=this.pm*a||100;this.zf.setAttribute("width",b);this.zf.setAttribute("height",b);b=Math.floor(this.pm/2)+.5;var c=b-this.$n/2,d=b+this.$n/2;b*=a;c*=a;d*=a;ae(this.ql,a,c,d,b,b);ae(this.Mq,a,b,b,c,d)};
function ae(a,b,c,d,e,f){a&&(a.setAttribute("stroke-width",b),a.setAttribute("x1",c),a.setAttribute("y1",e),a.setAttribute("x2",d),a.setAttribute("y2",f))}$d.prototype.moveTo=function(a,b){this.zf.setAttribute("x",a);this.zf.setAttribute("y",b);(Ha||Ia)&&this.update(this.Xd)};function be(){this.name="classic";C(Tc,"classic",this)}be.prototype.pc=function(){return this.name+"-theme"};var ce={};ce=new be;function de(a){if(!a)return null;if(a instanceof Element||"string"==typeof a){if(a){if("string"!=typeof a&&(Ha&&a.outerHTML?a=a.outerHTML:a instanceof Element||(a=null)),"string"==typeof a&&(a=sd(a),"xml"!=a.nodeName.toLowerCase()))throw TypeError("Toolbox should be an <xml> document.");}else a=null;var b={contents:ee(a)};a instanceof Node&&fe(a,b);a=b}b=a.kind;var c=a.contents;if(b&&"flyoutToolbox"!=b&&"categoryToolbox"!=b)throw Error("Invalid toolbox kind "+b+". Please supply either flyoutToolbox or categoryToolbox");
if(!c)throw Error("Toolbox must have a contents attribute.");return a}function ge(a){return a?a.contents?a.contents:Array.isArray(a)&&0<a.length&&!a[0].nodeType?a:ee(a):[]}function ie(a){if(!a)return!1;var b=a.kind;return b?"categoryToolbox"==b:!!a.contents.filter(function(c){return"CATEGORY"==c.kind.toUpperCase()}).length}
function ee(a){var b=[],c=a.childNodes;c||(c=a);a=0;for(var d;d=c[a];a++)if(d.tagName){var e={},f=d.tagName.toUpperCase();e.kind=f;"BLOCK"==f?e.blockxml=d:d.childNodes&&0<d.childNodes.length&&(e.contents=ee(d));fe(d,e);b.push(e)}return b}function fe(a,b){for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];-1<d.nodeName.indexOf("css-")?(b.cssconfig=b.cssconfig||{},b.cssconfig[d.nodeName.replace("css-","")]=d.value):b[d.nodeName]=d.value}};function je(a){var b=!!a.readOnly;if(b)var c=null,d=!1,e=!1,f=!1,h=!1,k=!1,l=!1;else{c=de(a.toolbox);d=ie(c);e=a.trashcan;void 0===e&&(e=d);var m=a.maxTrashcanContents;e?void 0===m&&(m=32):m=0;f=a.collapse;void 0===f&&(f=d);h=a.comments;void 0===h&&(h=d);k=a.disable;void 0===k&&(k=d);l=a.sounds;void 0===l&&(l=!0)}var p=!!a.rtl;var t="end"!==a.toolboxPosition==p?3:2;var y=a.css;void 0===y&&(y=!0);var G="https://blockly-demo.appspot.com/static/media/";a.media?G=a.media:a.path&&(G=a.path+"media/");var gb=
void 0===a.oneBasedIndex?!0:!!a.oneBasedIndex,Na=a.renderer||"geras",Fb=a.plugins||{};this.s=p;this.oj=gb;this.collapse=f;this.jq=h;this.disable=k;this.readOnly=b;this.Zg=a.maxBlocks||Infinity;this.dj=a.maxInstances;this.jh=G;this.Hn=d;b=a.move||{};f={};void 0===b.scrollbars&&void 0===a.scrollbars?f.scrollbars=d:"object"==typeof b.scrollbars?(f.scrollbars={},f.scrollbars.al=!!b.scrollbars.horizontal,f.scrollbars.vertical=!!b.scrollbars.vertical,f.scrollbars.al&&f.scrollbars.vertical?f.scrollbars=
!0:f.scrollbars.al||f.scrollbars.vertical||(f.scrollbars=!1)):f.scrollbars=!!b.scrollbars||!!a.scrollbars;f.$f=f.scrollbars&&void 0!==b.wheel?!!b.wheel:"object"==typeof f.scrollbars;f.dd=f.scrollbars?void 0===b.drag?!0:!!b.drag:!1;this.ab=f;this.Kn=e;this.ej=m;this.Iq=l;this.Gq=y;this.md=c;c=a.grid||{};d={};d.spacing=Number(c.spacing)||0;d.nk=c.colour||"#888";d.length=void 0===c.length?1:Number(c.length);d.Fs=0<d.spacing&&!!c.snap;this.Gn=d;c=a.zoom||{};d={};d.controls=void 0===c.controls?!1:!!c.controls;
d.$f=void 0===c.wheel?!1:!!c.wheel;d.yr=void 0===c.startScale?1:Number(c.startScale);d.$g=void 0===c.maxScale?3:Number(c.maxScale);d.dh=void 0===c.minScale?.3:Number(c.minScale);d.mr=void 0===c.scaleSpeed?1.2:Number(c.scaleSpeed);d.Eo=void 0===c.pinch?d.$f||d.controls:!!c.pinch;this.xa=d;this.Cb=t;this.uj=Na;this.vj=a.rendererOverrides;this.Xk=null;this.bb=a.parentWorkspace;this.plugins=Fb};function ke(a,b,c,d,e){this.g=a;b=void 0===b?!0:b;c=void 0===c?!0:c;var f=b&&c;b&&(this.la=new le(a,!0,f,d,e));c&&(this.Z=new le(a,!1,f,d,e));f&&(this.yg=x(cc,{height:me,width:me,"class":"blocklyScrollbarBackground"},null),lc(this.yg,a.vd));this.ba=null}g=ke.prototype;g.m=function(){A(this.yg);this.ba=this.g=this.yg=null;this.la&&(this.la.m(),this.la=null);this.Z&&(this.Z.m(),this.Z=null)};
g.resize=function(){var a=this.g.rc();if(a){var b=!1,c=!1;this.ba&&this.ba.fb==a.fb&&this.ba.tb==a.tb&&this.ba.ub==a.ub&&this.ba.ib==a.ib?(this.ba&&this.ba.scrollWidth==a.scrollWidth&&this.ba.hc==a.hc&&this.ba.scrollLeft==a.scrollLeft||(b=!0),this.ba&&this.ba.scrollHeight==a.scrollHeight&&this.ba.ic==a.ic&&this.ba.scrollTop==a.scrollTop||(c=!0)):c=b=!0;if(b||c){try{D++,this.la&&b&&this.la.resize(a),this.Z&&c&&this.Z.resize(a)}finally{D--}ne(this.g)}this.la&&this.Z&&(this.ba&&this.ba.fb==a.fb&&this.ba.ib==
a.ib||this.yg.setAttribute("x",this.Z.position.x),this.ba&&this.ba.tb==a.tb&&this.ba.ub==a.ub||this.yg.setAttribute("y",this.la.position.y));this.ba=a}};g.zj=function(a,b){this.la&&this.la.zj(a,b);this.Z&&this.Z.zj(a,b)};g.set=function(a,b,c){this.la&&this.la.set(a,!1);this.Z&&this.Z.set(b,!1);if(c||void 0===c)a={},this.la&&(a.x=oe(this.la)),this.Z&&(a.y=oe(this.Z)),this.g.uh(a)};g.Ie=function(a){this.la&&this.la.Ie(a);this.Z&&this.Z.Ie(a)};
g.isVisible=function(){var a=!1;this.la&&(a=this.la.isVisible());this.Z&&(a=a||this.Z.isVisible());return a};
function le(a,b,c,d,e){this.g=a;this.Td=c||!1;this.qe=b;this.we=void 0!==e?e:.5;this.ratio=this.ba=null;this.qk(d);this.position=new r(0,0);a=me;b?(this.Sa.setAttribute("height",a),this.Mc.setAttribute("height",a),this.Pb.setAttribute("height",a-5),this.Pb.setAttribute("y",2.5),this.$i="width",this.Go="x"):(this.Sa.setAttribute("width",a),this.Mc.setAttribute("width",a),this.Pb.setAttribute("width",a-5),this.Pb.setAttribute("x",2.5),this.$i="height",this.Go="y");this.zo=u(this.Sa,"mousedown",this,
this.Xq);this.Ao=u(this.Pb,"mousedown",this,this.Yq)}var pe,qe;g=le.prototype;g.Rl=new r(0,0);g.Wo=0;g.dc=0;g.Id=0;g.Pg=0;g.ld=!0;g.ke=!0;var me=15;qb&&(me=25);g=le.prototype;g.m=function(){re();v(this.zo);this.zo=null;v(this.Ao);this.Ao=null;A(this.Mc);this.Sa=this.v=this.Mc=null;this.Pb&&(this.g.Va.unsubscribe(this.Pb),this.Pb=null);this.g=null};function se(a,b){return b=0>=b||isNaN(b)?0:Math.min(b,a.dc)}function te(a,b){a.Id=b;a.Pb.setAttribute(a.$i,a.Id)}
function ue(a,b){return b=0>=b||isNaN(b)?0:Math.min(b,a.dc-a.Id)}function ve(a,b){a.Pg=b;a.Pb.setAttribute(a.Go,a.Pg)}function we(a,b){a.dc=b;a.Mc.setAttribute(a.$i,a.dc);a.Sa.setAttribute(a.$i,a.dc)}g.setPosition=function(a,b){this.position.x=a;this.position.y=b;mc(this.Mc,"translate("+(this.position.x+this.Rl.x)+"px,"+(this.position.y+this.Rl.y)+"px)")};
g.resize=function(a){if(!a&&(a=this.g.rc(),!a))return;var b;(b=!this.ba)||(b=this.ba,b=!(a.fb==b.fb&&a.tb==b.tb&&a.hc==b.hc&&a.ic==b.ic&&a.ub==b.ub&&a.ib==b.ib&&a.scrollWidth==b.scrollWidth&&a.scrollHeight==b.scrollHeight&&a.scrollLeft==b.scrollLeft&&a.scrollTop==b.scrollTop));b&&(this.qe?(b=a,xe(this,b)?ye(this,b):ze(this,b)):(b=a,xe(this,b)?Ae(this,b):Be(this,b)),this.ba=a,Ce(this))};function xe(a,b){return a.ba?a.ba.fb!==b.fb||a.ba.tb!==b.tb||a.ba.ib!==b.ib||a.ba.ub!==b.ub:!0}
function ye(a,b){var c=b.fb-2*a.we;a.Td&&(c-=me);we(a,Math.max(0,c));c=b.ib+a.we;a.Td&&a.g.s&&(c+=me);a.setPosition(c,b.ub+b.tb-me-a.we);ze(a,b)}function ze(a,b){if(b.fb>=b.scrollWidth)te(a,a.dc),ve(a,0),a.Td||a.ta(!1);else{a.Td||a.ta(!0);var c=a.dc*b.fb/b.scrollWidth;c=se(a,c);te(a,c);c=b.scrollWidth-b.fb;var d=a.dc-a.Id;b=(b.hc-b.scrollLeft)/c*d;b=ue(a,b);ve(a,b);a.ratio=d/c}}
function Ae(a,b){var c=b.tb-2*a.we;a.Td&&(c-=me);we(a,Math.max(0,c));a.setPosition(a.g.s?b.ib+a.we:b.ib+b.fb-me-a.we,b.ub+a.we);Be(a,b)}function Be(a,b){if(b.tb>=b.scrollHeight)te(a,a.dc),ve(a,0),a.Td||a.ta(!1);else{a.Td||a.ta(!0);var c=a.dc*b.tb/b.scrollHeight;c=se(a,c);te(a,c);c=b.scrollHeight-b.tb;var d=a.dc-a.Id;b=(b.ic-b.scrollTop)/c*d;b=ue(a,b);ve(a,b);a.ratio=d/c}}
g.qk=function(a){var b="blocklyScrollbar"+(this.qe?"Horizontal":"Vertical");a&&(b+=" "+a);this.Mc=x(dc,{"class":b},null);this.v=x(Xb,{},this.Mc);this.Sa=x(cc,{"class":"blocklyScrollbarBackground"},this.v);a=Math.floor((me-5)/2);this.Pb=x(cc,{"class":"blocklyScrollbarHandle",rx:a,ry:a},this.v);this.g.Va.subscribe(this.Pb,"scrollbarColour","fill");this.g.Va.subscribe(this.Pb,"scrollbarOpacity","fill-opacity");lc(this.Mc,B(this.g))};g.isVisible=function(){return this.ld};
g.Ie=function(a){var b=a!=this.ke;this.ke=a;b&&this.Kh()};g.ta=function(a){var b=a!=this.isVisible();if(this.Td)throw Error("Unable to toggle visibility of paired scrollbars.");this.ld=a;b&&this.Kh()};g.Kh=function(){this.ke&&this.isVisible()?this.Mc.setAttribute("display","block"):this.Mc.setAttribute("display","none")};
g.Xq=function(a){Kc(this.g);rb=null;re();if(ab(a))a.stopPropagation();else{var b=bb(a,B(this.g),De(this.g));b=this.qe?b.x:b.y;var c=$a(this.Pb);c=this.qe?c.x:c.y;var d=this.Pg,e=.95*this.Id;b<=c?d-=e:b>=c+this.Id&&(d+=e);ve(this,ue(this,d));Ce(this);a.stopPropagation();a.preventDefault()}};
g.Yq=function(a){Kc(this.g);re();ab(a)?a.stopPropagation():(this.wr=this.Pg,Ee(this.g),this.Wo=this.qe?a.clientX:a.clientY,pe=u(document,"mouseup",this,this.$q),qe=u(document,"mousemove",this,this.Zq),a.stopPropagation(),a.preventDefault())};g.Zq=function(a){ve(this,ue(this,this.wr+((this.qe?a.clientX:a.clientY)-this.Wo)));Ce(this)};g.$q=function(){Fe(this.g);rb=null;re()};function re(){Ge(!0);pe&&(v(pe),pe=null);qe&&(v(qe),qe=null)}function oe(a){a=a.Pg/(a.dc-a.Id);isNaN(a)&&(a=0);return a}
function Ce(a){var b=oe(a),c={};a.qe?c.x=b:c.y=b;a.g.uh(c)}g.set=function(a,b){ve(this,ue(this,a*this.ratio));(b||void 0===b)&&Ce(this)};g.zj=function(a,b){this.Rl=new r(a,b)};var He=!1,Ie=!1,Je=0,Ke=0,Le=0,Me=0,Ne=null,Oe=null,Pe=null;function Qe(a){for(;a&&a.fc;){if("string"==typeof a.fc||"function"==typeof a.fc)return a;a=a.fc}return null}function Re(a){a.Pq=Cb(a,"mouseover",null,Se);a.Nq=Cb(a,"mouseout",null,Te);a.addEventListener("mousemove",Ue,!1)}function Ve(a){a&&(v(a.Pq),v(a.Nq),a.removeEventListener("mousemove",Ue))}function Se(a){Ie||(a=Qe(a.currentTarget),Ne!=a&&(We(),Oe=null,Ne=a),clearTimeout(Je))}
function Te(){Ie||(Je=setTimeout(function(){Oe=Ne=null;We()},1),clearTimeout(Ke))}function Ue(a){if(Ne&&Ne.fc&&!Ie)if(He){var b=Le-a.pageX;a=Me-a.pageY;10<Math.sqrt(b*b+a*a)&&We()}else Oe!=Ne&&(clearTimeout(Ke),Le=a.pageX,Me=a.pageY,Ke=setTimeout(Xe,750))}function We(){He&&(He=!1,Pe&&(Pe.style.display="none"));Ke&&clearTimeout(Ke)}
function Xe(){if(!Ie&&(Oe=Ne,Pe)){Pe.textContent="";var a;if(a=Qe(Ne)){for(a=a.fc;"function"==typeof a;)a=a();if("string"!=typeof a)throw Error("Tooltip function must return a string.");}else a="";a=Aa(a,50);a=a.split("\n");for(var b=0;b<a.length;b++){var c=document.createElement("div");c.appendChild(document.createTextNode(a[b]));Pe.appendChild(c)}a=Ne.s;b=document.documentElement.clientWidth;c=document.documentElement.clientHeight;Pe.style.direction=a?"rtl":"ltr";Pe.style.display="block";He=!0;
var d=Le;d=a?d-(0+Pe.offsetWidth):d+0;var e=Me+10;e+Pe.offsetHeight>c+window.scrollY&&(e-=Pe.offsetHeight+20);a?d=Math.max(5-window.scrollX,d):d+Pe.offsetWidth>b+window.scrollX-10&&(d=b-Pe.offsetWidth-10);Pe.style.top=e+"px";Pe.style.left=d+"px"}};function Ye(a,b,c){Array.isArray(c)&&(c=c.join(" "));a.setAttribute("aria-"+b,c)};function Ze(a,b){this.o=a;this.type=b}g=Ze.prototype;g.K=null;g.Vb=!1;g.mf=null;g.Cj=null;g.x=0;g.y=0;g.wi=function(a){var b=this.F(),c=a.F();a.isConnected()&&a.disconnect();if(this.isConnected()){var d=this.xf(!0);this.Cj=null;var e=this.I();if(e.S)e.m(!1);else{this.disconnect();var f=e}this.Cj=d}var h;0==D&&(h=new (H("move"))(c));if(!this||!a)throw Error("Cannot connect null connections.");this.K=a;a.K=this;c.Aj(b);h&&(Md(h),E(h));f&&(a=1===this.type?f.u:f.G,(c=$e(c,a))?a.connect(c):a.Ll(this))};
g.m=function(){if(this.isConnected()){this.wh(null);var a=this.I();a&&Od(a)}this.Vb=!0};g.F=function(){return this.o};function af(a){return 1==a.type||3==a.type}g.isConnected=function(){return!!this.K};g.Ll=function(){};g.connect=function(a){if(this.K!=a&&0==bf(this,a,!1)){var b=Zc;b||F(!0);af(this)?this.wi(a):a.wi(this);b||F(!1)}};function cf(a,b){var c=null;b=b.u;for(var d=0,e;e=a.A[d];d++)if((e=e.connection)&&0==bf(b,e,!1)){if(c)return null;c=e}return c}
function $e(a,b){if(2===b.type){a:{b=b.F();for(var c;c=cf(a,b);)if(a=c.I(),!a||a.S){b=c;break a}b=null}return b}return(a=a.Yi(!0))&&0==bf(b,a,!1)?a:null}g.disconnect=function(){var a=this.K;if(!a)throw Error("Source connection not connected.");if(a.K!=this)throw Error("Target connection not connected to source connection.");if(af(this)){var b=this.o;var c=a.F();a=this}else b=a.F(),c=this.o;var d=Zc;d||F(!0);this.zk(b,c);c.S||a.qh();d||F(!1)};
g.zk=function(a,b){var c;0==D&&(c=new (H("move"))(b));this.K=this.K.K=null;b.Aj(null);c&&(Md(c),E(c))};g.qh=function(){var a=this.F(),b=this.xf();if(a.j&&b)if(a=ud(b,a.j),a.u)this.connect(a.u);else if(a.G)this.connect(a.G);else throw Error("Child block does not have output or previous statement.");};g.I=function(){return this.isConnected()?this.K.F():null};g.xo=function(){!this.isConnected()||this.K&&0==bf(this,this.K,!1)||Od(af(this)?this.I():this.o)};
g.Ge=function(a){a?(Array.isArray(a)||(a=[a]),this.mf=a,this.xo()):this.mf=null;return this};g.wh=function(a){this.Cj=a;a=this.I();a?a.S&&(a.m(!1),this.qh()):this.qh()};g.xf=function(a){return a&&this.I().S?pd(this.I()):this.Cj};g.mo=function(){return[]};g.Gc=function(){for(var a=null,b=this.o.A,c=0;c<b.length;c++)if(b[c].connection===this){a=b[c];break}return a};function bf(a,b,c,d){if(a&&b){if(af(a)){var e=a.F();var f=b.F()}else f=a.F(),e=b.F();e=e==f?1:b.type!=ma[a.type]?2:e.j!==f.j?5:e.S&&!f.S?6:0}else e=3;return 0!=e?e:df(a,b)?c&&!ef(a,b,d||0)?7:0:4}function df(a,b){a=a.mf;b=b.mf;if(!a||!b)return!0;for(var c=0;c<a.length;c++)if(-1!=b.indexOf(a[c]))return!0;return!1}
function ef(a,b,c){if(ff(a,b)>c||b.F().zb())return!1;switch(b.type){case 4:return a.K||-1!=gf.indexOf(b)?a=!1:b.K?(a=b.I(),a=a.zb()?!(a.G&&a.G.I()):!1):a=!0,a;case 2:if(b.isConnected()&&!b.I().zb()||a.isConnected())return!1;break;case 1:if(b.isConnected()&&!b.I().$a()&&!b.I().S)return!1;break;case 3:if(b.isConnected()&&!a.F().C&&!b.I().S&&b.I().C)return!1;break;default:return!1}return-1!=gf.indexOf(b)?!1:!0}C(Nc,"default",function(){});function hf(a){this.ea=Object.create(null);this.j=a}g=hf.prototype;g.clear=function(){this.ea=Object.create(null)};g.Qf=function(a,b){var c=this.yf(a);if(!c)throw Error("Tried to rename a variable that didn't exist. ID: "+a);var d=this.Mi(b,c.type);a=jf(this.j);F(!0);try{if(d&&d.Ya()!=c.Ya()){var e=c.type;b!=d.name&&kf(d,b,a);for(b=0;b<a.length;b++){var f,h=a[b];for(d=0;f=h.A[d];d++)for(var k=0;f.ga[k];k++);}E(new (H("var_delete"))(c));this.ea[e].splice(this.Ni(e).indexOf(c),1)}else kf(c,b,a)}finally{F(!1)}};
function kf(a,b,c){E(new (H("var_rename"))(a,b));a.name=b;for(a=0;a<c.length;a++)for(var d=c[a],e=0;b=d.A[e];e++)for(var f=0;b.ga[f];f++);}
g.Ed=function(a,b,c){var d=this.Mi(a,b);if(d){if(c&&d.Ya()!=c)throw Error('Variable "'+a+'" is already in use and its id is "'+d.Ya()+'" which conflicts with the passed in id, "'+c+'".');return d}if(c&&this.yf(c))throw Error('Variable id, "'+c+'", is already in use.');b=b||"";d=new lf(this.j,a,b,c||fb());a=this.ea[b]||[];a.push(d);delete this.ea[b];this.ea[b]=a;return d};
g.rf=function(a){var b=this.yf(a);if(b){var c=b.name,d=this.Wk(a);a=0;for(var e;e=d[a];a++)if("procedures_defnoreturn"==e.type||"procedures_defreturn"==e.type){a=mf(e,"NAME");c=q.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",c).replace("%2",a);nf(c);return}var f=this;1<d.length?(c=q.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",c),of(c,function(h){h&&b&&pf(f,b,d)})):pf(f,b,d)}else console.warn("Can't delete non-existent variable: "+a)};
function pf(a,b,c){var d=Zc;d||F(!0);try{for(var e=0;e<c.length;e++)c[e].m(!0);var f=a.ea[b.type];a=0;for(var h;h=f[a];a++)if(h.Ya()==b.Ya()){f.splice(a,1);E(new (H("var_delete"))(b));break}}finally{d||F(!1)}}g.Mi=function(a,b){if(b=this.ea[b||""])for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a.toLowerCase())return d;return null};g.yf=function(a){for(var b=Object.keys(this.ea),c=0;c<b.length;c++)for(var d=b[c],e=0,f;f=this.ea[d][e];e++)if(f.Ya()==a)return f;return null};
g.Ni=function(a){return(a=this.ea[a||""])?a.slice():[]};g.uf=function(){var a=[],b;for(b in this.ea)a=a.concat(this.ea[b]);return a};g.Wk=function(a){for(var b=[],c=jf(this.j),d=0;d<c.length;d++){var e=Ed(c[d]);if(e)for(var f=0;f<e.length;f++)e[f].Ya()==a&&b.push(c[d])}return b};function vd(a){this.id=fb();ed[this.id]=this;this.options=a||new je({});this.s=!!this.options.s;this.Cb=this.options.Cb;new (Yc(Nc,this.options,!0))(this);this.Gh=[];this.Jj=[];Object.create(null);this.Ja=[];this.Qe=[];this.oh=[];this.fk=Object.create(null);this.xd=Object.create(null);this.ea=new hf(this);this.qj=null}g=vd.prototype;g.L=!1;g.il=!1;g.Lm=1024;g.yi=null;g.m=function(){this.Ja.length=0;this.clear();delete ed[this.id]};
g.Rc=function(a,b){a=a.aa();b=b.aa();return a.y+vd.prototype.Rc.offset*a.x-(b.y+vd.prototype.Rc.offset*b.x)};g.ji=function(a){this.Gh.push(a)};g.tj=function(a){if(!lb(this.Gh,a))throw Error("Block not present in workspace's list of top-most blocks.");};g.sa=function(a){var b=[].concat(this.Gh);a&&1<b.length&&(this.Rc.offset=Math.sin(3*Math.PI/180),this.s&&(this.Rc.offset*=-1),b.sort(this.Rc));return b};function qf(a,b){return a.xd[b]?a.xd[b].slice(0):[]}
function jf(a){var b=a.sa(!1);for(a=0;a<b.length;a++)b.push.apply(b,od(b[a],!1));return b.filter(function(c){return!c.zb()})}g.clear=function(){this.il=!0;try{var a=Zc;for(a||F(!0);this.Gh.length;)this.Gh[0].m(!1);for(;this.Jj.length;)this.Jj[this.Jj.length-1].m(!1);a||F(!1);this.ea.clear();this.qj&&this.qj.clear()}finally{this.il=!1}};g.Qf=function(a,b){this.ea.Qf(a,b)};g.Ed=function(a,b,c){return this.ea.Ed(a,b,c)};g.Wk=function(a){return this.ea.Wk(a)};g.rf=function(a){this.ea.rf(a)};
g.Mi=function(a,b){return this.ea.Mi(a,b)};g.yf=function(a){return this.ea.yf(a)};g.Ni=function(a){return this.ea.Ni(a)};g.uf=function(){return this.ea.uf()};g.Hd=function(){return 0};g.Lf=function(a,b){return new rf(this,a,b)};function sf(a,b){if(!tf(a))return!0;var c=0,d;for(d in b){if(b[d]>(a.options.dj?(void 0!==a.options.dj[d]?a.options.dj[d]:Infinity)-qf(a,d).length:Infinity))return!1;c+=b[d]}return c>(isNaN(a.options.Zg)?Infinity:a.options.Zg-jf(a).length)?!1:!0}
function tf(a){return Infinity!=a.options.Zg||!!a.options.dj}function uf(a,b){var c=b?a.oh:a.Qe;a=b?a.Qe:a.oh;var d=c.pop();if(d){for(var e=[d];c.length&&d.group&&d.group==c[c.length-1].group;)e.push(c.pop());for(c=0;d=e[c];c++)a.push(d);e=dd(e,b);$c=!1;try{for(c=0;d=e[c];c++)d.run(b)}finally{$c=!0}}}function vf(a,b){a.Ja.push(b)}g.Jb=function(a){return this.fk[a]||null};g.nm=function(a){this.ea=a};var ed=Object.create(null);function wf(){var a=[],b;for(b in ed)a.push(ed[b]);return a};function xf(a){this.wg=a;this.ya()}g=xf.prototype;g.ka=null;g.wg=null;g.ya=function(){this.ka||(this.ka=x(dc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyWsDragSurface blocklyOverflowVisible"},null),this.wg.appendChild(this.ka))};g.Pe=function(a,b){a=a.toFixed(0);b=b.toFixed(0);this.ka.style.display="block";mc(this.ka,"translate3d("+a+"px, "+b+"px, 0px)")};g.Uk=function(){return Xa(this.ka)};
g.oi=function(a){if(!a)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var b=this.ka.childNodes[0],c=this.ka.childNodes[1];if(!(b&&c&&kc(b,"blocklyBlockCanvas")&&kc(c,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");null!=this.Zl?lc(b,this.Zl):a.insertBefore(b,a.firstChild);lc(c,b);this.ka.style.display="none";if(this.ka.childNodes.length)throw Error("Drag surface was not cleared.");mc(this.ka,"");this.Zl=null};function yf(a,b,c){if(!b)throw Error("Cannot create a node without a location.");this.Jh=a;this.O=b;this.mp=null;(a=c||null)&&a.lp&&(this.mp=a.lp)}var zf=!1;function Af(a){return a?new yf("field",a):null}function Bf(a){if(!a)return null;var b=a.type;return 1==b||3==b&&a.Gc()?Cf(a.Gc()):3==b?new yf("next",a):2==b?new yf("output",a):4==b?new yf("previous",a):null}function Cf(a){return a&&a.connection?new yf("input",a.connection):null}function Df(a){return a?new yf("block",a):null}
function Ef(a){return a?new yf("stack",a):null}g=yf.prototype;g.getType=function(){return this.Jh};function Ff(a,b){a=a.O;a instanceof rf||(a=a.F());if(!a||!a.j)return null;var c=a.tc();a=c.j.sa(!0);for(var d=0,e;e=a[d];d++)if(c.id==e.id)return b=d+(b?1:-1),-1==b||b==a.length?null:Ef(a[b]);throw Error("Couldn't find "+(b?"next":"previous")+" stack?!");}function Gf(a){if(!a)return null;do var b=a.G&&a.G.I();while(b&&ob(b)==a&&(a=b));return(b=a.G||a.u)&&b.K&&b.K.Gc()?Cf(b.K.Gc()):Ef(a)}
g.F=function(){return"block"===this.getType()?this.O:"stack"===this.getType()?this.O:"workspace"===this.getType()?null:this.O.F()};
g.next=function(){switch(this.Jh){case "stack":return Ff(this,!0);case "output":var a=this.O;return Df(a.F());case "field":a:{var b=this.O,c=b.Gc();a=b.F();b=c.ga.indexOf(b)+1;c=a.A.indexOf(c);for(var d;d=a.A[c];c++){for(var e=d.ga;b<e.length;){if(Hf(e[b])||zf){a=Af(e[b]);break a}b++}b=0;if(d.connection){a=Cf(d);break a}}a=null}return a;case "input":a:{b=this.O.Gc();a=b.F();for(b=a.A.indexOf(b)+1;c=a.A[b];b++){d=c.ga;e=0;for(var f;f=d[e];e++)if(Hf(f)||zf){a=Af(f);break a}if(c.connection){a=Cf(c);
break a}}a=null}return a;case "block":return Bf(this.O.C);case "previous":return a=this.O,Df(a.F());case "next":return a=this.O,Bf(a.K)}return null};g.Kd=function(){switch(this.Jh){case "workspace":var a=this.O.sa(!0);if(0<a.length)return Ef(a[0]);break;case "stack":a=this.O;var b=a.G||a.u;return b?Bf(b):Df(a);case "block":a=this.O;a:{a=a.A;b=0;for(var c;c=a[b];b++){for(var d=c.ga,e=0,f;f=d[e];e++)if(Hf(f)||zf){a=Af(f);break a}if(c.connection){a=Cf(c);break a}}a=null}return a;case "input":return Bf(this.O.K)}return null};
g.pd=function(){switch(this.Jh){case "stack":return Ff(this,!1);case "field":a:{var a=this.O;var b=a.Gc();var c=a.F();a=b.ga.indexOf(a)-1;for(var d=c.A.indexOf(b),e;e=c.A[d];d--){if(e.connection&&e!==b){b=Cf(e);break a}for(e=e.ga;-1<a;){if(Hf(e[a])||zf){b=Af(e[a]);break a}a--}0<=d-1&&(a=c.A[d-1].ga.length-1)}b=null}return b;case "input":a:{b=this.O.Gc();c=b.F();for(a=c.A.indexOf(b);d=c.A[a];a--){if(d.connection&&d!==b){b=Cf(d);break a}d=d.ga;e=d.length-1;for(var f;f=d[e];e--)if(Hf(f)||zf){b=Af(f);
break a}}b=null}return b;case "block":return b=this.O,Bf(b.G||b.u);case "previous":b=this.O;if((b=b.K)&&!b.Gc())return Bf(b);break;case "next":return b=this.O,Df(b.F())}return null};
g.Sd=function(){switch(this.Jh){case "stack":var a=this.O,b=a.aa();a=a.j;return(b=new r(b.x,b.y+-20),a)?new yf("workspace",a,{lp:b}):null;case "output":return b=this.O,(a=b.K)?Bf(a):Ef(b.F());case "field":return Df(this.O.F());case "input":return b=this.O,Df(b.F());case "block":return a=this.O,Gf(a);case "previous":return b=this.O,Gf(b.F());case "next":return b=this.O,Gf(b.F())}return null};var If=Object.create(null);var Jf=Object.create(null);function Kf(a,b){if("string"!=typeof a||""==a.trim())throw Error('Error: Invalid extension name "'+a+'"');if(Jf[a])throw Error('Error: Extension "'+a+'" is already registered.');if("function"!=typeof b)throw Error('Error: Extension "'+a+'" must be a function');Jf[a]=b}
function Lf(a,b,c){var d=Jf[a];if("function"!=typeof d)throw Error('Error: Extension "'+a+'" not found.');if(c){if(Mf(b).length)throw Error('Error: tried to apply mutation "'+a+'" to a block that already has mutator functions.  Block id: '+b.id);}else var e=Mf(b);d.apply(b);if(c){a='Error after applying mutator "'+a+'": ';if("function"!=typeof b.cd)throw Error(a+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof b.$b)throw Error(a+'Applying a mutator didn\'t add "mutationToDom"');
Nf(b,a)}else{a:if(c=e,b=Mf(b),b.length!=c.length)b=!1;else{for(d=0;d<b.length;d++)if(c[d]!=b[d]){b=!1;break a}b=!0}if(!b)throw Error('Error when applying extension "'+a+'": mutation properties changed when applying a non-mutator extension.');}}function Of(a,b,c){if(!b)throw Error(a+'missing required property "'+c+'"');if("function"!=typeof b)throw Error(a+'" required property "'+c+'" must be a function');}
function Nf(a,b){var c=void 0!==a.sg,d=void 0!==a.Cg;if(c&&d){if("function"!=typeof a.sg)throw Error(b+"compose must be a function.");if("function"!=typeof a.Cg)throw Error(b+"decompose must be a function.");return!0}if(!c&&!d)return!1;throw Error(b+'Must have both or neither of "compose" and "decompose"');}function Mf(a){var b=[];void 0!==a.cd&&b.push(a.cd);void 0!==a.$b&&b.push(a.$b);void 0!==a.sg&&b.push(a.sg);void 0!==a.Cg&&b.push(a.Cg);return b}
function Pf(a){var b=[];"object"==typeof document&&kb(function(){for(var c in a)for(var d=a[c],e=q,f=d.match(/%{BKY_[A-Z]\w*}/ig),h=0;h<f.length;h++)void 0==e[f[h].toUpperCase().slice(6,-1)]&&console.warn("No message string for "+f[h]+" in "+d)});return function(){this.type&&-1==b.indexOf(this.type)&&(Qf(this,a),b.push(this.type));this.Ke(function(){var c=String(mf(this,"OP")),d=a[c];null==d?-1==b.indexOf(this.type)&&(c="No tooltip mapping for value "+c+" of field OP",null!=this.type&&(c+=" of block type "+
this.type),console.warn(c+".")):d=db(d);return d}.bind(this))}}function Qf(a,b){var c=Dd(a,"OP");if(!Rf(c)){c=Sf(c);for(var d=0;d<c.length;++d){var e=c[d][1];null==b[e]&&console.warn("No tooltip mapping for value "+e+" of field OP of block type "+a.type)}}}Kf("parent_tooltip_when_inline",function(){this.Er=this.fc;this.Ke(function(){var a=this.getParent();return a&&Tf(a)&&a.fc||this.Er}.bind(this))});function Uf(a){var b=Xc(Qc,a.type);return b?b.N(a):(console.warn("Blockly could not create a field of type "+a.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)};var Vf=0,Wf=null;function Xf(a,b,c,d){var e=(new Date-c)/150;1<e?A(a):(a.setAttribute("transform","translate("+(a.Gr+(b?-1:1)*a.an.width*d/2*e)+","+(a.Hr+a.an.height*d*e)+") scale("+(1-e)*d+")"),setTimeout(Xf,10,a,b,c,d))}function Yf(a,b,c){var d=(new Date-b)/150;1<d?A(a):(a.setAttribute("r",25*d*c),a.style.opacity=1-d,Vf=setTimeout(Yf,10,a,b,c))}
function Zf(a,b,c){var d=(new Date-c)/200;1<d?a.zh="":(a.zh="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*b)+")",Wf=a,Vf=setTimeout(Zf,10,a,b,c));a.setAttribute("transform",a.Ih+a.zh)}function $f(){if(Wf){clearTimeout(Vf);var a=Wf;a.zh="";a.setAttribute("transform",a.Ih);Wf=null}};function ag(a,b,c){ag.i.constructor.call(this,a?a.j.id:void 0);this.$=a?a.id:null;this.Vn=b;this.dn=c}I(ag,Qd);ag.prototype.type="drag";ag.prototype.R=function(){var a=ag.i.R.call(this);a.isStart=this.Vn;a.blockId=this.$;a.blocks=this.dn;return a};ag.prototype.N=function(a){ag.i.N.call(this,a);this.Vn=a.isStart;this.$=a.blockId;this.dn=a.blocks};C(Pc,"drag",ag);function bg(a){this.ce=M=a;this.g=a.j;this.Md=this.ll=null;this.Jg=cg(this,this.ce);this.qb=this.Ea=null;this.yc=!1;this.Ig=this.$k=this.xe=null;this.ki=dg(this)}bg.prototype.m=function(){this.ki.length=0;D++;try{this.Jg&&this.Jg.m(),this.Md&&this.Md.m()}finally{D--}};
bg.prototype.update=function(a,b){var c=28;for(var d=null,e=null,f=0;f<this.ki.length;f++){var h=this.ki[f],k=h.closest(c,a);k.connection&&(d=k.connection,e=h,c=k.rj)}c={closest:d,local:e,rj:c};if((this.yc=this.om(c,b))||eg(this,c,a)){D++;c.closest?(a=this.Ea!=c.closest,b=this.qb!=c.local,this.Ea&&this.qb&&(a||b||this.yc)&&fg(this)):fg(this);this.qb=this.Ea=this.xe=null;if(!this.yc&&(a=c.closest,b=c.local,a))if(a==this.Ea||a.F().zb())console.log("Trying to connect to an insertion marker");else{this.Ea=
a;this.qb=b;a=this.Ea;b=this.qb;c=this.ce;2==b.type||4==b.type?((d=!a.isConnected())||(d=a.I(),d=!!$e(c,2===b.type?d.u:d.G)),b=d?0:2):b=0;switch(b){case 1:this.$k=this.Ea.F();break;case 0:d=this.qb;b=this.Ea;c=this.ll&&d==this.ll?this.Md:this.Jg;d=c.Tk(d.F(),d);if(d==this.xe)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");c.V();c.L=!0;c.J().setAttribute("visibility","visible");d&&b&&(3!=d.type&&1!=d.type||c.moveBy(b.x-d.x,b.y-d.y));b&&d.connect(b);this.xe=d;break;
case 2:this.Ig=this.Ea.I(),gg(this.Ig.wa,"blocklyReplaceable",!0)}a&&(c=a.o.j.pa.D(),b=hg(c,a),1==a.type||2==a.type?(c=c.ff,b=N(0,-c)+O("v",c)+b.bc+O("v",c)):(c=c.hg-c.na,b=N(-c,0)+O("h",c)+b.Ud+O("h",c)),c=a.o.aa(),Ze.On=x($b,{"class":"blocklyHighlightedConnectionPath",d:b,transform:"translate("+(a.x-c.x)+","+(a.y-c.y)+")"+(a.o.s?" scale(-1 1)":"")},a.o.J()))}D--}};
function cg(a,b){var c=b.type;D++;try{var d=a.g.Lf(c);d.So(!0);if(b.$b){var e=b.$b();e&&d.cd(e)}for(a=0;a<b.A.length;a++){var f=b.A[a];if("_TEMP_COLLAPSED_INPUT"!=f.name){var h=d.A[a];if(!h)throw Error("The insertion marker manager tried to create a marker but the result is missing an input. If you are using a mutator, make sure your domToMutation method is properly defined.");for(c=0;c<f.ga.length;c++){var k=f.ga[c],l=h.ga[c];if(!l)throw Error("The insertion marker manager tried to create a marker but the result is missing a field. If you are using a mutator, make sure your domToMutation method is properly defined.");
Hd(l,k.Ga)}}}d.He(b.isCollapsed());d.Je(Tf(b));d.hd();d.J().setAttribute("visibility","hidden")}finally{D--}return d}function dg(a){var b=a.ce.qc(!1),c=a.ce.Yi(!0);if(c&&c!=a.ce.C){b.push(c);a.ll=c;if(a.Md){D++;try{a.Md.m()}finally{D--}}a.Md=cg(a,c.F())}return b}
function eg(a,b,c){var d=b.local,e=b.closest;b=b.rj;if(d&&e){if(a.qb&&a.Ea){if(a.Ea==e&&a.qb==d)return!1;d=a.qb.x+c.x-a.Ea.x;a=a.qb.y+c.y-a.Ea.y;a=Math.sqrt(d*d+a*a);return!(e&&b>a-8)}if(a.qb||a.Ea)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!a.qb||!a.Ea);console.error("Returning true from shouldUpdatePreviews, but it's not clear why.");return!0}bg.prototype.om=function(a,b){return b&&Hb(this.g.$c,b.id)?ig(b,this.ce,a&&!!a.closest):!1};
function fg(a){a.Ea&&a.Ea.I()&&(A(Ze.On),delete Ze.On);if(a.Ig)gg(a.Ig.wa,"blocklyReplaceable",!1),a.Ig=null;else if(a.$k)a.$k=null;else if(a.xe)if(a.xe){var b=a.xe,c=b.F(),d=c.C,e=c.G,f=c.u;f=1==b.type&&!(f&&f.K);!(b!=d||e&&e.K)||f?Od(b.I(),!1):3==b.type&&b!=d?(d=b.K,Od(d.F(),!1),e=e?e.K:null,Od(c,!0),e&&e.connect(d)):Od(c,!0);if(b.K)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");a.xe=null;(a=c.J())&&a.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")}
bg.prototype.wf=function(){var a=[];this.Jg&&a.push(this.Jg);this.Md&&a.push(this.Md);return a};function jg(a,b){this.oa=a;this.g=b;this.Fc=new bg(this.oa);this.Pa=null;this.yc=!1;this.ud=this.oa.aa();b=[];a=nb(a,!1);for(var c=0,d;d=a[c];c++){d=kg(d);for(var e=0;e<d.length;e++)b.push({location:d[e].Qi,icon:d[e]})}this.Fi=b}g=jg.prototype;g.m=function(){this.Fi.length=0;this.Fc&&this.Fc.m()};
g.Ah=function(a,b){Zc||F(!0);var c=new (H("drag"))(this.oa,!0,nb(this.oa,!1));E(c);this.g.Vg&&lg(this.oa);nc();this.g.eb(!1);$f();if(this.oa.getParent()||b&&this.oa.C&&this.oa.C.I())Od(this.oa,b),a=this.Nf(a),a=va(this.ud,a),this.oa.translate(a.x,a.y),a=this.oa,a.j.Rb.play("disconnect"),1>a.j.scale||(b=mg(a).height,b=Math.atan(10/b)/Math.PI*180,a.s||(b*=-1),Zf(a.J(),b,new Date)),a=this.Fc,a.ki=dg(a);this.oa.Yd(!0);a=this.oa;a.Mh&&(b=a.aa(),a.J().removeAttribute("transform"),a.j.Db.Pe(b.x,b.y),(b=
a.J())&&Xd(a.j.Db,b))};g.dd=function(a,b){b=this.Nf(b);this.oa.Cl(va(this.ud,b));for(var c=0;c<this.Fi.length;c++){var d=this.Fi[c];ng(d.icon,va(d.location,b))}c=this.Pa;this.Pa=og(this.g,a);this.Fc.update(b,this.Pa);a=this.yc;this.yc=this.Fc.yc;a!=this.yc&&this.oa.im(this.yc);this.Pa!==c&&c&&c.Il();this.Pa&&this.Pa.Jl()};
g.Gg=function(a,b){this.dd(a,b);this.Fi=[];a=new (H("drag"))(this.oa,!1,nb(this.oa,!1));E(a);oc();$f();b=this.Nf(b);a=va(this.ud,b);var c=this.oa;c.Mh&&(c.translate(a.x,a.y),c.j.Db.oi(c.j.ua));this.Pa&&this.Pa.Kl();this.yc?(pg(this),this.oa.m(!1,!0),gf=[],a=!0):a=!1;if(!a)if(this.oa.Yd(!1),b){qg(this.oa,b.x,b.y);pg(this);if(this.Fc.Ea){if(b=this.Fc,b.Ea&&(D++,fg(b),D--,b.qb.connect(b.Ea),b.ce.L)){c=(af(b.qb)?b.Ea:b.qb).F();var d=c.j;a=d.scale;d.Rb.play("click");if(!(1>a)){var e=rg(d,c.J());c.u?(e.x+=
(c.s?3:-3)*a,e.y+=13*a):c.G&&(e.x+=(c.s?-23:23)*a,e.y+=3*a);c=x(Pb,{cx:e.x,cy:e.y,r:0,fill:"none",stroke:"#888","stroke-width":10},B(d));Yf(c,new Date,a)}lg(b.ce.tc())}}else this.oa.V();sg(this.oa)}else tg(this.oa.j,this.g.sb.Gd(!0),this.oa);this.g.eb(!0);F(!1)};function pg(a){var b=new (H("move"))(a.oa);b.Fl=a.ud;Md(b);E(b)}g.Nf=function(a){a=new r(a.x/this.g.scale,a.y/this.g.scale);this.g.Vg&&a.scale(1/this.g.options.bb.scale);return a};g.wf=function(){return this.Fc&&this.Fc.wf?this.Fc.wf():[]};
C(Wc,"default",jg);function ug(a,b,c,d){var e=null,f=null;this.g=a;this.xg=b;this.qr=c;this.Ol=this.Nl=this.Bl=this.Po=null;this.Vb=!1;c=vg;this.g.s&&(c=-c);this.cq=c*Math.PI/180;a.vd.appendChild(this.qk(b,!(!e||!f)));this.Da=d;this.dm&&wg(this);e&&f||(a=this.xg.getBBox(),e=a.width+2*xg,f=a.height+2*xg);yg(this,e,f);wg(this);zg(this);this.dm=!0}var xg=6,vg=20,Ag=null,Bg=null;function Cg(){Ag&&(v(Ag),Ag=null);Bg&&(v(Bg),Bg=null)}function Dg(){rb=null;Cg()}g=ug.prototype;g.dm=!1;g.Da=null;g.Oc=0;g.Wd=0;g.ma=0;g.ob=0;
g.ek=!0;
g.qk=function(a,b){this.Sb=x(Xb,{},null);var c={filter:"url(#"+this.g.pa.D().Gi+")"};Ja&&(c={});c=x(Xb,c,this.Sb);this.fn=x($b,{},c);this.mi=x(cc,{"class":"blocklyDraggable",x:0,y:0,rx:xg,ry:xg},c);b?(this.rd=x(Xb,{"class":this.g.s?"blocklyResizeSW":"blocklyResizeSE"},this.Sb),b=2*xg,x(bc,{points:"0,x x,x x,0".replace(/x/g,b.toString())},this.rd),x(Zb,{"class":"blocklyResizeLine",x1:b/3,y1:b-1,x2:b-1,y2:b/3},this.rd),x(Zb,{"class":"blocklyResizeLine",x1:2*b/3,y1:b-1,x2:b-1,y2:2*b/3},this.rd)):this.rd=
null;this.g.options.readOnly||(this.Nl=u(this.mi,"mousedown",this,this.gq),this.rd&&(this.Ol=u(this.rd,"mousedown",this,this.jr)));this.Sb.appendChild(a);return this.Sb};g.J=function(){return this.Sb};function Eg(a,b){a.Sb.dataset&&(a.Sb.dataset.blockId=b)}g.gq=function(a){var b=this.g.Fd(a);if(b){if(b.oe)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");b.Ob||(b.Ob=this);b.Zb=a}};g.yh=function(){};g.Lc=function(){return!1};g.im=function(){};
g.jr=function(a){var b=this.Sb.parentNode;b.lastChild!==this.Sb&&b.appendChild(this.Sb);Cg();ab(a)||(this.g.Ah(a,new r(this.g.s?-this.ma:this.ma,this.ob)),Ag=u(document,"mouseup",this,Dg),Bg=u(document,"mousemove",this,this.kr),Ge());a.stopPropagation()};g.kr=function(a){this.ek=!1;var b=this.g;a=bb(a,B(b),De(b));a.x/=b.scale;a.y/=b.scale;b=va(b.un,a);yg(this,this.g.s?-b.x:b.x,b.y);this.g.s&&wg(this)};
function Fg(a,b,c){var d=a.g.s?a.Da.x-b.x-a.ma:b.x+a.Da.x;b=b.y+a.Da.y;return Math.max(0,Math.min(1,(Math.min(d+a.ma,c.left+c.width)-Math.max(d,c.left))*(Math.min(b+a.ob,c.top+c.height)-Math.max(b,c.top))/(a.ma*a.ob)))}function wg(a){var b=a.Da.x;b=a.g.s?b-(a.Oc+a.ma):b+a.Oc;a.moveTo(b,a.Wd+a.Da.y)}g.moveTo=function(a,b){this.Sb.setAttribute("transform","translate("+a+","+b+")")};g.Yd=function(a){!a&&this.Bl&&this.Bl()};
function yg(a,b,c){var d=2*xg;b=Math.max(b,d+45);c=Math.max(c,d+20);a.ma=b;a.ob=c;a.mi.setAttribute("width",b);a.mi.setAttribute("height",c);a.rd&&(a.g.s?a.rd.setAttribute("transform","translate("+2*xg+","+(c-d)+") scale(-1 1)"):a.rd.setAttribute("transform","translate("+(b-d)+","+(c-d)+")"));if(a.ek){b=Gg(a.g.sb,!0);c=-a.ma/4;if(!(a.ma>b.width)){if(a.g.s){d=a.Da.x-c;var e=d-a.ma;var f=b.left+b.width,h=b.left+me/a.g.scale}else e=c+a.Da.x,d=e+a.ma,h=b.left,f=b.left+b.width-me/a.g.scale;a.g.s?e<h?c=
-(h-a.Da.x+a.ma):d>f&&(c=-(f-a.Da.x)):e<h?c=h-a.Da.x:d>f&&(c=f-a.Da.x-a.ma)}e=c;c=-a.ob/4;if(!(a.ob>b.height)){d=a.Da.y+c;f=d+a.ob;h=b.top;var k=b.top+b.height-me/a.g.scale,l=a.Da.y;d<h?c=h-l:f>k&&(c=k-l-a.ob)}h=c;f=a.qr.getBBox();c={x:e,y:-a.ob-a.g.pa.D().gg};d={x:-a.ma-30,y:h};h={x:f.width,y:h};k={x:e,y:f.height};e=f.width<f.height?h:k;f=f.width<f.height?k:h;h=Fg(a,c,b);k=Fg(a,d,b);l=Fg(a,e,b);b=Math.max(h,k,l,Fg(a,f,b));h==b?(a.Oc=c.x,a.Wd=c.y):k==b?(a.Oc=d.x,a.Wd=d.y):l==b?(a.Oc=e.x,a.Wd=e.y):
(a.Oc=f.x,a.Wd=f.y)}wg(a);zg(a);a.Po&&a.Po()}
function zg(a){var b=[],c=a.ma/2,d=a.ob/2,e=-a.Oc,f=-a.Wd;if(c==e&&d==f)b.push("M "+c+","+d);else{f-=d;e-=c;a.g.s&&(e*=-1);var h=Math.sqrt(f*f+e*e),k=Math.acos(e/h);0>f&&(k=2*Math.PI-k);var l=k+Math.PI/2;l>2*Math.PI&&(l-=2*Math.PI);var m=Math.sin(l),p=Math.cos(l),t=new Da(a.ma,a.ob);l=(t.width+t.height)/5;l=Math.min(l,t.width,t.height)/4;t=1-8/h;e=c+t*e;f=d+t*f;t=c+l*p;var y=d+l*m;c-=l*p;d-=l*m;m=k+a.cq;m>2*Math.PI&&(m-=2*Math.PI);k=Math.sin(m)*h/4;h=Math.cos(m)*h/4;b.push("M"+t+","+y);b.push("C"+
(t+h)+","+(y+k)+" "+e+","+f+" "+e+","+f);b.push("C"+e+","+f+" "+(c+h)+","+(d+k)+" "+c+","+d)}b.push("z");a.fn.setAttribute("d",b.join(" "))}g.Sf=function(a){this.mi.setAttribute("fill",a);this.fn.setAttribute("fill",a)};g.m=function(){this.Nl&&v(this.Nl);this.Ol&&v(this.Ol);Cg();A(this.Sb);this.Vb=!0};g.Cl=function(a,b){a?a.Pe(b.x,b.y):this.moveTo(b.x,b.y);this.Oc=this.g.s?this.Da.x-b.x-this.ma:b.x-this.Da.x;this.Wd=b.y-this.Da.y;zg(this)};
g.aa=function(){return new r(this.g.s?-this.Oc+this.Da.x-this.ma:this.Da.x+this.Oc,this.Da.y+this.Wd)};function Hg(a,b){this.vb=a;this.g=b;this.Pa=null;this.Oh=!1;this.ud=this.vb.aa();this.le=ib()&&b.Db?b.Db:null}Hg.prototype.m=function(){this.le=this.g=this.vb=null};function Ig(a,b,c){c=a.Nf(c);a.vb.Cl(a.le,va(a.ud,c));c=a.Pa;a.Pa=og(a.g,b);b=a.Oh;a.Oh=a.om(a.Pa);b!=a.Oh&&a.vb.im(a.Oh);a.Pa!==c&&c&&c.Il();a.Pa&&a.Pa.Jl()}Hg.prototype.om=function(a){return a&&Hb(this.g.$c,a.id)?ig(a,this.vb,!1):!1};
function Jg(a,b,c){Ig(a,b,c);b=a.Nf(c);b=va(a.ud,b);a.vb.moveTo(b.x,b.y);a.Pa&&a.Pa.Kl();a.Oh?a.vb.m(!1,!0):(a.le&&a.le.oi(a.g.vd),a.vb.Yd&&a.vb.Yd(!1));a.g.eb(!0);F(!1)}Hg.prototype.Nf=function(a){a=new r(a.x/this.g.scale,a.y/this.g.scale);this.g.Vg&&a.scale(1/this.g.options.bb.scale);return a};function Kg(a,b,c){Kg.i.constructor.call(this,a?a.j.id:b);this.$=a?a.id:null;this.Yo=c}I(Kg,Qd);Kg.prototype.type="click";Kg.prototype.R=function(){var a=Kg.i.R.call(this);a.targetType=this.Yo;this.$&&(a.blockId=this.$);return a};Kg.prototype.N=function(a){Kg.i.N.call(this,a);this.Yo=a.targetType;this.$=a.blockId};C(Pc,"click",Kg);function Lg(a){this.g=a;this.Pn=Mg(this.g);this.hp=Ng(this.g);this.zr=new r(a.scrollX,a.scrollY)}Lg.prototype.m=function(){this.g=null};Lg.prototype.Ah=function(){M&&Og(M);Ee(this.g)};Lg.prototype.Gg=function(a){this.dd(a);Fe(this.g)};Lg.prototype.dd=function(a){a=va(this.zr,a);if(this.Pn&&this.hp)this.g.scroll(a.x,a.y);else if(this.Pn)this.g.scroll(a.x,this.g.scrollY);else if(this.hp)this.g.scroll(this.g.scrollX,a.y);else throw new TypeError("Invalid state.");};function Pg(a,b){this.jo=null;this.kb=new r(0,0);this.Fa=this.Ta=this.Vf=this.Wf=this.Ob=null;this.rk=b;this.Tg=this.ue=this.Ug=this.ne=!1;this.Zb=a;this.P=this.Ve=this.Ac=this.yd=this.nj=this.mj=null;this.Ln=this.Ti=this.oe=this.gn=!1}g=Pg.prototype;g.m=function(){rb=null;Ie=!1;this.rk.Xa=null;this.mj&&v(this.mj);this.nj&&v(this.nj);this.Ac&&this.Ac.m();this.Ve&&this.Ve.m();this.yd&&this.yd.m()};
function Qg(a,b){a.kb=ua(new r(b.clientX,b.clientY),a.jo);if(a.ne)var c=!1;else c=a.kb,a.ne=Math.sqrt(c.x*c.x+c.y*c.y)>(a.P?10:5),c=a.ne;if(c){if(a.gn)throw Error("updateIsDragging_ should only be called once per gesture.");a.gn=!0;a.Ob?(a.Tg=!0,a.yd=new Hg(a.Ob,a.Fa),c=a.yd,Zc||F(!0),c.g.eb(!1),c.vb.ek=!1,c.le&&(c.vb.moveTo(0,0),c.le.Pe(c.ud.x,c.ud.y),Xd(c.le,c.vb.J())),c.vb.Yd&&c.vb.Yd(!0),Ig(a.yd,a.Zb,a.kb),c=!0):c=!1;if(!c){if(a.Ta){if(a.P){if(a.Ta&&a.Ta.isEnabled()){if(!(c=!Rg(a.P))){c=a.kb;
c=Math.atan2(c.y,c.x)/Math.PI*180;var d=a.P.qq;c=c<d&&c>-d||c<-180+d||c>180-d?!0:!1}c?(a.Fa=a.P.T,Sg(a.Fa),Zc||F(!0),a.Vf=null,a.Ta=Tg(a.P,a.Ta),a.Ta.select(),c=!0):c=!1}else c=!1;a.ue=c}else a.Ta.$a()&&(a.ue=!0);a.ue?(a.Ac=new (Yc(Wc,a.rk.options,!0))(a.Ta,a.Fa),a.Ac.Ah(a.kb,a.Ln),a.Ac.dd(a.Zb,a.kb),c=!0):c=!1}else c=!1;if(c=!c)if(a.P)c=Rg(a.P);else if(c=a.Fa)c=a.Fa,c=c.options.ab&&c.options.ab.dd;c&&(a.Ve=new Lg(a.Fa),a.Ug=!0,a.Ve.Ah())}vb()}a.Zb=b}
g.Ak=function(a){Wa(a)?this.cancel():(this.oe=!0,$f(),Sg(this.Fa),this.Fa.Vg&&this.Fa.resize(),Ge(!!this.P),Kc(this.Fa),this.Zb=a,We(),Ie=!0,this.Ta&&this.Ta.select(),ab(a)?wb(this,a):("touchstart"!=a.type.toLowerCase()&&"pointerdown"!=a.type.toLowerCase()||"mouse"==a.pointerType||ub(a,this),this.jo=new r(a.clientX,a.clientY),this.Ln=a.altKey||a.ctrlKey||a.metaKey,this.cn(a)))};
g.cn=function(a){this.mj=u(document,"mousemove",null,this.Af.bind(this));this.nj=u(document,"mouseup",null,this.Oi.bind(this));a.preventDefault();a.stopPropagation()};g.Af=function(a){Qg(this,a);this.Ug?this.Ve.dd(this.kb):this.ue?this.Ac.dd(this.Zb,this.kb):this.Tg&&Ig(this.yd,this.Zb,this.kb);a.preventDefault();a.stopPropagation()};
g.Oi=function(a){Qg(this,a);vb();if(this.Ti)console.log("Trying to end a gesture recursively.");else{this.Ti=!0;if(this.Tg)Jg(this.yd,a,this.kb);else if(this.ue)this.Ac.Gg(a,this.kb);else if(this.Ug)this.Ve.Gg(this.kb);else if(this.Ob&&!this.ne)this.Ob.nr&&this.Ob.nr(),this.Ob.select&&this.Ob.select();else if(Ug(this)){var b=this.Wf,c=this.Zb;Hf(b)&&b.Le(c);Vg(this)}else!this.Vf||this.ne||Ug(this)?this.Vf||this.Ob||this.Wf||this.ne||(b=this.rk,M&&Og(M),b=this.Fa||b,E(new (H("click"))(null,b.id,"workspace"))):
(this.P&&this.P.ie?this.Ta.isEnabled()&&(Zc||F(!0),sg(Tg(this.P,this.Ta))):(b=new (H("click"))(this.Vf,this.Fa.id,"block"),E(b)),Vg(this),F(!1));a.preventDefault();a.stopPropagation();this.m()}};g.cancel=function(){this.Ti||(vb(),this.Tg?Jg(this.yd,this.Zb,this.kb):this.ue?this.Ac.Gg(this.Zb,this.kb):this.Ug&&this.Ve.Gg(this.kb),this.m())};function wb(a,b){a.Ta?(Vg(a),Ge(!!a.P),a.Ta.yh(b)):a.Ob?a.Ob.yh(b):a.Fa&&!a.P&&(Ge(),a.Fa.yh(b));b.preventDefault();b.stopPropagation();a.m()}
function Wg(a,b,c){if(a.oe)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");a.Fa||(a.Fa=c);a.Zb=b;a.Ak(b)}function Xg(a,b,c){if(a.oe)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");a.P||(a.P=c);Wg(a,b,c.g)}function Vg(a){a.Ta&&!a.P&&lg(a.Ta)}function Yg(a,b){a.Vf||a.Ob||(a.Vf=b,b.Za&&b!=b.tc()?Zg(a,b.tc()):Zg(a,b))}function Zg(a,b){b.S?Zg(a,b.getParent()):a.Ta=b}
function Ug(a){return(a.Wf?Hf(a.Wf):!1)&&!a.ne&&(!a.P||!a.P.ie)}g.Ra=function(){return this.Ug||this.ue||this.Tg};g.wf=function(){return this.Ac?this.Ac.wf():[]};function $g(){for(var a=wf(),b=0,c;c=a[b];b++)if(c.Xa)return!0;return!1};function ah(){this.Wb=this.Gb=this.nk=null;this.type="marker"}function bh(a,b){var c=a.Gb;a.Gb=b;a.Wb&&a.Wb.nc(c,a.Gb)}ah.prototype.nc=function(){this.Wb&&this.Wb.nc(this.Gb,this.Gb)};ah.prototype.wb=function(){this.Wb&&this.Wb.wb()};ah.prototype.m=function(){this.Wb&&this.Wb.m()};function ch(){ch.i.constructor.call(this);this.type="cursor"}I(ch,ah);ch.prototype.next=function(){var a=this.Gb;if(!a)return null;for(a=a.next();a&&a.next()&&("next"==a.getType()||"block"==a.getType());)a=a.next();a&&bh(this,a);return a};ch.prototype.Kd=function(){var a=this.Gb;if(!a)return null;if("previous"==a.getType()||"output"==a.getType())a=a.next();(a=a.Kd())&&bh(this,a);return a};
ch.prototype.pd=function(){var a=this.Gb;if(!a)return null;for(a=a.pd();a&&a.pd()&&("next"==a.getType()||"block"==a.getType());)a=a.pd();a&&bh(this,a);return a};ch.prototype.Sd=function(){var a=this.Gb;if(!a)return null;(a=a.Sd())&&"block"==a.getType()&&(a=a.pd()||a);a&&bh(this,a);return a};C(Oc,"default",ch);function dh(a){this.bd=this.Ub=null;this.Yg=Object.create(null);this.g=a}g=dh.prototype;g.vf=function(){return this.Ub};g.Ng=function(a){return this.Yg[a]||null};g.sd=function(a){a?(this.g.ua.appendChild(a),this.bd=a):this.bd=null};g.Zd=function(a){a?this.g.ua&&(this.bd?this.g.ua.insertBefore(a,this.bd):this.g.ua.appendChild(a)):this.od=null};
g.m=function(){for(var a=Object.keys(this.Yg),b=0,c;c=a[b];b++){var d=this.Yg[c];if(d)d.m(),delete this.Yg[c];else throw Error("Marker with ID "+c+" does not exist. Can only unregister markers that exist.");}this.Yg=null;this.Ub&&(this.Ub.m(),this.Ub=null)};var eh,fh=null,gh=null,hh="",ih="";function jh(a,b,c){kh();fh=a;gh=c;a=eh;a.style.direction=b?"rtl":"ltr";a.style.display="block";b=Ec;hh=b.pa.pc();ih=b.ed().pc();z(a,hh);z(a,ih)}function kh(){if(fh){fh=null;var a=eh;a.style.display="none";a.style.left="";a.style.top="";gh&&gh();gh=null;a.textContent="";hh&&(jc(a,hh),hh="");ih&&(jc(a,ih),ih="");Kc(Ec)}}function lh(a,b,c){eh.style.left=a+"px";eh.style.top=b+"px";eh.style.height=c+"px"};function mh(a,b,c){this.Ga=this.dg;this.$o=this.fp=null;this.Bb=new Da(0,0);this.h=this.Al=this.Oe=this.Ua=this.za=this.Ib=this.od=this.bd=null;c&&this.ad(c);Hd(this,a);b&&(this.fp=b)}g=mh.prototype;g.dg=null;g.name=void 0;g.Vb=!1;g.io=50;g.o=null;g.kd=!0;g.fe=!0;g.mk=null;g.Vh=!0;g.kg=!1;g.ad=function(a){var b=a.tooltip;"string"==typeof b&&(b=db(a.tooltip));b&&this.Ke(b)};g.D=function(){!this.h&&this.o&&this.o.j&&this.o.j.L&&(this.h=this.o.j.pa.D());return this.h};g.F=function(){return this.o};
g.X=function(){this.Ib||(this.Ib=x(Xb,{},null),this.isVisible()||(this.Ib.style.display="none"),this.o.J().appendChild(this.Ib),this.Df(),this.Re(),this.Ke(this.$o),Re(nh(this)),this.Al=u(nh(this),"mousedown",this,this.Rd))};g.Df=function(){oh(this);ph(this)};function oh(a){a.za=x(cc,{rx:a.D().Wh,ry:a.D().Wh,x:0,y:0,height:a.Bb.height,width:a.Bb.width,"class":"blocklyFieldRect"},a.Ib)}
function ph(a){a.Ua=x(ec,{"class":"blocklyText"},a.Ib);a.D().Oj&&a.Ua.setAttribute("dominant-baseline","central");a.Oe=document.createTextNode("");a.Ua.appendChild(a.Oe)}g.Qk=function(a){Hd(this,a.textContent)};g.m=function(){vc===this&&Ic();fh==this&&kh();Ve(nh(this));this.Al&&v(this.Al);A(this.Ib);this.Vb=!0};
g.Re=function(){var a=this.Ib;this.Vh&&a&&(this.o.yb()?(z(a,"blocklyEditableText"),jc(a,"blocklyNonEditableText"),a.style.cursor=this.zm):(z(a,"blocklyNonEditableText"),jc(a,"blocklyEditableText"),a.style.cursor=""))};function Hf(a){return!!a.o&&a.o.yb()&&!!a.Le&&"function"===typeof a.Le}g.isVisible=function(){return this.fe};g.ta=function(a){if(this.fe!=a){this.fe=a;var b=this.J();b&&(b.style.display=a?"block":"none")}};g.J=function(){return this.Ib};g.Ha=function(){};
g.Ee=function(){this.Oe&&(this.Oe.nodeValue=qh(this));var a=this.D(),b=this.za?this.D().eg:0,c=2*b,d=a.Xh,e=0;this.Ua&&(e=pc(this.Ua,a.Xe+"pt",a.Ye,a.We),c+=e);this.za&&(d=Math.max(d,a.Dm));this.Bb.height=d;this.Bb.width=c;rh(this,b,e);sh(this)};function rh(a,b,c){if(a.Ua){var d=a.D(),e=a.Bb.height/2;a.Ua.setAttribute("x",a.o.s?a.Bb.width-c-b:b);a.Ua.setAttribute("y",d.Oj?e:e-d.Xh/2+d.Gm)}}
function sh(a){a.za&&(a.za.setAttribute("width",a.Bb.width),a.za.setAttribute("height",a.Bb.height),a.za.setAttribute("rx",a.D().Wh),a.za.setAttribute("ry",a.D().Wh))}g.Og=function(){if(!this.isVisible())return new Da(0,0);this.kd?(this.Ee(),this.kd=!1):this.fe&&0==this.Bb.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.Ee());return this.Bb};
function Dc(a){if(a.za)b=a.za.getBoundingClientRect(),a=Ga(a.za),d=b.width,b=b.height;else{var b=mg(a.o),c=a.o.j.scale;a=Ga(nh(a));var d=b.width*c;b=b.height*c;La?(a.x+=1.5*c,a.y+=1.5*c):Ia||Ha||(a.x-=.5*c,a.y-=.5*c);d+=1*c;b+=1*c}return new wa(a.y,a.y+b,a.x,a.x+d)}function qh(a){var b=th(a);if(!b)return"\u00a0";b.length>a.io&&(b=b.substring(0,a.io-2)+"\u2026");b=b.replace(/\s/g,"\u00a0");a.o&&a.o.s&&(b+="\u200f");return b}
function th(a){if(a.Vk){var b=a.Vk.call(a);if(null!==b)return String(b)}return String(a.Ga)}g.Xg=function(){this.kd=!0;this.h=null};function uh(a){a.kd=!0;a.o&&a.o.L&&(a.o.V(),a.o.Ma(),a.vm())}function Hd(a,b){if(null!==b){var c=a.tf(b);b=vh(a,b,c);if(!(b instanceof Error)){if(c=a.fp)if(c=c.call(a,b),b=vh(a,b,c),b instanceof Error)return;c=a.o;if(!c||!c.Vb){var d=a.Ga;d===b?a.Eg(b):(c&&0==D&&E(new (H("change"))(c,"field",a.name||null,d,b)),a.Eg(b),a.kd&&uh(a))}}}}
function vh(a,b,c){if(null===c)return a.tn(),a.kd&&uh(a),Error();void 0!==c&&(b=c);return b}g.tf=function(a){return null===a||void 0===a?null:a};g.Eg=function(a){this.Ga=a;this.kd=!0};g.tn=function(){};g.Rd=function(a){if(this.o&&this.o.j&&(a=this.o.j.Fd(a))){if(a.oe)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");a.Wf||(a.Wf=this)}};g.Ke=function(a){a||""===a||(a=this.o);var b=nh(this);b?b.fc=a:this.$o=a};function nh(a){return a.mk||a.J()}
g.Gc=function(){for(var a=null,b=this.o,c=b.A,d=0;d<b.A.length;d++)for(var e=c[d],f=e.ga,h=0;h<f.length;h++)if(f[h]===this){a=e;break}return a};g.Wn=function(){return!1};g.sd=function(a){a?(this.Ib.appendChild(a),this.bd=a):this.bd=null};g.Zd=function(a){a?(this.Ib.appendChild(a),this.od=a):this.od=null};g.vm=function(){var a=this.o.j;a.Kf&&this.bd&&a.vf().nc();a.Kf&&this.od&&a.Ng("local_marker_1").nc()};function wh(a,b,c){this.ni=null;wh.i.constructor.call(this,a,null,c);c||(this.ni=b||null)}I(wh,mh);wh.prototype.dg="";wh.N=function(a){var b=db(a.text);return new wh(b,void 0,a)};wh.prototype.Vh=!1;wh.prototype.ad=function(a){wh.i.ad.call(this,a);this.ni=a["class"]};wh.prototype.Df=function(){ph(this);this.ni&&z(this.Ua,this.ni)};wh.prototype.tf=function(a){return null===a||void 0===a?null:String(a)};C(Qc,"field_label",wh);function xh(a,b,c,d){if(5!=a&&!b)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=a;this.name=b;this.o=c;this.connection=d;this.ga=[]}g=xh.prototype;g.align=-1;g.fe=!0;g.F=function(){return this.o};function yh(a,b,c){zh(a,a.ga.length,b,c)}
function zh(a,b,c,d){if(0>b||b>a.ga.length)throw Error("index "+b+" out of bounds.");if(!(c||""==c&&d))return b;"string"==typeof c&&(c=Uf({type:"field_label",text:c}));if(c.o)throw Error("Field already bound to a block.");c.o=a.o;a.o.L&&(c.X(),c.Ha());c.name=d;c.ta(a.isVisible());c.Yl&&(b=zh(a,b,c.Yl));a.ga.splice(b,0,c);++b;c.rm&&(b=zh(a,b,c.rm));a.o.L&&(a.o=a.o,a.o.V(),a.o.Ma());return b}g.isVisible=function(){return this.fe};
g.ta=function(a){if(this.fe!=a){this.fe=a;for(var b=0,c;c=this.ga[b];b++)c.ta(a);if(this.connection){this.connection=this.connection;if(a)Ah(this.connection);else if(b=this.connection,Bh(b,!1),b.K)for(b=nb(b.I(),!1),c=0;c<b.length;c++){for(var d=b[c],e=d.qc(!0),f=0;f<e.length;f++)Bh(e[f],!1);d=kg(d);for(f=0;f<d.length;f++)d[f].ta(!1)}if(b=this.connection.I())b.J().style.display=a?"block":"none"}}};g.Xg=function(){for(var a=0,b;b=this.ga[a];a++)b.Xg()};
g.Ge=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.Ge(a);return this};g.wh=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.wh(a)};g.xf=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.xf()};g.X=function(){if(this.o.j.L)for(var a=0;a<this.ga.length;a++)this.ga[a].X()};
g.m=function(){for(var a=0,b;b=this.ga[a];a++)b.m();this.connection&&this.connection.m();this.o=null};function rf(a,b,c){if(Ch&&"undefined"!=typeof Ch.prototype[b])throw Error('Block prototypeName "'+b+'" conflicts with Blockly.Generator members.');this.id=c&&!a.Jb(c)?c:fb();a.fk[this.id]=this;this.G=this.C=this.u=null;this.A=[];this.jd=void 0;this.disabled=!1;this.fc="";this.contextMenu=!0;this.Nc=null;this.Yc=[];this.wn=this.lo=this.wk=!0;this.je=this.S=!1;this.mc={text:null,Fo:!1,size:new Da(160,80)};this.np=new r(0,0);this.j=a;this.Za=a.Ld;this.s=a.s;this.Hf=!1;this.Hc=void 0;this.L=null;if(b){this.type=
b;c=If[b];if(!c||"object"!=typeof c)throw TypeError("Unknown block type: "+b);jd(this,c)}a.ji(this);a.xd[this.type]||(a.xd[this.type]=[]);a.xd[this.type].push(this);(a=Zc)||F(!0);b=$c;try{"function"==typeof this.X&&($c=!1,this.X(),$c=b),0==D&&E(new (H("create"))(this))}finally{a||F(!1),$c=b}this.Lq=this.jd;if("function"==typeof this.onchange){if((a=this.onchange)&&"function"!=typeof a)throw Error("onchange must be a function.");this.hh&&lb(this.j.Ja,this.hh);if(this.onchange=a)this.hh=a.bind(this),
vf(this.j,this.hh)}}g=rf.prototype;g.data=null;g.Vb=!1;g.Tb="#000000";g.Me="";
g.m=function(a){if(this.j){this.hh&&lb(this.j.Ja,this.hh);Od(this,a);0==D&&E(new (H("delete"))(this));D++;try{if(this.j){this.j.tj(this);var b=this.j;b.xd[this.type].splice(b.xd[this.type].indexOf(this),1);b.xd[this.type].length||delete b.xd[this.type];delete this.j.fk[this.id];this.j=null}M==this&&(M=null);for(var c=this.Yc.length-1;0<=c;c--)this.Yc[c].m(!1);c=0;for(var d;d=this.A[c];c++)d.m();this.A.length=0;var e=this.qc(!0);c=0;for(var f;f=e[c];c++)f.m()}finally{D--,this.Vb=!0}}};
function Od(a,b){if(a.u){var c=null;a.u.isConnected()&&(c=a.u.K,a.u.disconnect());if(c&&b){a:{b=null;for(var d=0;d<a.A.length;d++){var e=a.A[d].connection;if(e&&1==e.type&&e.K){if(b){a=null;break a}b=e}}a=b}a&&a.isConnected()&&!a.I().S&&(a=a.K,a.disconnect(),0==bf(a,c,!1)?c.connect(a):a.Ll(c))}}else a.G&&(c=null,a.G.isConnected()&&(c=a.G.K,a.G.disconnect()),d=ob(a),b&&d&&!d.S&&(a=a.C.K,a.disconnect(),c&&0==bf(c,a,!1)&&c.connect(a)))}
g.qc=function(){var a=[];this.u&&a.push(this.u);this.G&&a.push(this.G);this.C&&a.push(this.C);for(var b=0,c;c=this.A[b];b++)c.connection&&a.push(c.connection);return a};g.Yi=function(a){for(var b=this.C;b;){var c=b.I();if(!c||a&&c.S)return b;b=c.C}return null};g.Ma=function(){};g.getParent=function(){return this.Nc};function Nd(a,b){for(var c=0,d;d=a.A[c];c++)if(d.connection&&d.connection.I()==b)return d;return null}
function Dh(a){do{var b=a;a=a.getParent();if(!a)return null}while(ob(a)==b);return a}function ob(a){return a.C&&a.C.I()}g.tc=function(){var a=this;do{var b=a;a=b.Nc}while(a);return b};function od(a,b){if(!b)return a.Yc;b=[];for(var c=0,d;d=a.A[c];c++)d.connection&&(d=d.connection.I())&&b.push(d);(a=ob(a))&&b.push(a);return b}
g.Aj=function(a){if(a!=this.Nc){if(this.Nc){lb(this.Nc.Yc,this);if(this.G&&this.G.isConnected())throw Error("Still connected to previous block.");if(this.u&&this.u.isConnected())throw Error("Still connected to parent block.");this.Nc=null}else this.j.tj(this);(this.Nc=a)?a.Yc.push(this):this.j.ji(this)}};function nb(a,b){var c=[a];a=od(a,b);for(var d,e=0;d=a[e];e++)c.push.apply(c,nb(d,b));return c}g.Lc=function(){return this.wk&&!this.S&&!(this.j&&this.j.options.readOnly)};
g.$a=function(){return this.lo&&!this.S&&!(this.j&&this.j.options.readOnly)};g.xj=function(a){this.lo=a};g.mm=function(a){this.S=a};g.zb=function(){return this.Hf};g.So=function(a){this.Hf=a};g.yb=function(){return this.wn&&!(this.j&&this.j.options.readOnly)};g.jm=function(a){this.wn=a;a=0;for(var b;b=this.A[a];a++)for(var c=0,d;d=b.ga[c];c++)d.Re()};
g.Tk=function(a,b){var c=this.qc(!0);a=a.qc(!0);if(c.length!=a.length)throw Error("Connection lists did not match in length.");for(var d=0;d<a.length;d++)if(a[d]==b)return c[d];return null};g.Ke=function(a){this.fc=a};g.Sk=function(){return this.Tb};g.Sf=function(a){this.Tb=pb(a).Qg};g.td=function(a){this.Me=a};
function Dd(a,b){if("string"!==typeof b)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===b?"nothing":b+" of type "+typeof b)+" instead");for(var c=0,d;d=a.A[c];c++)for(var e=0,f;f=d.ga[e];e++)if(f.name===b)return f;return null}function Ed(a){for(var b=0,c;c=a.A[b];b++)for(var d=0;c.ga[d];d++);return[]}function mf(a,b){return(a=Dd(a,b))?a.Ga:null}
g.Bj=function(a,b){if(a){void 0===b&&(b=null);if(!this.G){if(this.u)throw Error("Remove output connection prior to adding previous connection.");this.G=this.Wg(4)}this.G.Ge(b)}else if(this.G){if(this.G.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.G.m();this.G=null}};
g.yj=function(a,b){if(a)void 0===b&&(b=null),this.C||(this.C=this.Wg(3)),this.C.Ge(b);else if(this.C){if(this.C.isConnected())throw Error("Must disconnect next statement before removing connection.");this.C.m();this.C=null}};
g.km=function(a,b){if(a){void 0===b&&(b=null);if(!this.u){if(this.G)throw Error("Remove previous connection prior to adding output connection.");this.u=this.Wg(2)}this.u.Ge(b)}else if(this.u){if(this.u.isConnected())throw Error("Must disconnect output value before removing connection.");this.u.m();this.u=null}};g.Je=function(a){this.jd!=a&&(E(new (H("change"))(this,"inline",null,this.jd,a)),this.jd=a)};
function Tf(a){if(void 0!=a.jd)return a.jd;for(var b=1;b<a.A.length;b++)if(5==a.A[b-1].type&&5==a.A[b].type)return!1;for(b=1;b<a.A.length;b++)if(1==a.A[b-1].type&&5==a.A[b].type)return!0;return!1}g.isEnabled=function(){return!this.disabled};g.Qc=function(a){this.isEnabled()!=a&&(E(new (H("change"))(this,"disabled",null,this.disabled,!a)),this.disabled=!a)};function Eh(a){for(a=Dh(a);a;){if(a.disabled)return!0;a=Dh(a)}return!1}g.isCollapsed=function(){return this.je};
g.He=function(a){this.je!=a&&(E(new (H("change"))(this,"collapsed",null,this.je,a)),this.je=a)};
g.toString=function(a,b){function c(m){var p=m.mf;!p&&m.K&&(p=m.K.mf);return!!p&&(-1!=p.indexOf("Boolean")||-1!=p.indexOf("Number"))}function d(){h&&h.getType()==k.getType()&&h.O==k.O&&(h=null)}var e=[];b=b||"?";var f=zf;zf=!0;for(var h=Df(this),k=h;h;){switch(h.getType()){case "input":var l=h.O;h.Kd()?c(l)&&e.push("("):e.push(b);break;case "field":l=h.O,"_TEMP_COLLAPSED_FIELD"!=l.name&&e.push(th(l))}l=h;h=l.Kd()||l.next();if(!h){h=l.Sd();for(d();h&&!h.next();)h=h.Sd(),d(),h&&"input"==h.getType()&&
c(h.O)&&e.push(")");h&&(h=h.next())}}zf=f;for(b=2;b<e.length;b++)"("==e[b-2]&&")"==e[b]&&(e[b-2]=e[b-1],e.splice(b-1,2));e=e.reduce(function(m,p){return m+("("==m.substr(-1)||")"==p?"":" ")+p},"");e=e.trim()||"???";a&&e.length>a&&(e=e.substring(0,a-3)+"...");return e};function Fh(a,b){var c=[],d;for(d in b)void 0!==a[d]&&c.push(d);if(c.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(c));jd(a,b)}
function Gh(a,b){var c=Uf(b);return!c&&b.alt?"string"==typeof b.alt?(b=Hh(b.alt))?Gh(a,b):null:Gh(a,b.alt):c}function Ih(a){return"input_value"==a||"input_statement"==a||"input_dummy"==a}function Hh(a){return(a=a.trim())?{type:"field_label",text:a}:null}g.Vc=function(a,b){var c=null;if(1==a||3==a)c=this.Wg(a);a=new xh(a,b,this,c);this.A.push(a);return a};
g.Pf=function(a,b){for(var c=0,d;d=this.A[c];c++)if(d.name==a)return d.m(),this.A.splice(c,1),!0;if(b)return!1;throw Error("Input not found: "+a);};function L(a,b){for(var c=0,d;d=a.A[c];c++)if(d.name==b)return d;return null}function Jh(a,b){return(a=L(a,b))&&a.connection&&a.connection.I()}g.Tf=function(a){this.mc.text!=a&&(E(new (H("change"))(this,"comment",null,this.mc.text,a)),this.mc.text=a)};g.To=function(){};g.aa=function(){return this.np};
g.moveBy=function(a,b){if(this.Nc)throw Error("Block has parent.");var c=new (H("move"))(this);this.np.translate(a,b);Md(c);E(c)};g.Wg=function(a){return new Ze(this,a)};function Kh(){this.vc=[];this.Fe=this.Qa=this.jj=this.gj=this.fj=this.pi=this.hj=this.pe=this.Ql=null}g=Kh.prototype;
g.V=function(a){var b=document.createElement("div");b.className="blocklyMenu goog-menu blocklyNonSelectable";b.tabIndex=0;this.Fe&&b.setAttribute("role",this.Fe);this.Qa=b;for(var c=0,d;d=this.vc[c];c++)b.appendChild(d.ya());this.hj=u(b,"mouseover",this,this.Eq,!0);this.pi=u(b,"click",this,this.zq,!0);this.fj=u(b,"mouseenter",this,this.Cq,!0);this.gj=u(b,"mouseleave",this,this.Dq,!0);this.jj=u(b,"keydown",this,this.Aq);a.appendChild(b)};
g.focus=function(){var a=this.Qa;a&&(a.focus({preventScroll:!0}),z(a,"blocklyFocused"))};g.vh=function(a){this.Fe=a};g.m=function(){this.hj&&(v(this.hj),this.hj=null);this.pi&&(v(this.pi),this.pi=null);this.fj&&(v(this.fj),this.fj=null);this.gj&&(v(this.gj),this.gj=null);this.jj&&(v(this.jj),this.jj=null);for(var a=0,b;b=this.vc[a];a++)b.m();this.Qa=null};
function Lh(a,b){for(var c=a.Qa;b&&b!=c;){if(kc(b,"blocklyMenuItem"))for(var d=0,e;e=a.vc[d];d++)if(e.Qa==b)return e;b=b.parentElement}return null}
g.wc=function(a){var b=this.pe;b&&(b.wc(!1),this.pe=null);if(a){a.wc(!0);this.pe=a;b=this.Qa;var c=a.Qa,d=Ga(c),e=Ga(b);var f=Fa(b,"borderLeftWidth");Fa(b,"borderRightWidth");var h=Fa(b,"borderTopWidth");Fa(b,"borderBottomWidth");f=d.x-e.x-parseFloat(f);d=d.y-e.y-parseFloat(h);c=new Da(c.offsetWidth,c.offsetHeight);e=b.clientHeight-c.height;h=b.scrollLeft;var k=b.scrollTop;h+=Math.min(f,Math.max(f-(b.clientWidth-c.width),0));k+=Math.min(d,Math.max(d-e,0));f=new r(h,k);b.scrollLeft=f.x;b.scrollTop=
f.y;Ye(b,"activedescendant",a.Ya())}};function Mh(a,b,c){b+=c;for(var d;d=a.vc[b];){if(d.isEnabled()){a.wc(d);break}b+=c}}g.Eq=function(a){(a=Lh(this,a.target))&&(a.isEnabled()?this.pe!=a&&this.wc(a):this.wc(null))};g.zq=function(a){var b=this.Ql;this.Ql=null;b&&"number"==typeof a.clientX&&1>ta(b,new r(a.clientX,a.clientY))||(a=Lh(this,a.target))&&a.isEnabled()&&a.ng&&a.ng(a)};g.Cq=function(){this.focus()};g.Dq=function(){if(this.Qa){var a=this.Qa;a&&(a.blur(),jc(a,"blocklyFocused"));this.wc(null)}};
g.Aq=function(a){if(this.vc.length&&!(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)){var b=this.pe;switch(a.keyCode){case 13:case 32:b&&b.isEnabled()&&b.ng&&b.ng(b);break;case 38:b=this.vc.indexOf(this.pe);Mh(this,0>b?this.vc.length:b,-1);break;case 40:Mh(this,this.vc.indexOf(this.pe),1);break;case 33:case 36:Mh(this,-1,1);break;case 34:case 35:Mh(this,this.vc.length,-1);break;default:return}a.preventDefault();a.stopPropagation()}};g.Og=function(){var a=this.Qa,b=Ea(a);b.height=a.scrollHeight;return b};var Nh=0;function Oh(a,b){this.xg=a;this.Ga=b;this.Hi=!0;this.Qa=null;this.fm=!1;this.Fe=null;this.Nn=this.lk=this.kk=!1;this.ng=null}g=Oh.prototype;
g.ya=function(){var a=document.createElement("div");a.id="blockly-"+(Nh++).toString(36);this.Qa=a;a.className="blocklyMenuItem goog-menuitem "+(this.Hi?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.lk?"blocklyMenuItemSelected goog-option-selected ":"")+(this.Nn?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.fm?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var b=document.createElement("div");b.className="blocklyMenuItemContent goog-menuitem-content";if(this.kk){var c=document.createElement("div");
c.className="blocklyMenuItemCheckbox goog-menuitem-checkbox";b.appendChild(c)}c=this.xg;"string"==typeof this.xg&&(c=document.createTextNode(this.xg));b.appendChild(c);a.appendChild(b);this.Fe&&a.setAttribute("role",this.Fe);Ye(a,"selected",this.kk&&this.lk||!1);Ye(a,"disabled",!this.Hi);return a};g.m=function(){this.Qa=null};g.Ya=function(){return this.Qa.id};g.vh=function(a){this.Fe=a};
g.wc=function(a){this.Nn=a;var b=this.Qa;b&&this.isEnabled()&&(a?(z(b,"blocklyMenuItemHighlight"),z(b,"goog-menuitem-highlight")):(jc(b,"blocklyMenuItemHighlight"),jc(b,"goog-menuitem-highlight")))};g.isEnabled=function(){return this.Hi};g.Qc=function(a){this.Hi=a};function Ph(a,b,c){a.ng=b.bind(c)};var P={zi:null,rb:null,show:function(a,b,c){jh(P,c,P.m);if(b.length){var d=P.dr(b,c);P.rb=d;P.er(d,a,c);setTimeout(function(){d.focus()},1);P.zi=null}else P.wb()},dr:function(a,b){var c=new Kh;c.vh("menu");for(var d=0,e;e=a[d];d++){var f=new Oh(e.text);f.fm=b;f.vh("menuitem");c.vc.push(f);f.Qc(e.enabled);e.enabled&&Ph(f,function(){P.wb();this.va(this.scope)},e)}return c},er:function(a,b,c){var d=document.body;var e=document.documentElement;d=new r(d.scrollLeft||e.scrollLeft,d.scrollTop||e.scrollTop);
d=new wa(d.y,document.documentElement.clientHeight+d.y,d.x,document.documentElement.clientWidth+d.x);var f=new wa(b.clientY+d.top,b.clientY+d.top,b.clientX+d.left,b.clientX+d.left);P.mq(a);b=a.Og();c&&(f.left+=b.width,f.right+=b.width,d.left+=b.width,d.right+=b.width);e=f.bottom+b.height>=d.bottom?f.top-b.height:f.bottom;c?(c=Math.max(f.right-b.width,d.left),c=Math.min(c,d.right-b.width)):(c=Math.min(f.left,d.right-b.width),c=Math.max(c,d.left));0>e?lh(c,0,b.height+e):lh(c,e,b.height);a.focus()},
mq:function(a){a.V(eh);var b=a.Qa;z(b,"blocklyContextMenu");u(b,"contextmenu",null,Va);a.focus()},wb:function(){fh==P&&kh();P.zi=null},m:function(){P.rb&&(P.rb.m(),P.rb=null)},os:function(a,b){return function(){D++;try{var c=ud(b,a.j),d=a.aa();d.x=a.s?d.x-28:d.x+28;d.y+=56;c.moveBy(d.x,d.y)}finally{D--}0==D&&!c.S&&E(new (H("create"))(c));c.select()}}};function Qh(){Rh=this;this.cc=Object.create(null)}var Rh=null;Qh.prototype.register=function(a){if(this.cc[a.id])throw Error('Menu item with ID "'+a.id+'" is already registered.');this.cc[a.id]=a};Qh.prototype.unregister=function(a){if(!this.cc[a])throw Error('Menu item with ID "'+a+'" not found.');delete this.cc[a]};Qh.prototype.getItem=function(a){return this.cc[a]||null};
function Sh(a,b){var c=[],d=Rh.cc;Object.keys(d).forEach(function(e){e=d[e];if(a==e.Nb){var f=e.Ba(b);"hidden"!=f&&(e={text:"function"==typeof e.lb?e.lb(b):e.lb,enabled:"enabled"==f,va:e.va,scope:b,weight:e.weight},c.push(e))}});c.sort(function(e,f){return e.weight-f.weight});return c}new Qh;function Th(a,b,c){Th.i.constructor.call(this,c);this.po=a;this.no=b}I(Th,Qd);Th.prototype.type="selected";Th.prototype.R=function(){var a=Th.i.R.call(this);a.oldElementId=this.po;a.newElementId=this.no;return a};Th.prototype.N=function(a){Th.i.N.call(this,a);this.po=a.oldElementId;this.no=a.newElementId};C(Pc,"selected",Th);function Uh(a,b){Uh.i.constructor.call(this,a,b);this.Dc=a.j.yi[b];this.mn=a.j.yi[ma[b]];this.Ce=new r(0,0);this.wd=Vh;this.K=null}I(Uh,Ze);var Vh=-1;g=Uh.prototype;g.m=function(){Uh.i.m.call(this);1==this.wd&&Wh(this.Dc,this,this.y)};g.F=function(){return Uh.i.F.call(this)};g.I=function(){return Uh.i.I.call(this)};function ff(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}
function Xh(a,b){if(!a.o.j.Ra()){var c=a.o.tc();if(!c.Za){var d=!1;if(!c.$a()){c=b.F().tc();if(!c.$a())return;b=a;d=!0}var e=M==c;e||c.ii();var f=b.x+28+Math.floor(10*Math.random())-a.x,h=b.y+28+Math.floor(10*Math.random())-a.y;d&&(h=-h);c.s&&(f=b.x-28-Math.floor(10*Math.random())-a.x);c.moveBy(f,h);e||c.ph()}}}
g.moveTo=function(a,b){if(this.wd==Vh){var c=this.Dc;c.Aa.splice(Yh(c,b),0,this);this.wd=1}else 1==this.wd&&(Wh(this.Dc,this,this.y),c=this.Dc,c.Aa.splice(Yh(c,b),0,this));this.x=a;this.y=b};g.moveBy=function(a,b){this.moveTo(this.x+a,this.y+b)};function Zh(a,b){a.moveTo(b.x+a.Ce.x,b.y+a.Ce.y)}function $h(a,b,c){a.Ce.x=b;a.Ce.y=c}
function ai(a){var b=a.K.x-a.x,c=a.K.y-a.y;if(0!=b||0!=c){a=a.I();var d=a.J();if(!d)throw Error("block is not rendered.");d=Xa(d);a.J().setAttribute("transform","translate("+(d.x-b)+","+(d.y-c)+")");qg(a,-b,-c)}}
g.closest=function(a,b){var c=this.mn;if(c.Aa.length){var d=this.y,e=this.x;this.x=e+b.x;this.y=d+b.y;var f=Yh(c,this.y);b=null;for(var h=a,k,l=f-1;0<=l&&Math.abs(c.Aa[l].y-this.y)<=a;)k=c.Aa[l],0==bf(this,k,!0,h)&&(b=k,h=ff(k,this)),l--;for(;f<c.Aa.length&&Math.abs(c.Aa[f].y-this.y)<=a;)k=c.Aa[f],0==bf(this,k,!0,h)&&(b=k,h=ff(k,this)),f++;this.x=e;this.y=d;a={connection:b,rj:h}}else a={connection:null,rj:a};return a};
function Bh(a,b){b&&1==a.wd||!b&&0==a.wd||a.o.Za||(b?(b=a.Dc,b.Aa.splice(Yh(b,a.y),0,a),a.wd=1):(1==a.wd&&Wh(a.Dc,a,a.y),a.wd=0))}function Ah(a){Bh(a,!0);var b=[];if(1!=a.type&&3!=a.type)return b;if(a=a.I()){if(a.isCollapsed()){var c=[];a.u&&c.push(a.u);a.C&&c.push(a.C);a.G&&c.push(a.G)}else c=a.qc(!0);for(var d=0;d<c.length;d++)b.push.apply(b,Ah(c[d]));b.length||(b[0]=a)}return b}
g.Ll=function(a){var b=this.F();if($c){var c=Zc;setTimeout(function(){b.Vb||b.getParent()||(F(c),Xh(this,a),F(!1))}.bind(this),250)}};g.zk=function(a,b){Uh.i.zk.call(this,a,b);a.L&&a.V();b.L&&(yd(b),b.V(),b.J().style.display="block")};g.qh=function(){Uh.i.qh.call(this);var a=this.I();a&&(a.hd(),a.V(!1),a=this.F(),a.L&&a.V())};g.mo=function(a){return bi(this.mn,this,a)};
g.wi=function(a){Uh.i.wi.call(this,a);var b=this.F();a=a.F();var c=b.L,d=a.L;c&&yd(b);d&&yd(a);c&&d&&(3==this.type||4==this.type?a.V():b.V());if(b=Nd(b,a))b=b.isVisible(),a.J().style.display=b?"block":"none"};g.xo=function(){!this.isConnected()||this.K&&0==bf(this,this.K,!1)||(Od(af(this)?this.I():this.o),this.o.Ma())};function ci(){ci.i.constructor.call(this)}I(ci,ch);g=ci.prototype;g.next=function(){var a=this.Gb;if(!a)return null;(a=di(this,a,this.wm))&&bh(this,a);return a};g.Kd=function(){return this.next()};g.pd=function(){var a=this.Gb;if(!a)return null;(a=ei(this,a,this.wm))&&bh(this,a);return a};g.Sd=function(){return this.pd()};function di(a,b,c){if(!b)return null;var d=b.Kd()||b.next();if(c(d))return d;if(d)return di(a,d,c);b=fi(a,b.Sd());return c(b)?b:b?di(a,b,c):null}
function ei(a,b,c){if(!b)return null;var d=b.pd();d=d?gi(a,d):b.Sd();return c(d)?d:d?ei(a,d,c):null}g.wm=function(a){var b=!1;a=a&&a.getType();if("output"==a||"input"==a||"field"==a||"next"==a||"previous"==a||"workspace"==a)b=!0;return b};function fi(a,b){if(!b)return null;var c=b.next();return c?c:fi(a,b.Sd())}function gi(a,b){if(!b.Kd())return b;for(b=b.Kd();b.next();)b=b.next();return gi(a,b)}C(Oc,"basicCursor",ci);function hi(){hi.i.constructor.call(this)}I(hi,ci);hi.prototype.wm=function(a){var b=!1,c=a&&a.getType();a&&(a=a.O,"field"==c&&a&&a.Wn()&&Hf(a)&&(b=!0));return b};function Q(a,b,c){this.v=x(Xb,{},null);this.v.Ih="";this.style=ii(a.pa.D(),null);this.wa=a.pa.co(this.v,this.style);this.cm=this.L=!1;this.j=a;this.G=this.C=this.u=null;this.Mh=ib()&&!!a.Db;var d=this.wa.Ca;d.fc=this;Re(d);Q.i.constructor.call(this,a,b,c);this.v.dataset?this.v.dataset.id=this.id:Ha&&this.v.setAttribute("data-id",this.id)}I(Q,rf);g=Q.prototype;g.height=0;g.width=0;g.Mj=null;
g.hd=function(){if(!this.j.L)throw TypeError("Workspace is headless.");for(var a=0,b;b=this.A[a];a++)b.X();b=kg(this);for(a=0;a<b.length;a++)ji(b[a]);this.Ha();gg(this.wa,"blocklyDraggable",this.$a());a=this.J();this.j.options.readOnly||this.rq||!a||u(a,"mousedown",this,this.Rd);this.rq=!0;a.parentNode||this.j.ua.appendChild(a)};
g.select=function(){if(this.S&&this.getParent())this.getParent().select();else if(M!=this){var a=null;if(M){a=M.id;D++;try{Og(M)}finally{D--}}a=new (H("selected"))(a,this.id,this.j.id);E(a);M=this;this.ii()}};function Og(a){if(M==a){var b=new (H("selected"))(a.id,null,a.j.id);b.Wa=a.j.id;E(b);M=null;a.ph()}}g.Ab=null;g.lc=null;g.jp=null;function kg(a){var b=[];a.Ab&&b.push(a.Ab);a.lc&&b.push(a.lc);a.jp&&b.push(a.jp);return b}
g.Aj=function(a){var b=this.Nc;if(a!=b){nc();Q.i.Aj.call(this,a);oc();var c=this.J();if(!this.j.il&&c){var d=this.aa();a?(a.J().appendChild(c),a=this.aa(),qg(this,a.x-d.x,a.y-d.y)):b&&(this.j.ua.appendChild(c),this.translate(d.x,d.y));this.Ha()}}};g.aa=function(){var a=0,b=0,c=this.Mh?this.j.Db.Ec:null,d=this.J();if(d){do{var e=Xa(d);a+=e.x;b+=e.y;this.Mh&&this.j.Db.Ec.firstChild==d&&(e=this.j.Db.Uk(),a+=e.x,b+=e.y);d=d.parentNode}while(d&&d!=this.j.ua&&d!=c)}return new r(a,b)};
g.moveBy=function(a,b){if(this.Nc)throw Error("Block has parent.");var c=0==D;if(c)var d=new (H("move"))(this);var e=this.aa();this.translate(e.x+a,e.y+b);qg(this,a,b);c&&(Md(d),E(d));zd(this.j)};g.translate=function(a,b){this.J().setAttribute("transform","translate("+a+","+b+")")};g.moveTo=function(a){var b=this.aa();this.moveBy(a.x-b.x,a.y-b.y)};g.Cl=function(a){this.Mh?this.j.Db.Pe(a.x,a.y):(this.v.Ih="translate("+a.x+","+a.y+")",this.v.setAttribute("transform",this.v.Ih+this.v.zh))};
function ki(a){if(a.j&&!a.j.Ra()&&!a.getParent()&&!a.Za){var b=a.j.Yb;if(b&&b.rr){var c=b.pm,d=c/2,e=a.aa();b=Math.round((e.x-d)/c)*c+d-e.x;c=Math.round((e.y-d)/c)*c+d-e.y;b=Math.round(b);c=Math.round(c);0==b&&0==c||a.moveBy(b,c)}}}g.Lg=function(){var a=this.aa(),b=mg(this);if(this.s){var c=a.x-b.width;var d=a.x}else c=a.x,d=a.x+b.width;return new wa(a.y,a.y+b.height,c,d)};g.Xg=function(){this.wa.vg=this.j.pa.D();for(var a=0,b;b=this.A[a];a++)b.Xg()};
g.He=function(a){this.je!=a&&(Q.i.He.call(this,a),a?this.L&&this.V():li(this))};function li(a){for(var b=a.isCollapsed(),c=0,d;d=a.A[c];c++)"_TEMP_COLLAPSED_INPUT"!=d.name&&d.ta(!b);if(b){d=kg(a);for(c=0;b=d[c];c++)b.ta(!1);c=a.toString(30);(d=Dd(a,"_TEMP_COLLAPSED_FIELD"))?Hd(d,c):(d=L(a,"_TEMP_COLLAPSED_INPUT")||a.Vc(5,"_TEMP_COLLAPSED_INPUT"),yh(d,new wh(c),"_TEMP_COLLAPSED_FIELD"))}else yd(a),a.Pf("_TEMP_COLLAPSED_INPUT")}
g.Rd=function(a){var b=this.j&&this.j.Fd(a);if(b){if(b.oe)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");Yg(b,this);b.Zb=a}};g.showHelp=function(){var a="function"==typeof this.Cf?this.Cf():this.Cf;a&&window.open(a)};g.yh=function(a){if(this.j.options.readOnly||!this.contextMenu)var b=null;else b=Sh("block",{block:this}),this.nq&&this.nq(b);b&&b.length&&(P.show(a,b,this.s),P.zi=this)};
function qg(a,b,c){if(a.L){for(var d=a.qc(!1),e=0;e<d.length;e++)d[e].moveBy(b,c);d=kg(a);for(e=0;e<d.length;e++)mi(d[e]);for(e=0;e<a.Yc.length;e++)qg(a.Yc[e],b,c)}}g.Yd=function(a){if(a){var b=this.J();b.Ih="";b.zh="";gf=gf.concat(this.qc(!0));z(this.v,"blocklyDragging")}else gf=[],jc(this.v,"blocklyDragging");for(b=0;b<this.Yc.length;b++)this.Yc[b].Yd(a)};g.xj=function(a){Q.i.xj.call(this,a);gg(this.wa,"blocklyDraggable",a)};g.jm=function(a){Q.i.jm.call(this,a);a=kg(this);for(var b=0;b<a.length;b++)a[b].Re()};
g.mm=function(a){Q.i.mm.call(this,a);this.Ha()};g.So=function(a){this.Hf!=a&&(this.Hf=a)&&(this.Sf(this.j.pa.D().Jp),gg(this.wa,"blocklyInsertionMarker",!0))};g.J=function(){return this.v};
g.m=function(a,b){if(this.j){Oe=Ne=null;We();Ve(this.wa.Ca);nc();var c=this.j;M==this&&(Og(this),ni(this.j));P.zi==this&&P.wb();if(b&&this.L){Od(this,a);b=this.j;var d=this.J();b.Rb.play("delete");var e=rg(b,d);d=d.cloneNode(!0);d.Gr=e.x;d.Hr=e.y;d.setAttribute("transform","translate("+e.x+","+e.y+")");B(b).appendChild(d);d.an=d.getBBox();Xf(d,b.s,new Date,b.scale)}this.L=!1;if(this.Mj){for(var f in this.Mj)clearTimeout(this.Mj[f]);this.Mj=null}f=kg(this);for(b=0;b<f.length;b++)f[b].m();Q.i.m.call(this,
!!a);A(this.v);zd(c);this.v=null;oc()}};g.Ha=function(){this.wa.Ha(this);for(var a=kg(this),b=0;b<a.length;b++)a[b].Ha();for(a=0;b=this.A[a];a++)for(var c=0,d;d=b.ga[c];c++)d.Ha()};function yd(a){var b=od(a,!1);a.Ha();if(!a.isCollapsed()){a=0;for(var c;c=b[a];a++)c.L&&yd(c)}}g.wq=function(){return this.lc};
g.Tf=function(a){if(!ka.Comment)throw Error("Missing require for Blockly.Comment");this.mc.text!=a&&(Q.i.Tf.call(this,a),a=null!=a,!!this.lc==a?this.lc.Ls():(a?this.lc=new ka.Comment(this):(this.lc.m(),this.lc=null),this.L&&(this.V(),this.Ma())))};g.To=function(a){this.Ab&&this.Ab!==a&&this.Ab.m();a&&(a.B=this,this.Ab=a,ji(a));this.L&&(this.V(),this.Ma())};g.Qc=function(a){this.isEnabled()!=a&&(Q.i.Qc.call(this,a),this.L&&!Eh(this)&&yd(this))};g.wc=function(a){this.L&&this.wa.bp(a)};
g.ii=function(){gg(this.wa,"blocklySelected",!0)};g.ph=function(){gg(this.wa,"blocklySelected",!1)};g.im=function(a){gg(this.wa,"blocklyDraggingDelete",a)};g.Sk=function(){return this.style.Zc};g.Sf=function(a){Q.i.Sf.call(this,a);a=oi(this.j.pa.D(),this.Tb);this.wa.td(a.style);this.style=a.style;this.Me=a.name;this.Ha()};g.td=function(a){var b=ii(this.j.pa.D(),a);this.Me=a;if(b)this.Hc=b.Hc,this.wa.td(b),this.Tb=b.Zc,this.style=b,this.Ha();else throw Error("Invalid style name: "+a);};
function lg(a){do{var b=a.J(),c=b.parentNode,d=c.childNodes;d[d.length-1]!==b&&c.appendChild(b);a=a.getParent()}while(a)}g.Bj=function(a,b){Q.i.Bj.call(this,a,b);this.L&&(this.V(),this.Ma())};g.yj=function(a,b){Q.i.yj.call(this,a,b);this.L&&(this.V(),this.Ma())};g.km=function(a,b){Q.i.km.call(this,a,b);this.L&&(this.V(),this.Ma())};g.Je=function(a){Q.i.Je.call(this,a);this.L&&(this.V(),this.Ma())};g.Pf=function(a,b){a=Q.i.Pf.call(this,a,b);this.L&&(this.V(),this.Ma());return a};
g.Vc=function(a,b){a=Q.i.Vc.call(this,a,b);this.L&&(this.V(),this.Ma());return a};function xd(a,b){a.G&&Bh(a.G,b);a.u&&Bh(a.u,b);if(a.C){Bh(a.C,b);var c=a.C.I();c&&xd(c,b)}if(!a.je)for(c=0;c<a.A.length;c++){var d=a.A[c].connection;d&&(Bh(d,b),(d=d.I())&&xd(d,b))}}g.qc=function(a){var b=[];if(a||this.L)if(this.u&&b.push(this.u),this.G&&b.push(this.G),this.C&&b.push(this.C),a||!this.je){a=0;for(var c;c=this.A[a];a++)c.connection&&b.push(c.connection)}return b};
g.Yi=function(a){return Q.i.Yi.call(this,a)};g.Tk=function(a,b){return Q.i.Tk.call(this,a,b)};g.Wg=function(a){return new Uh(this,a)};g.Ma=function(){if(this.j&&!this.j.Ra()){var a=this.tc();if(!a.Za)for(var b=this.qc(!1),c=0,d;d=b[c];c++){d.isConnected()&&af(d)&&d.I().Ma();for(var e=d.mo(28),f=0,h;h=e[f];f++)d.isConnected()&&h.isConnected()||h.F().tc()!=a&&(af(d)?Xh(h,d):Xh(d,h))}}};
function sg(a){var b=Zc;setTimeout(function(){F(b);ki(a);F(!1)},125);setTimeout(function(){F(b);a.Ma();F(!1)},250)}g.getParent=function(){return Q.i.getParent.call(this)};g.tc=function(){return Q.i.tc.call(this)};
g.V=function(a){if(!this.cm){this.cm=!0;try{this.L=!0;nc();this.isCollapsed()&&li(this);this.j.pa.V(this);var b=this.aa();this.G&&Zh(this.G,b);this.u&&Zh(this.u,b);for(var c=0;c<this.A.length;c++){var d=this.A[c].connection;d&&(Zh(d,b),d.isConnected()&&ai(d))}this.C&&(Zh(this.C,b),this.C.isConnected()&&ai(this.C));if(!1!==a){var e=this.getParent();e?e.V(!0):zd(this.j)}oc();this.vm()}finally{this.cm=!1}}};g.vm=function(){this.j.Kf&&this.wa.Ag&&this.j.vf().nc();this.j.Kf&&this.wa.xl&&this.j.Ng("local_marker_1").nc()};
g.sd=function(a){this.wa.sd(a)};g.Zd=function(a){this.wa.Zd(a)};function mg(a){var b=a.height,c=a.width,d=ob(a);d&&(d=mg(d),a=a.j.pa.D().Qj,b+=d.height-a,c=Math.max(c,d.width));return{height:b,width:c}};function pi(){this.Aa=[]}function qi(a,b,c){if(!a.Aa.length)return-1;var d=Yh(a,c);if(d>=a.Aa.length)return-1;c=b.y;for(var e=d;0<=e&&a.Aa[e].y==c;){if(a.Aa[e]==b)return e;e--}for(e=d;e<a.Aa.length&&a.Aa[e].y==c;){if(a.Aa[e]==b)return e;e++}return-1}function Yh(a,b){if(!a.Aa.length)return 0;for(var c=0,d=a.Aa.length;c<d;){var e=Math.floor((c+d)/2);if(a.Aa[e].y<b)c=e+1;else if(a.Aa[e].y>b)d=e;else{c=e;break}}return c}
function Wh(a,b,c){b=qi(a,b,c);if(-1==b)throw Error("Unable to find connection in connectionDB.");a.Aa.splice(b,1)}function bi(a,b,c){function d(m){var p=f-e[m].x,t=h-e[m].y;Math.sqrt(p*p+t*t)<=c&&l.push(e[m]);return t<c}var e=a.Aa,f=b.x,h=b.y;a=0;for(var k=b=e.length-2;a<k;)e[k].y<h?a=k:b=k,k=Math.floor((a+b)/2);var l=[];b=a=k;if(e.length){for(;0<=a&&d(a);)a--;do b++;while(b<e.length&&d(b))}return l};function ri(a,b){ri.i.constructor.call(this,b);this.Zo=a}I(ri,Qd);ri.prototype.type="theme_change";ri.prototype.R=function(){var a=ri.i.R.call(this);a.themeName=this.Zo;return a};ri.prototype.N=function(a){ri.i.N.call(this,a);this.Zo=a.themeName};C(Pc,"theme_change",ri);function si(a,b,c,d,e){si.i.constructor.call(this,d);this.ic=a;this.hc=b;this.scale=c;this.gh=e}I(si,Qd);si.prototype.type="viewport_change";si.prototype.R=function(){var a=si.i.R.call(this);a.viewTop=this.ic;a.viewLeft=this.hc;a.scale=this.scale;a.oldScale=this.gh;return a};si.prototype.N=function(a){si.i.N.call(this,a);this.ic=a.viewTop;this.hc=a.viewLeft;this.scale=a.scale;this.gh=a.oldScale};C(Pc,"viewport_change",si);function ti(a){this.g=a}function ui(a){var b=0,c=0;a&&(b=a.Hd(),c=a.ob);return new Da(b,c)}function vi(a){var b=ui(wi(a.g,!0));return{width:b.width,height:b.height,position:a.g.Cb}}function xi(a){var b=ui(a.g.qa);return{width:b.width,height:b.height,position:a.g.Cb}}function yi(a){var b=0,c=xi(a),d=vi(a),e=!!a.g.qa;a=!!wi(a.g,!0);var f=2==(e?c.position:d.position);e&&f?b=c.width:a&&f&&(b=d.width);return{top:0,left:b}}
function Gg(a,b){b=b?a.g.scale:1;var c=zi(a.g),d=xi(a),e=vi(a),f=a.g.qa?d.position:e.position;if(a.g.qa){if(2==f||3==f)c.width-=d.width}else!wi(a.g,!0)||2!=f&&3!=f||(c.width-=e.width);return{height:c.height/b,width:c.width/b,top:-a.g.scrollY/b,left:-a.g.scrollX/b}}
ti.prototype.Li=function(){var a=this.g.scale;var b=[].concat(this.g.Hh);if(b.length){for(var c=b[0].Lg(),d=1;d<b.length;d++){var e=b[d];e.zb&&e.zb()||(e=e.Lg(),e.top<c.top&&(c.top=e.top),e.bottom>c.bottom&&(c.bottom=e.bottom),e.left<c.left&&(c.left=e.left),e.right>c.right&&(c.right=e.right))}b=c}else b=new wa(0,0,0,0);return{height:(b.bottom-b.top)*a,width:(b.right-b.left)*a,top:b.top*a,left:b.left*a}};
ti.prototype.Gd=function(a,b,c){a=a?this.g.scale:1;var d=b||Gg(this,!1);c=c||this.Li();if(Mg(this.g)&&Ng(this.g))b={};else{b=Mg(this.g);var e=Ng(this.g),f=d||Gg(this,!1);var h={};e||(h.top=f.top,h.bottom=f.top+f.height);b||(h.left=f.left,h.right=f.left+f.width);b=h}h=c.top+c.height;e=c.left+c.width;f=d.width;var k=d.height;var l=f/2,m=k/2;d=Math.min(c.top-m,h-k);h=Math.max(h+m,c.top+k);k=Math.min(c.left-l,e-f);c=Math.max(e+l,c.left+f);d=void 0!==b.top?b.top:d;e=void 0!==b.left?b.left:k;return{top:d/
a,left:e/a,width:((void 0!==b.right?b.right:c)-e)/a,height:((void 0!==b.bottom?b.bottom:h)-d)/a}};ti.prototype.rc=function(){var a=xi(this),b=vi(this),c=zi(this.g),d=yi(this),e=Gg(this),f=this.Li(),h=this.Gd(!1,e,f);return{ps:f.height,ss:f.width,rs:f.top,qs:f.left,scrollHeight:h.height,scrollWidth:h.width,scrollTop:h.top,scrollLeft:h.left,tb:e.height,fb:e.width,ic:e.top,hc:e.left,ub:d.top,ib:d.left,Gs:c.height,Hs:c.width,Ks:a.width,Js:a.height,Cb:a.position,vs:b.width,us:b.height}};
C(Vc,"default",ti);function Ai(a,b){this.P=b;Ai.i.constructor.call(this,a)}I(Ai,ti);Ai.prototype.Li=function(){try{var a=this.g.ua.getBBox()}catch(c){a={height:0,y:0,width:0,x:0}}var b=this.g.scale;return{height:a.height*b,width:a.width*b,top:a.y*b,left:a.x*b}};Ai.prototype.Gd=function(a,b,c){b=c||this.Li();c=this.P.af*this.g.scale;a=a?this.g.scale:1;return{height:(b.height+2*c)/a,width:(b.width+b.left+c)/a,top:0,left:0}};function Bi(a){var b=ce;this.g=a;this.Fh=b;this.Bh=[];this.Ad=Object.create(null)}g=Bi.prototype;g.ed=function(){return this.Fh};g.xh=function(a){var b=this.Fh;this.Fh=a;if(a=Ci(this.g))b&&jc(a,b.pc()),z(a,this.Fh.pc());for(b=0;a=this.Bh[b];b++)Di(a);Ge()};g.subscribe=function(a,b,c){this.Ad[b]||(this.Ad[b]=[]);this.Ad[b].push({element:a,propertyName:c});a.style[c]=""};
g.unsubscribe=function(a){if(a)for(var b=Object.keys(this.Ad),c=0,d;d=b[c];c++){for(var e=this.Ad[d],f=e.length-1;0<=f;f--)e[f].element===a&&e.splice(f,1);this.Ad[d].length||delete this.Ad[d]}};g.m=function(){this.Ad=this.Bh=this.Fh=null};function Ei(a,b){Ei.i.constructor.call(this,a,b);this.Wi=!1;this.Eb=Object.create(null);this.Vo=this.mh=0;this.Un=this.Pl=null}I(Ei,Pg);g=Ei.prototype;g.Ak=function(a){this.Un=this.Fa.options.xa&&this.Fa.options.xa.Eo;Ei.i.Ak.call(this,a);!this.Ti&&Ab(a)&&Fi(this,a)};g.cn=function(a){this.Pl=u(document,"mousedown",null,this.Fq.bind(this),!0);this.mj=u(document,"mousemove",null,this.Af.bind(this),!0);this.nj=u(document,"mouseup",null,this.Oi.bind(this),!0);a.preventDefault();a.stopPropagation()};
g.Fq=function(a){!this.Ra()&&Ab(a)&&(Fi(this,a),this.Wi&&vb())};g.Af=function(a){if(this.Ra())zb(a)&&!yb(a)||Ei.i.Af.call(this,a);else if(this.Wi){if(Ab(a)){this.Eb[xb(a)]=Gi(this,a);var b=Object.keys(this.Eb);if(this.Un&&2===b.length){b=Object.keys(this.Eb);b=ta(this.Eb[b[0]],this.Eb[b[1]])/this.Vo;if(0<this.mh&&Infinity>this.mh){var c=b-this.mh;c=0<c?5*c:6*c;var d=this.Fa,e=bb(a,B(d),De(d));d.zoom(e.x,e.y,c)}this.mh=b;a.preventDefault()}else Ei.i.Af.call(this,a)}vb()}else Ei.i.Af.call(this,a)};
g.Oi=function(a){if(Ab(a)&&!this.Ra()){var b=xb(a);this.Eb[b]&&delete this.Eb[b];2>Object.keys(this.Eb).length&&(this.Eb=Object.create(null),this.mh=0)}!this.Wi||this.Ra()?zb(a)&&!yb(a)||Ei.i.Oi.call(this,a):(a.preventDefault(),a.stopPropagation(),this.m())};g.m=function(){Ei.i.m.call(this);this.Pl&&v(this.Pl)};function Fi(a,b){a.Eb[xb(b)]=Gi(a,b);var c=Object.keys(a.Eb);2==c.length&&(a.Vo=ta(a.Eb[c[0]],a.Eb[c[1]]),a.Wi=!0,b.preventDefault())}
function Gi(a,b){return a.Fa?new r(b.changedTouches?b.changedTouches[0].pageX:b.pageX,b.changedTouches?b.changedTouches[0].pageY:b.pageY):null};function Hi(a){this.Ul=a;this.lg=Object.create(null)}g=Hi.prototype;g.ml=null;g.m=function(){this.lg=this.Ul=null};g.load=function(a,b){if(a.length){try{var c=new n.Audio}catch(k){return}for(var d,e=0;e<a.length;e++){var f=a[e],h=f.match(/\.(\w+)$/);if(h&&c.canPlayType("audio/"+h[1])){d=new n.Audio(f);break}}d&&d.play&&(this.lg[b]=d)}};g.preload=function(){for(var a in this.lg){var b=this.lg[a];b.volume=.01;var c=b.play();void 0!==c?c.then(b.pause).catch(function(){}):b.pause();if(Oa||Qa)break}};
g.play=function(a,b){var c=this.lg[a];c?(a=new Date,null!=this.ml&&100>a-this.ml||(this.ml=a,c=Oa||Ma?c:c.cloneNode(),c.volume=void 0===b?1:b,c.play())):this.Ul&&this.Ul.Rb.play(a,b)};
function Ii(a,b,c){Ii.i.constructor.call(this,a);this.sb=new (Yc(Vc,a,!0))(this);this.rc=a.rc||this.sb.rc.bind(this.sb);this.uh=a.uh||Ji;this.$c=new Db;var d=[];d[1]=new pi;d[2]=new pi;d[3]=new pi;d[4]=new pi;this.yi=d;b&&(this.Db=b);c&&(this.Ue=c);this.Lj=!!this.Ue&&ib();this.Pi=[];this.Rb=new Hi(a.bb);this.Yb=this.options.Xk?new $d(this.options.Xk,a.Gn):null;this.uc=new dh(this);this.sm=Object.create(null);this.An=Object.create(null);Ki&&Li&&Mi(this,"VARIABLE",Li);Ni&&Oi&&(Mi(this,"PROCEDURE",Oi),
vf(this,Pi));this.Va=this.options.bb?this.options.bb.Va:new Bi(this);this.Va.Bh.push(this);c=this.options.uj||"geras";a=this.ed();b=this.options.vj;c=new (Xc(Rc,c))(c);c.X(a,b);this.pa=c;this.jk=null;this.Kf=!1;this.Hh=[];this.Bk=[];this.ik=new Da(0,0)}I(Ii,vd);g=Ii.prototype;g.wj=null;g.L=!0;g.ld=!0;g.Ld=!1;g.Vg=!1;g.em=!0;g.scrollX=0;g.scrollY=0;g.un=null;g.scale=1;g.Hl=1;g.vo=0;g.so=0;g.Zf=null;g.Y=null;g.P=null;g.qa=null;g.Xa=null;g.Db=null;g.Ue=null;g.Lj=!1;g.Si=!1;g.fl=null;g.Zn=null;g.T=null;
g.Tn=null;g.hl=!0;g.sd=function(a){this.uc.sd(a)};g.Zd=function(a){this.uc.Zd(a)};g.Ng=function(a){return this.uc?this.uc.Ng(a):null};g.vf=function(){return this.uc?this.uc.vf():null};g.ed=function(){return this.Va.ed()};g.xh=function(a){a||(a=ce);this.Va.xh(a)};function Di(a){a.v&&a.pa.bm(a.v,a.ed());Qi(jf(a).filter(function(b){return!!b.Me}));Ri(a);a.qa&&Di(a.qa);a.isVisible()&&a.ta(!0);a=new (H("theme_change"))(a.ed().name,a.id);E(a)}
function Qi(a){for(var b=0,c;c=a[b];b++){var d=c.Me;if(d&&(c.td(d),c.Ab)){var e=c.Ab.g;if(e&&jf(e)){var f=jf(e);for(d=0;c=f[d];d++)c.td(c.Me);if(c=wi(e))for(e=jf(c.g),d=0;c=e[d];d++)c.td(c.Me)}}}}function De(a){if(a.hl){var b=B(a).getScreenCTM();b&&(a.Tn=b.inverse(),a.hl=!1)}return a.Tn}g.Lh=function(){this.hl=!0};g.isVisible=function(){return this.ld};
function rg(a,b){var c=0,d=0,e=1;if(a.ua.compareDocumentPosition(b)&16||a.vd.compareDocumentPosition(b)&16)e=a.scale;do{var f=Xa(b);if(b==a.ua||b==a.vd)e=1;c+=f.x*e;d+=f.y*e;b=b.parentNode}while(b&&b!=B(a));return new r(c,d)}function zi(a){a=a.ik;return new Da(a.width,a.height)}function Ci(a){if(!a.fl)for(var b=a.v;b;){if(-1!=(" "+(b.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){a.fl=b;break}b=b.parentNode}return a.fl}
g.ya=function(a){this.v=x(Xb,{"class":"blocklyWorkspace"},null);a&&(this.Sa=x(cc,{height:"100%",width:"100%","class":a},this.v),"blocklyMainBackground"==a&&this.Yb?this.Sa.style.fill="url(#"+this.Yb.zf.id+")":this.Va.subscribe(this.Sa,"workspaceBackgroundColour","fill"));this.ua=x(Xb,{"class":"blocklyBlockCanvas"},this.v);this.vd=x(Xb,{"class":"blocklyBubbleCanvas"},this.v);this.Ld||(u(this.v,"mousedown",this,this.Rd,!1,!0),u(this.v,"wheel",this,this.cr));this.options.Hn&&(this.qa=new (Yc(Sc,this.options,
!0))(this));this.Yb&&this.Yb.update(this.scale);Si(this);var b=Yc(Oc,this.options);b&&(a=this.uc,b=new b,a.Ub&&a.Ub.Wb&&a.Ub.Wb.m(),a.Ub=b,a.Ub&&(b=a.Ub,b=new Ti(a.g,a.g.pa.D(),b),a.Ub.Wb=b,a.sd(a.Ub.Wb.ya())));this.pa.ya(this.v,this.ed());return this.v};
g.m=function(){this.L=!1;this.Xa&&this.Xa.cancel();this.v&&(A(this.v),this.v=null);this.vd=this.ua=null;this.qa&&(this.qa.m(),this.qa=null);this.P&&(this.P.m(),this.P=null);this.Zf&&(this.Zf.m(),this.Zf=null);this.Y&&(this.Y.m(),this.Y=null);this.Rh&&(this.Rh.m(),this.Rh=null);this.Rb&&(this.Rb.m(),this.Rb=null);this.Yb&&(this.Yb.m(),this.Yb=null);this.pa.m();this.uc&&(this.uc.m(),this.uc=null);Ii.i.m.call(this);if(this.Va){var a=this.Va,b=a.Bh.indexOf(this);if(0>b)throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");
a.Bh.splice(b,1);this.Va.unsubscribe(this.Sa);this.options.bb||(this.Va.m(),this.Va=null)}this.An=this.sm=this.yi=null;this.options.bb||(a=B(this))&&a.parentNode&&A(a.parentNode);this.wj&&(v(this.wj),this.wj=null)};g.Lf=function(a,b){return new Q(this,a,b)};
function Ui(a,b){var c=new je({parentWorkspace:a,rtl:a.s,oneBasedIndex:a.options.oj,renderer:a.options.uj,rendererOverrides:a.options.vj,move:{scrollbars:!0}});c.Cb=a.options.Cb;a.P=new (Yc(Uc,a.options,!0))(c);a.P.ie=!1;a.P.g.ta(!0);return a.P.ya(b)}function wi(a,b){return a.P||b?a.P:a.qa?wi(a.qa):null}function zd(a){a.em&&a.L&&(a.Y&&a.Y.resize(),a.Lh())}
g.resize=function(){this.qa&&this.qa.position();this.P&&this.P.position();var a=Jb(this.$c,Lb);var b=this.sb;b={ip:Gg(b),Zj:yi(b),Dr:xi(b)};for(var c=[],d=0,e;e=a[d];d++)e.position(b,c),(e=e.Lg())&&c.push(e);this.Y&&this.Y.resize();this.Lh();Si(this)};function Sg(a){var b=document.documentElement;var c=window;b=Ha&&c.pageYOffset!=b.scrollTop?new r(b.scrollLeft,b.scrollTop):new r(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop);sa(a.Zn,b)||(a.Zn=b,a.Lh(),Si(a))}
function Vi(a,b,c){B(a);b&&(a.ik.width=b);c&&(a.ik.height=c)}function B(a){if(!a.jk)for(var b=a.v;b;){if("svg"==b.tagName){a.jk=b;break}b=b.parentNode}return a.jk}function ne(a){if(0==D){var b=a.scale,c=-a.scrollY,d=-a.scrollX;if(!(b==a.Hl&&1>Math.abs(c-a.vo)&&1>Math.abs(d-a.so))){var e=new (H("viewport_change"))(c,d,b,a.id,a.Hl);a.Hl=b;a.vo=c;a.so=d;E(e)}}}
g.translate=function(a,b){if(this.Lj&&this.Si)this.Ue.Pe(a,b);else{var c="translate("+a+","+b+") scale("+this.scale+")";this.ua.setAttribute("transform",c);this.vd.setAttribute("transform",c)}if(this.Db){c=this.Db;var d=this.scale;c.Xd=d;var e=a.toFixed(0),f=b.toFixed(0);c.hn.x=parseInt(e,10);c.hn.y=parseInt(f,10);c.Ec.setAttribute("transform","translate("+e+","+f+") scale("+d+")")}this.Yb&&this.Yb.moveTo(a,b);ne(this)};
function Fe(a){if(a.Lj){a.Si=!1;var b=a.Ue.Uk();a.Ue.oi(a.v);b="translate("+b.x+","+b.y+") scale("+a.scale+")";a.ua.setAttribute("transform",b);a.vd.setAttribute("transform",b)}}
function Ee(a){if(a.Lj&&!a.Si){a.Si=!0;var b=a.ua.previousSibling,c=parseInt(B(a).getAttribute("width"),10),d=parseInt(B(a).getAttribute("height"),10),e=Xa(a.ua),f=a.Ue,h=a.ua,k=a.vd,l=a.scale;if(f.ka.childNodes.length)throw Error("Already dragging a block.");f.Zl=b;h.setAttribute("transform","translate(0, 0) scale("+l+")");k.setAttribute("transform","translate(0, 0) scale("+l+")");f.ka.setAttribute("width",c);f.ka.setAttribute("height",d);f.ka.appendChild(h);f.ka.appendChild(k);f.ka.style.display=
"block";a.Ue.Pe(e.x,e.y)}}g.Hd=function(){var a=this.rc();return a?a.fb/this.scale:0};g.ta=function(a){this.ld=a;if(this.v)if(this.Y&&this.Y.Ie(a),wi(this)&&wi(this).Ie(a),B(this).style.display=a?"block":"none",this.qa&&this.qa.ta(a),a){a=jf(this);for(var b=a.length-1;0<=b;b--)a[b].Xg();this.V();this.qa&&this.qa.position()}else Ge(!0)};g.V=function(){for(var a=jf(this),b=a.length-1;0<=b;b--)a[b].V(!1);if(this.Xa)for(a=this.Xa.wf(),b=0;b<a.length;b++)a[b].V(!1);b=this.uc;b.g.Kf&&b.bd&&b.g.vf().nc()};
function Wi(a){for(var b=K,c=0,d;d=b.Pi[c];c++)d.wc(!1);b.Pi.length=0;if(d=a?b.Jb(a):null)-1==b.Pi.indexOf(d)&&b.Pi.push(d),d.wc(!0)}
function Xi(a){var b=Yi;if(a.L&&b.tagName&&!(b.getElementsByTagName("block").length>=(isNaN(a.options.Zg)?Infinity:a.options.Zg-jf(a).length)))if(a.Xa&&a.Xa.cancel(),"comment"==b.tagName.toLowerCase()){D++;try{var c=ka.ns.Qk(b),d=parseInt(b.getAttribute("x"),10),e=parseInt(b.getAttribute("y"),10);isNaN(d)||isNaN(e)||(a.s&&(d=-d),c.moveBy(d+50,e+50))}finally{D--}0==D&&ka.ls.ts(c);c.select()}else{D++;try{var f=ud(b,a),h=parseInt(b.getAttribute("x"),10),k=parseInt(b.getAttribute("y"),10);if(!isNaN(h)&&
!isNaN(k)){a.s&&(h=-h);do{b=!1;var l=jf(a);c=0;for(var m;m=l[c];c++){var p=m.aa();if(1>=Math.abs(h-p.x)&&1>=Math.abs(k-p.y)){b=!0;break}}if(!b){var t=f.qc(!1);c=0;for(var y;y=t[c];c++)if(y.closest(28,new r(h,k)).connection){b=!0;break}}b&&(h=a.s?h-28:h+28,k+=56)}while(b);f.moveBy(h,k)}}finally{D--}0==D&&!f.S&&E(new (H("create"))(f));f.select()}}function Ri(a){(a=a.Ld?a.T:a)&&!a.Xa&&a.qa&&wi(a.qa)&&a.qa.Es()}g.Qf=function(a,b){Ii.i.Qf.call(this,a,b);Ri(this)};
g.rf=function(a){Ii.i.rf.call(this,a);Ri(this)};g.Ed=function(a,b,c){a=Ii.i.Ed.call(this,a,b,c);Ri(this);return a};function Si(a){var b=Jb(a.$c,Mb);a.Bk=[];for(var c=0,d;d=b[c];c++){var e=d.Dn();e&&a.Bk.push({component:d,hq:e})}}function og(a,b){for(var c=0,d;d=a.Bk[c];c++)if(d.hq.contains(b.clientX,b.clientY))return d.component;return null}g.Rd=function(a){var b=this.Fd(a);b&&Wg(b,a,this)};g.Ah=function(a,b){a=bb(a,B(this),De(this));a.x/=this.scale;a.y/=this.scale;this.un=ua(b,a)};
g.Ra=function(){return null!=this.Xa&&this.Xa.Ra()};g.$a=function(){return this.options.ab&&!!this.options.ab.scrollbars||this.options.ab&&this.options.ab.$f||this.options.ab&&this.options.ab.dd||this.options.xa&&this.options.xa.$f||this.options.xa&&this.options.xa.Eo};function Mg(a){var b=!!a.Y;return a.$a()&&(!b||b&&!!a.Y.la)}function Ng(a){var b=!!a.Y;return a.$a()&&(!b||b&&!!a.Y.Z)}
g.cr=function(a){if($g())a.preventDefault(),a.stopPropagation();else{var b=this.options.xa&&this.options.xa.$f,c=this.options.ab&&this.options.ab.$f;if(b||c){var d=cb(a);!b||!a.ctrlKey&&c?(b=this.scrollX-d.x,c=this.scrollY-d.y,a.shiftKey&&!d.x&&(b=this.scrollX-d.y,c=this.scrollY),this.scroll(b,c)):(d=-d.y/50,b=bb(a,B(this),De(this)),this.zoom(b.x,b.y,d));a.preventDefault()}}};g.yh=function(a){if(!this.options.readOnly&&!this.Ld){var b=Sh("workspace",{j:this});this.kq&&this.kq(b,a);P.show(a,b,this.s)}};
function Kc(a){if(a.options.bb)Kc(a.options.bb);else{Ec=a;document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{B(a).focus({preventScroll:!0})}catch(b){try{B(a).parentNode.setActive()}catch(c){B(a).parentNode.focus({preventScroll:!0})}}}}
g.zoom=function(a,b,c){c=Math.pow(this.options.xa.mr,c);var d=this.scale*c;if(this.scale!=d){d>this.options.xa.$g?c=this.options.xa.$g/this.scale:d<this.options.xa.dh&&(c=this.options.xa.dh/this.scale);var e=this.ua.getCTM(),f=B(this).createSVGPoint();f.x=a;f.y=b;f=f.matrixTransform(e.inverse());a=f.x;b=f.y;e=e.translate(a*(1-c),b*(1-c)).scale(c);this.scrollX=e.e;this.scrollY=e.f;this.setScale(d)}};
g.setScale=function(a){this.options.xa.$g&&a>this.options.xa.$g?a=this.options.xa.$g:this.options.xa.dh&&a<this.options.xa.dh&&(a=this.options.xa.dh);this.scale=a;Ge(!1);this.P&&(this.P.$l(),Si(this));this.Yb&&this.Yb.update(this.scale);a=this.rc();this.scrollX-=a.ib;this.scrollY-=a.ub;a.hc+=a.ib;a.ic+=a.ub;this.scroll(this.scrollX,this.scrollY);if(this.Y)if(this.P){var b=this.Y;b.la&&ye(b.la,a);b.Z&&Ae(b.Z,a)}else b=this.Y,b.la&&ze(b.la,a),b.Z&&Be(b.Z,a)};
function Zi(a){return a.options.bb?Zi(a.options.bb):a.scale}g.scroll=function(a,b){Ge(!0);var c=this.rc();a=Math.min(a,-c.scrollLeft);b=Math.min(b,-c.scrollTop);var d=c.scrollTop+Math.max(0,c.scrollHeight-c.tb);a=Math.max(a,-(c.scrollLeft+Math.max(0,c.scrollWidth-c.fb)));b=Math.max(b,-d);this.scrollX=a;this.scrollY=b;this.Y&&this.Y.set(-(a+c.scrollLeft),-(b+c.scrollTop),!1);a+=c.ib;b+=c.ub;this.translate(a,b)};
function Ji(a){var b=this.rc();"number"==typeof a.x&&(this.scrollX=-(b.scrollLeft+(b.scrollWidth-b.fb)*a.x));"number"==typeof a.y&&(this.scrollY=-(b.scrollTop+(b.scrollHeight-b.tb)*a.y));this.translate(this.scrollX+b.ib,this.scrollY+b.ub)}g.Jb=function(a){return Ii.i.Jb.call(this,a)};g.sa=function(a){return Ii.i.sa.call(this,a)};g.ji=function(a){this.Hh.push(a);Ii.i.ji.call(this,a)};g.tj=function(a){lb(this.Hh,a);Ii.i.tj.call(this,a)};g.eb=function(a){var b=!this.em&&a;this.em=a;b&&zd(this)};
g.clear=function(){this.eb(!1);Ii.i.clear.call(this);this.Hh=[];this.eb(!0)};function $i(a,b){if("function"!=typeof b)throw TypeError("Button callbacks must be functions.");a.An.CREATE_VARIABLE=b}function Mi(a,b,c){if("function"!=typeof c)throw TypeError("Toolbox category callbacks must be functions.");a.sm[b]=c}
g.Fd=function(a){var b="mousedown"==a.type||"touchstart"==a.type||"pointerdown"==a.type,c=this.Xa;return c?b&&c.oe?(console.warn("Tried to start the same gesture twice."),c.cancel(),null):c:b?this.Xa=new Ei(a,this):null};function ni(a){a.Xa&&a.Xa.cancel()};function aj(a){var b="blockly";"string"==typeof b&&(b=document.getElementById(b)||document.querySelector(b));if(!(b&&document.compareDocumentPosition(b)&16))throw Error("Error: container is not in current document.");a=new je(a||{});var c=document.createElement("div");c.className="injectionDiv";c.tabIndex=0;Ye(c,"label",q.WORKSPACE_ARIA_LABEL);b.appendChild(c);b=bj(c,a);var d=new Wd(c),e=new xf(c),f=cj(b,a,d,e);dj(f);Ec=f;ej(f);c.addEventListener("focusin",function(){Ec=f});return f}
function bj(a,b){a.setAttribute("dir","LTR");var c=b.Gq,d=b.jh;if(!Yd){Yd=!0;var e=Zd.join("\n");Zd.length=0;c&&(c=d.replace(/[\\/]$/,""),e=e.replace(/<<<PATH>>>/g,c),c=document.createElement("style"),c.id="blockly-common-style",c.appendChild(document.createTextNode(e)),document.head.insertBefore(c,document.head.firstChild))}a=x(dc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklySvg",tabindex:"0"},
a);c=x(Rb,{},a);e=b.Gn;c=x(ac,{id:"blocklyGridPattern"+String(Math.random()).substring(2),patternUnits:"userSpaceOnUse"},c);0<e.length&&0<e.spacing?(x(Zb,{stroke:e.colour},c),1<e.length&&x(Zb,{stroke:e.colour},c)):x(Zb,{},c);b.Xk=c;return a}
function cj(a,b,c,d){b.bb=null;b=new Ii(b,c,d);c=b.options;b.scale=c.xa.yr;a.appendChild(b.ya("blocklyMainBackground"));z(Ci(b),b.pa.pc());z(Ci(b),b.ed().pc());!c.Hn&&c.md&&(d=Ui(b,dc),lc(d,a));if(c.Kn){if(!fj)throw Error("Missing require for Blockly.Trashcan");b.Zf=new fj(b);d=b.Zf.ya();b.v.insertBefore(d,b.ua)}if(c.xa&&c.xa.controls){if(!ka.bq)throw Error("Missing require for Blockly.ZoomControls");b.Rh=new ka.bq(b);c=b.Rh.ya();b.v.appendChild(c)}b.Va.subscribe(a,"workspaceBackgroundColour","background-color");
b.translate(0,0);vf(b,gj(b));ej(b);eh||(eh=document.createElement("div"),eh.className="blocklyWidgetDiv",(Bc||document.body).appendChild(eh));Ac();Pe||(Pe=document.createElement("div"),Pe.className="blocklyTooltipDiv",(Bc||document.body).appendChild(Pe));return b}function hj(a){var b=a.sb;if(!(Mg(b.g)&&Ng(b.g)||a.Ra())){b=b.Gd(!0);for(var c=[].concat(a.Hh),d=0,e;e=c[d];d++)tg(a,b,e)}}
function gj(a){return function(b){var c=a.sb;if(!(Mg(c.g)&&Ng(c.g)||a.Ra()))if(-1!==ad.indexOf(b.type)){c=c.Gd(!0);var d=null;switch(b.type){case "create":case "move":(d=a.Jb(b.$))&&(d=d.tc())}if(d){var e=Zc;F(b.group);tg(a,c,d)&&!b.group&&console.warn("Moved object in bounds but there was no event group. This may break undo.");null!==e&&F(e)}}else"viewport_change"===b.type&&b.scale>b.gh&&hj(a)}}
function tg(a,b,c){var d=c.Lg(),e=qc(b.top,d.top,b.top+b.height-(d.bottom-d.top))-d.top,f=b.left;b=b.left+b.width-(d.right-d.left);a.s?f=Math.min(b,f):b=Math.max(f,b);return(a=qc(f,d.left,b)-d.left)||e?(c.moveBy(a,e),!0):!1}
function dj(a){var b=a.options,c=B(a);u(c.parentNode,"contextmenu",null,function(e){Wa(e)||e.preventDefault()});c=u(window,"resize",null,function(){Ge(!0);ej(a);hj(a)});a.wj=c;ij();if(b.md){c=a.qa;var d=wi(a,!0);c?c.X():d&&(d.X(a),d.show(b.md),"function"==typeof d.Qo&&d.Qo())}b.Kn&&a.Zf.X();b.xa&&b.xa.controls&&a.Rh.X();b.ab&&b.ab.scrollbars?(a.Y=new ke(a,!0===b.ab.scrollbars||!!b.ab.scrollbars.al,!0===b.ab.scrollbars||!!b.ab.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),a.Y.resize()):a.uh({x:.5,
y:.5});b.Iq&&jj(b.jh,a)}function ij(){la||(u(document,"scroll",null,function(){for(var a=wf(),b=0,c;c=a[b];b++)c.Lh&&c.Lh()}),u(document,"keydown",null,kj),Cb(document,"touchend",null,vb),Cb(document,"touchcancel",null,vb),Oa&&u(window,"orientationchange",document,function(){ej(Ec)}));la=!0}
function jj(a,b){function c(){for(;e.length;)v(e.pop());d.preload()}var d=b.Rb;d.load([a+"click.mp3",a+"click.wav",a+"click.ogg"],"click");d.load([a+"disconnect.wav",a+"disconnect.mp3",a+"disconnect.ogg"],"disconnect");d.load([a+"delete.mp3",a+"delete.ogg",a+"delete.wav"],"delete");var e=[];e.push(u(document,"mousemove",null,c,!0));e.push(u(document,"touchstart",null,c,!0))};function lj(a){this.gp="";this.Oo=Object.create(null);if(a){a=a.split(",");for(var b=0;b<a.length;b++)this.Oo[a[b]]=!0}this.reset()}lj.prototype.reset=function(){this.Dc=Object.create(null);this.nn=Object.create(null);this.ea=null};lj.prototype.nm=function(a){this.ea=a};
function mj(a,b,c){var d=b;"VARIABLE"==c&&(a.ea?b=(b=a.ea.yf(b))?b.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),b=null),b&&(d=b));b=d.toLowerCase();var e="VARIABLE"==c||"DEVELOPER_VARIABLE"==c?a.gp:"";c in a.Dc||(a.Dc[c]=Object.create(null));var f=a.Dc[c];if(b in f)return e+f[b];d?(d=encodeURI(d.replace(/ /g,
"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(d[0])&&(d="my_"+d)):d=q.UNNAMED_KEY||"unnamed";for(var h="";a.nn[d+h]||d+h in a.Oo;)h=h?h+1:2;d+=h;a.nn[d]=!0;a=("VARIABLE"==c||"DEVELOPER_VARIABLE"==c?a.gp:"")+d;f[b]=a.substr(e.length);return a};var Ni={};function nj(a){var b=qf(a,"procedures_defnoreturn").map(function(c){return c.yq()});a=qf(a,"procedures_defreturn").map(function(c){return c.yq()});b.sort(oj);a.sort(oj);return[b,a]}function oj(a,b){return a[0].localeCompare(b[0],void 0,{sensitivity:"base"})}
function Oi(a){function b(f,h){for(var k=0;k<f.length;k++){var l=f[k][0],m=f[k][1],p=J("block");p.setAttribute("type",h);p.setAttribute("gap",16);var t=J("mutation");t.setAttribute("name",l);p.appendChild(t);for(l=0;l<m.length;l++){var y=J("arg");y.setAttribute("name",m[l]);t.appendChild(y)}c.push(p)}}var c=[];if(If.procedures_defnoreturn){var d=J("block");d.setAttribute("type","procedures_defnoreturn");d.setAttribute("gap",16);var e=J("field");e.setAttribute("name","NAME");e.appendChild(document.createTextNode(q.PROCEDURES_DEFNORETURN_PROCEDURE));
d.appendChild(e);c.push(d)}If.procedures_defreturn&&(d=J("block"),d.setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),e=J("field"),e.setAttribute("name","NAME"),e.appendChild(document.createTextNode(q.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(e),c.push(d));If.procedures_ifreturn&&(d=J("block"),d.setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),c.push(d));c.length&&c[c.length-1].setAttribute("gap",24);a=nj(a);b(a[0],"procedures_callnoreturn");b(a[1],"procedures_callreturn");
return c}
function pj(a){for(var b=[],c=qf(a,"procedures_mutatorarg"),d=0,e;e=c[d];d++)b.push(mf(e,"NAME"));c=J("xml");d=J("block");d.setAttribute("type","procedures_mutatorarg");e=J("field");e.setAttribute("name","NAME");a:if(b.length)for(var f="",h=14,k="x";;){for(var l=!1,m=0;m<b.length;m++)if(b[m].toLowerCase()==k){l=!0;break}if(!l){b=k;break a}h++;25==h&&(h=0,f=Number(f)+1);k="ijkmnopqrstuvwxyzabcdefgh".charAt(h)+f}else b="x";e.appendChild(document.createTextNode(b));d.appendChild(e);c.appendChild(d);if(b=
de(c)){if(!a.options.md)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(ie(b)){if(!a.qa)throw Error("Existing toolbox has no categories.  Can't change mode.");a.options.md=b;a.qa.V(b)}else{if(!a.P)throw Error("Existing toolbox has categories.  Can't change mode.");a.options.md=b;a.P.show(b)}}else if(a.options.md)throw Error("Can't nullify an existing toolbox.");}
function Pi(a){if("bubble_open"==a.type&&"mutator"===a.hk&&a.If){a=(ed[a.Wa]||null).Jb(a.$);var b=a.type;if("procedures_defnoreturn"==b||"procedures_defreturn"==b)a=a.Ab.g,pj(a),vf(a,qj)}}function qj(a){"create"!=a.type&&"delete"!=a.type&&"change"!=a.type||pj(ed[a.Wa]||null)};function rj(){sj=this;this.cc=Object.create(null);this.Jf=Object.create(null)}var sj,tj={Shift:16,Control:17,Alt:18,Meta:91};rj.prototype.register=function(a,b){if(this.cc[a.name]&&!b)throw Error('Shortcut with name "'+a.name+'" already exists.');this.cc[a.name]=a};
rj.prototype.unregister=function(a){if(!this.cc[a])return console.warn('Keyboard shortcut with name "'+a+'" not found.'),!1;for(var b in this.Jf){var c=b,d=this.Jf[c],e=d.indexOf(a);-1<e&&(d.splice(e,1),0==d.length&&delete this.Jf[c])}delete this.cc[a];return!0};function R(a,b){var c=sj;a=String(a);var d=c.Jf[a];if(d)throw Error('Shortcut with name "'+b+'" collides with shortcuts '+d.toString());c.Jf[a]=[b]}
function uj(a,b){var c="";if(b){for(var d=kd(tj),e=0,f;f=b[e];e++)if(0>d.indexOf(f))throw Error(f+" is not a valid modifier key.");for(var h in tj)-1<b.indexOf(tj[h])&&(""!=c&&(c+="+"),c+=h)}""!=c&&a?c=c+"+"+a:a&&(c=a.toString());return c}new rj;function lf(a,b,c,d){this.j=a;this.name=b;this.type=c||"";this.re=d||fb();E(new (H("var_create"))(this))}lf.prototype.Ya=function(){return this.re};function vj(a,b){return a.name.localeCompare(b.name,void 0,{sensitivity:"base"})};var Ki={};function md(a){var b=jf(a);a=Object.create(null);for(var c=0;c<b.length;c++){var d=Ed(b[c]);if(d)for(var e=0;e<d.length;e++){var f=d[e],h=f.Ya();h&&(a[h]=f)}}b=[];for(h in a)b.push(a[h]);return b}var wj={};function Li(a){var b=[],c=document.createElement("button");c.setAttribute("text","%{BKY_NEW_VARIABLE}");c.setAttribute("callbackKey","CREATE_VARIABLE");$i(a,function(d){xj(d.zs())});b.push(c);a=yj(a);return b=b.concat(a)}
function yj(a){a=a.Ni("");var b=[];if(0<a.length){var c=a[a.length-1];if(If.variables_set){var d=J("block");d.setAttribute("type","variables_set");d.setAttribute("gap",If.math_change?8:24);d.appendChild(zj(c));b.push(d)}If.math_change&&(d=J("block"),d.setAttribute("type","math_change"),d.setAttribute("gap",If.variables_get?20:8),d.appendChild(zj(c)),c=sd('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(c),b.push(d));if(If.variables_get){a.sort(vj);
c=0;for(var e;e=a[c];c++)d=J("block"),d.setAttribute("type","variables_get"),d.setAttribute("gap",8),d.appendChild(zj(e)),b.push(d)}}return b}function xj(a){function b(c){Aj(c,function(d){if(d){var e=Bj(d,a);if(e){if(""==e.type)var f=q.VARIABLE_ALREADY_EXISTS.replace("%1",e.name);else f=q.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,f=f.replace("%1",e.name).replace("%2",e.type);nf(f,function(){b(d)})}else a.Ed(d,"")}})}b("")}
function Aj(a,b){Cj(q.NEW_VARIABLE_TITLE,a,function(c){c&&(c=c.replace(/[\s\xa0]+/g," ").trim(),c==q.RENAME_VARIABLE||c==q.NEW_VARIABLE)&&(c=null);b(c)})}function Bj(a,b){b=b.ea.uf();a=a.toLowerCase();for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a)return d;return null}function zj(a){var b=J("field");b.setAttribute("name","VAR");b.setAttribute("id",a.Ya());b.setAttribute("variabletype",a.type);b.appendChild(document.createTextNode(a.name));return b}
function Ad(a,b){a=a.uf();var c=[];if(b.length!=a.length)for(var d=0;d<a.length;d++){var e=a[d];-1==b.indexOf(e)&&c.push(e)}return c};var Ec=null,M=null,gf=[],Yi=null,Dj=null,Ej=null,Bc=null;function ej(a){for(;a.options.bb;)a=a.options.bb;var b=B(a),c=zi(a),d=b.parentNode;if(d){var e=d.offsetWidth;d=d.offsetHeight;c.width!=e&&(b.setAttribute("width",e+"px"),Vi(a,e,null));c.height!=d&&(b.setAttribute("height",d+"px"),Vi(a,null,d));a.resize()}}
function kj(a){var b=Ec;if(b&&!(Wa(a)||b.L&&!b.isVisible()))a:{var c=sj,d="";for(e in tj)a.getModifierState(e)&&(""!=d&&(d+="+"),d+=e);""!=d&&a.keyCode?d=d+"+"+a.keyCode:a.keyCode&&(d=a.keyCode.toString());d=c.Jf[d]||[];var e=0;for(var f;f=d[e];e++)if(f=c.cc[f],(!f.Ba||f.Ba(b))&&f.va&&f.va(b,a,f))break a}}function Fj(a){a.j.Ld||(F(!0),Ge(),a.u?a.m(!1,!0):a.m(!0,!0),F(!1))}
function Gj(a){if(a.Hf)a=null;else{for(var b=pd(a,!0),c=0,d;d=b.childNodes[c];c++)if("next"==d.nodeName.toLowerCase()){b.removeChild(d);break}c=a.aa();b.setAttribute("x",a.s?-c.x:c.x);b.setAttribute("y",c.y);a={xml:b,source:a.j,Ir:mb(a,!0)}}a&&(Yi=a.xml,Dj=a.source,Ej=a.Ir)}function Hj(){if(!Yi)return!1;var a=Dj;a.Ld&&(a=a.T);return Ej&&sf(a,Ej)?(F(!0),Xi(a),F(!1),!0):!1}
function Ge(a){We();kh();Jc();var b=!!a;Jb(Ec.$c,Nb).forEach(function(c){!b&&c.Xb&&c.Xb&&c.Xb.isVisible()&&(c.Xb.wb(),Ij(c,!1))})}function nf(a,b){alert(a);b&&b()}function of(a,b){b(confirm(a))}function Cj(a,b,c){c(prompt(a,b))}
function Jj(a){return function(){var b=a.type?'Block "'+a.type+'": ':"";if(a.output&&a.previousStatement)throw Error(b+"Must not have both an output and a previousStatement.");a.style&&a.style.Hc&&(this.Hc=a.style.Hc,a.style=null);if(a.style&&a.colour)throw Error(b+"Must not have both a colour and a style.");if(a.style){var c=a.style;try{this.td(c)}catch(y){console.warn(b+"Style does not exist: ",c)}}else if("colour"in a)if(void 0===a.colour)console.warn(b+"Undefined colour value.");else{c=a.colour;
try{this.Sf(c)}catch(y){console.warn(b+"Illegal colour value: ",c)}}for(c=0;void 0!==a["message"+c];){var d=a["args"+c]||[],e=a["lastDummyAlign"+c],f=b;var h=eb(a["message"+c],!0);for(var k=d.length,l=[],m=0,p=0;p<h.length;p++){var t=h[p];if("number"==typeof t){if(1>t||t>k)throw Error('Block "'+this.type+'": Message index %'+t+" out of range.");if(l[t])throw Error('Block "'+this.type+'": Message index %'+t+" duplicated.");l[t]=!0;m++}}if(m!=k)throw Error('Block "'+this.type+'": Message does not reference all '+
k+" arg(s).");k=[];for(l=0;l<h.length;l++){m=h[l];"number"==typeof m&&(m=d[m-1]);if("string"==typeof m&&(m=Hh(m),!m))continue;k.push(m)}(d=k.length)&&!Ih(k[d-1].type)&&(d={type:"input_dummy"},e&&(d.align=e),k.push(d));e=[];for(d=0;h=k[d];d++)if(Ih(h.type)){l=h;m=f;p={LEFT:-1,RIGHT:1,CENTRE:0,CENTER:0};h=null;switch(l.type){case "input_value":h=this.Vc(1,l.name);break;case "input_statement":h=this.Vc(3,l.name);break;case "input_dummy":h=this.Vc(5,l.name||"")}h?(l.check&&h.Ge(l.check),l.align&&(p=p[l.align.toUpperCase()],
void 0===p?console.warn(m+"Illegal align value: ",l.align):(l=h,l.align=p,l.o.L&&(l.o=l.o,l.o.V())))):h=null;if(h){for(l=0;m=e[l];l++)yh(h,m[0],m[1]);e.length=0}}else(l=Gh(this,h))&&e.push([l,h.name]);c++}void 0!==a.inputsInline&&this.Je(a.inputsInline);void 0!==a.output&&this.km(!0,a.output);void 0!==a.previousStatement&&this.Bj(!0,a.previousStatement);void 0!==a.nextStatement&&this.yj(!0,a.nextStatement);void 0!==a.tooltip&&(c=a.tooltip,c=db(c),this.Ke(c));void 0!==a.enableContextMenu&&(c=a.enableContextMenu,
this.contextMenu=!!c);void 0!==a.helpUrl&&(c=a.helpUrl,this.Cf=db(c));"string"==typeof a.extensions&&(console.warn(b+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+a.type+"' block."),a.extensions=[a.extensions]);void 0!==a.mutator&&Lf(a.mutator,this,!0);b=a.extensions;if(Array.isArray(b))for(c=0;c<b.length;++c)Lf(b[c],this,!1)}}
function Kj(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){var d=c.type;null==d||""===d?console.warn("Block definition #"+b+" in JSON array is missing a type attribute. Skipping."):(If[d]&&console.warn("Block definition #"+b+' in JSON array overwrites prior definition of "'+d+'".'),If[d]={X:Jj(c)})}else console.warn("Block definition #"+b+" in JSON array is "+c+". Skipping.")}};function Lj(a,b,c){"function"!=typeof a&&(Mj(a),a=JSON.parse(JSON.stringify(a)));this.bh=a;this.rm=this.Yl=this.Ki=null;a=this.bh;if(Array.isArray(a)){for(var d=!1,e=0;e<a.length;e++){var f=a[e][0];"string"==typeof f?a[e][0]=db(f):(null!=f.alt&&(a[e][0].alt=db(f.alt)),d=!0)}if(!(d||2>a.length)){f=[];for(e=0;e<a.length;e++)f.push(a[e][0]);var h=xa(f);e=ya(f,h);d=za(f,h);if((e||d)&&!(h<=e+d)){e&&(this.Yl=f[0].substring(0,e-1));d&&(this.rm=f[0].substr(1-d));f=[];for(h=0;h<a.length;h++){var k=a[h][0],
l=a[h][1];k=k.substring(e,k.length-d);f[h]=[k,l]}this.bh=f}}}this.Rf=Sf(this,!1)[0];Lj.i.constructor.call(this,this.Rf[1],b,c);this.Xf=this.ge=this.gd=this.rb=this.sh=null}I(Lj,mh);Lj.N=function(a){return new Lj(a.options,void 0,a)};Lj.prototype.Qk=function(a){Rf(this)&&Sf(this,!1);Hd(this,a.textContent)};Lj.prototype.kg=!0;var Nj=Ma?"\u25bc":"\u25be";g=Lj.prototype;g.zm="default";
g.Df=function(){!this.D().Fm||this.D().Fm&&!this.o.S?oh(this):this.mk=this.o.J();ph(this);this.gd=x(Yb,{},this.Ib);this.D().Cp?(this.Xf=x(Yb,{height:this.D().fg+"px",width:this.D().fg+"px"},this.Ib),this.Xf.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.D().Dp)):(this.ge=x(fc,{},this.Ua),this.ge.appendChild(document.createTextNode(this.o.s?Nj+" ":" "+Nj)),this.o.s?this.Ua.insertBefore(this.ge,this.Oe):this.Ua.appendChild(this.ge));this.za&&z(this.za,"blocklyDropdownRect")};
g.Le=function(a){this.Ik();this.rb.Ql=a&&"number"===typeof a.clientX?new r(a.clientX,a.clientY):null;this.rb.V(sc);z(this.rb.Qa,"blocklyDropdownMenu");if(this.D().Bp){a=this.o.S?this.o.getParent().Sk():this.o.Sk();var b=this.o.S?this.o.getParent().style.Bc:this.o.style.Bc;rc.style.backgroundColor=a;rc.style.borderColor=b}Cc(this,this.Jk.bind(this));this.rb.focus();this.sh&&this.rb.wc(this.sh);this.Ha()};
g.Ik=function(){var a=new Kh;a.vh("listbox");this.rb=a;var b=Sf(this,!1);this.sh=null;for(var c=0;c<b.length;c++){var d=b[c][0],e=b[c][1];if("object"==typeof d){var f=new Image(d.width,d.height);f.src=d.src;f.alt=d.alt||"";d=f}d=new Oh(d,e);d.vh("option");d.fm=this.o.s;d.kk=!0;a.vc.push(d);d.lk=e==this.Ga;e==this.Ga&&(this.sh=d);Ph(d,this.Bq,this)}};g.Jk=function(){this.rb&&this.rb.m();this.sh=this.rb=null;this.Ha()};g.Bq=function(a){vc===this&&Jc();Hd(this,a.Ga)};
function Rf(a){return"function"==typeof a.bh}function Sf(a,b){return Rf(a)?(a.Ki&&b||(a.Ki=a.bh.call(a),Mj(a.Ki)),a.Ki):a.bh}g.tf=function(a){for(var b=!1,c=Sf(this,!0),d=0,e;e=c[d];d++)if(e[1]==a){b=!0;break}return b?a:(this.o&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.o.type+", Field name: "+this.name+", Value: "+a),null)};g.Eg=function(a){Lj.i.Eg.call(this,a);a=Sf(this,!0);for(var b=0,c;c=a[b];b++)c[1]==this.Ga&&(this.Rf=c)};
g.Ha=function(){this.za&&(this.za.setAttribute("stroke",this.o.style.Bc),this.rb?this.za.setAttribute("fill",this.o.style.Bc):this.za.setAttribute("fill","transparent"));this.o&&this.ge&&(this.ge.style.fill=this.o.S?this.o.style.ui:this.o.style.Zc)};
g.Ee=function(){this.Oe.nodeValue="";this.gd.style.display="none";var a=this.Rf&&this.Rf[0];if(a&&"object"==typeof a){this.gd.style.display="";this.gd.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src);this.gd.setAttribute("height",a.height);this.gd.setAttribute("width",a.width);var b=Number(a.height);a=Number(a.width);var c=!!this.za,d=Math.max(c?this.D().Em:0,b+10);c=c?this.D().eg:0;if(this.Xf)var e=Oj(this,a+c,d/2-this.D().fg/2);else{e=this.D().Xe;var f=this.D().Ye,h=this.D().We;
e=pc(this.ge,e+"pt",f,h)}this.Bb.width=a+e+2*c;this.Bb.height=d;f=0;this.o.s?this.gd.setAttribute("x",c+e):(f=a+e,this.Ua.setAttribute("text-anchor","end"),this.gd.setAttribute("x",c));this.gd.setAttribute("y",d/2-b/2);rh(this,f+c,a+e)}else this.Oe.nodeValue=qh(this),z(this.Ua,"blocklyDropdownText"),this.Ua.setAttribute("text-anchor","start"),a=!!this.za,b=Math.max(a?this.D().Em:0,this.D().Xh),d=this.D().Xe,c=this.D().Ye,e=this.D().We,d=pc(this.Ua,d+"pt",c,e),a=a?this.D().eg:0,c=0,this.Xf&&(c=Oj(this,
d+a,b/2-this.D().fg/2)),this.Bb.width=d+c+2*a,this.Bb.height=b,rh(this,a,d);sh(this)};function Oj(a,b,c){if(!a.Xf)return 0;var d=a.za?a.D().eg:0,e=a.D().Ep,f=a.D().fg;a.Xf.setAttribute("transform","translate("+(a.o.s?d:b+e)+","+c+")");return f+e}g.Vk=function(){if(!this.Rf)return null;var a=this.Rf[0];return"object"==typeof a?a.alt:a};
function Mj(a){if(!Array.isArray(a))throw TypeError("FieldDropdown options must be an array.");if(!a.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var b=!1,c=0;c<a.length;++c){var d=a[c];Array.isArray(d)?"string"!=typeof d[1]?(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&"string"!=typeof d[0]&&"string"!=typeof d[0].src&&(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must have a string label or image description. Found"+
d[0]+" in: ",d)):(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must be an array. Found: ",d))}if(b)throw TypeError("Found invalid FieldDropdown options.");}C(Qc,"field_dropdown",Lj);function Pj(a,b,c){Pj.i.constructor.call(this,a?a.j.id:void 0);this.$=a?a.id:null;this.If=b;this.hk=c}I(Pj,Qd);Pj.prototype.type="bubble_open";Pj.prototype.R=function(){var a=Pj.i.R.call(this);a.isOpen=this.If;a.bubbleType=this.hk;a.blockId=this.$;return a};Pj.prototype.N=function(a){Pj.i.N.call(this,a);this.If=a.isOpen;this.hk=a.bubbleType;this.$=a.blockId};C(Pc,"bubble_open",Pj);function Qj(a){this.B=a;this.pb=null}g=Qj.prototype;g.iq=!0;g.ei=17;g.Wc=null;g.Qi=null;
function ji(a){if(!a.pb){a.pb=x(Xb,{"class":"blocklyIconGroup"},null);a.B.Za&&z(a.pb,"blocklyIconGroupReadonly");var b=a.pb;x(cc,{"class":"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},b);x($b,{"class":"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},b);
x(Pb,{"class":"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},b);a.B.J().appendChild(a.pb);u(a.pb,"mouseup",a,a.bl);a.Re()}}g.m=function(){A(this.pb);this.pb=null;this.ta(!1);this.B=null};g.Re=function(){};g.isVisible=function(){return!!this.Wc};g.bl=function(a){this.B.j.Ra()||this.B.Za||ab(a)||this.ta(!this.isVisible())};g.Ha=function(){this.isVisible()&&this.Wc.Sf(this.B.style.Zc)};function ng(a,b){a.Qi=b;a.isVisible()&&(a=a.Wc,a.Da=b,a.dm&&wg(a))}
function mi(a){var b=a.B.aa(),c=Xa(a.pb);b=new r(b.x+c.x+a.ei/2,b.y+c.y+a.ei/2);sa(a.Qi,b)||ng(a,b)};function Rj(a){Rj.i.constructor.call(this,null);this.Mo=a}I(Rj,Qj);g=Rj.prototype;g.g=null;g.cg=0;g.Nh=0;g.bl=function(a){this.B.yb()&&Qj.prototype.bl.call(this,a)};
function Sj(a){a.Dh=x(dc,{x:xg,y:xg},null);if(a.Mo.length)for(var b=J("xml"),c=0,d;d=a.Mo[c];c++){var e=J("block");e.setAttribute("type",d);b.appendChild(e)}else b=null;c=new je({disable:!1,parentWorkspace:a.B.j,media:a.B.j.options.jh,rtl:a.B.s,renderer:a.B.j.options.uj,rendererOverrides:a.B.j.options.vj});c.Cb=a.B.s?3:2;if(d=!!b)c.md=de(b);a.g=new Ii(c);a.g.Vg=!0;vf(a.g,gd);b=d?Ui(a.g,Xb):null;c=a.g.ya("blocklyMutatorBackground");b&&c.insertBefore(b,a.g.ua);a.Dh.appendChild(c);return a.Dh}
g.Re=function(){Rj.i.Re.call(this);this.B.Za||(this.B.yb()?this.pb&&jc(this.pb,"blocklyIconGroupReadonly"):(this.ta(!1),this.pb&&z(this.pb,"blocklyIconGroupReadonly")))};
function Tj(a){var b=2*xg,c=a.g.ua.getBBox(),d=c.width+c.x,e=c.height+3*b,f=wi(a.g);if(f){var h=f.g.sb.Gd();e=Math.max(e,h.height+20);d+=f.Hd()}a.B.s&&(d=-c.x);d+=3*b;if(Math.abs(a.cg-d)>b||Math.abs(a.Nh-e)>b)a.cg=d,a.Nh=e,yg(a.Wc,d+b,e+b),a.Dh.setAttribute("width",a.cg),a.Dh.setAttribute("height",a.Nh),Vi(a.g,a.cg,a.Nh);a.B.s&&a.g.ua.setAttribute("transform","translate("+a.cg+",0)");a.g.resize()}g.Tq=function(){this.g&&Si(this.g)};
g.ta=function(a){if(a!=this.isVisible())if(E(new (H("bubble_open"))(this.B,a,"mutator")),a){this.Wc=new ug(this.B.j,Sj(this),this.B.wa.Ca,this.Qi);Eg(this.Wc,this.B.id);this.Wc.Bl=this.Tq.bind(this);var b=this.g.options.md;a=wi(this.g);b&&(a.X(this.g),a.show(b));this.Pc=this.B.Cg(this.g);b=nb(this.Pc,!1);for(var c=0,d;d=b[c];c++)d.V();this.Pc.xj(!1);this.Pc.wk=!1;a?(b=2*a.na,a=this.Pc.s?a.Hd()+b:b):a=b=16;this.B.s&&(a=-a);this.Pc.moveBy(a,b);if(this.B.gm){var e=this,f=this.B;f.gm(this.Pc);this.Ej=
function(){f.gm(e.Pc)};vf(this.B.j,this.Ej)}Tj(this);vf(this.g,this.Mr.bind(this));this.Ha()}else this.Dh=null,this.g.m(),this.Pc=this.g=null,this.Wc.m(),this.Wc=null,this.Nh=this.cg=0,this.Ej&&(lb(this.B.j.Ja,this.Ej),this.Ej=null)};
g.Mr=function(a){if(!(a.kl||"change"==a.type&&"disabled"==a.element)){if(!this.g.Ra()){a=this.g.sa(!1);for(var b=0,c;c=a[b];b++){var d=c.aa();20>d.y&&c.moveBy(0,20-d.y);if(c.s){var e=-20,f=wi(this.g);f&&(e-=f.Hd());d.x>e&&c.moveBy(e-d.x,0)}else 20>d.x&&c.moveBy(20-d.x,0)}}if(this.Pc.j==this.g){F(!0);c=this.B;a=(a=c.$b())&&rd(a);b=c.L;c.L=!1;c.sg(this.Pc);c.L=b;c.hd();c.L&&c.V();b=(b=c.$b())&&rd(b);if(a!=b){E(new (H("change"))(c,"mutation",null,a,b));var h=Zc;setTimeout(function(){F(h);c.Ma();F(!1)},
250)}this.g.Ra()||Tj(this);F(!1)}}};g.m=function(){this.B.Ab=null;Qj.prototype.m.call(this)};function Uj(a,b,c){if(a&&a.F().j){c=L(b,c).connection;var d=a.I();d&&d!=b||c.K==a||(c.isConnected()&&c.disconnect(),c.connect(a))}};Kj([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,
nextStatement:null,colour:"%{BKY_LOGIC_HUE}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",colour:"%{BKY_LOGIC_HUE}",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",
extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",colour:"%{BKY_LOGIC_HUE}",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",
name:"BOOL",check:"Boolean"}],output:"Boolean",colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",
helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]);
Kj([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,
colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);Kf("logic_op_tooltip",Pf({EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"}));
(function(a,b,c,d){var e='Error when registering mutator "'+a+'": ';Of(e,b.cd,"domToMutation");Of(e,b.$b,"mutationToDom");var f=Nf(b,e);if(c&&"function"!=typeof c)throw Error('Extension "'+a+'" is not a function');Kf(a,function(){if(f){if(!Rj)throw Error(e+"Missing require for Blockly.Mutator");this.To(new Rj(d||[]))}Fh(this,b);c&&c.apply(this)})})("controls_if_mutator",{Hb:0,oc:0,Hj:!0,$b:function(){if(!this.Hb&&!this.oc)return null;var a=J("mutation");this.Hb&&a.setAttribute("elseif",this.Hb);this.oc&&
a.setAttribute("else",1);return a},cd:function(a){this.Hb=parseInt(a.getAttribute("elseif"),10)||0;this.oc=parseInt(a.getAttribute("else"),10)||0;this.ir()},Cg:function(a){var b=a.Lf("controls_if_if");b.hd();for(var c=b.C,d=1;d<=this.Hb;d++){var e=a.Lf("controls_if_elseif");e.hd();c.connect(e.G);c=e.C}this.oc&&(a=a.Lf("controls_if_else"),a.hd(),c.connect(a.G));return b},sg:function(a){a=a.C.I();this.oc=this.Hb=0;for(var b=[null],c=[null],d=null;a&&!a.zb();){switch(a.type){case "controls_if_elseif":this.Hb++;
b.push(a.Jr);c.push(a.qm);break;case "controls_if_else":this.oc++;d=a.qm;break;default:throw TypeError("Unknown block type: "+a.type);}a=a.C&&a.C.I()}this.ep();this.No(b,c,d)},gm:function(a){a=a.C.I();for(var b=1;a;){switch(a.type){case "controls_if_elseif":var c=L(this,"IF"+b),d=L(this,"DO"+b);a.Jr=c&&c.connection.K;a.qm=d&&d.connection.K;b++;break;case "controls_if_else":d=L(this,"ELSE");a.qm=d&&d.connection.K;break;default:throw TypeError("Unknown block type: "+a.type);}a=a.C&&a.C.I()}},ir:function(){var a=
[null],b=[null],c=null;L(this,"ELSE")&&(c=L(this,"ELSE").connection.K);for(var d=1;L(this,"IF"+d);){var e=L(this,"DO"+d);a.push(L(this,"IF"+d).connection.K);b.push(e.connection.K);d++}this.ep();this.No(a,b,c)},ep:function(){L(this,"ELSE")&&this.Pf("ELSE");for(var a=1;L(this,"IF"+a);)this.Pf("IF"+a),this.Pf("DO"+a),a++;for(a=1;a<=this.Hb;a++)yh(this.Vc(1,"IF"+a).Ge("Boolean"),q.CONTROLS_IF_MSG_ELSEIF),yh(this.Vc(3,"DO"+a),q.CONTROLS_IF_MSG_THEN);this.oc&&yh(this.Vc(3,"ELSE"),q.CONTROLS_IF_MSG_ELSE)},
No:function(a,b,c){for(var d=1;d<=this.Hb;d++)Uj(a[d],this,"IF"+d),Uj(b[d],this,"DO"+d);Uj(c,this,"ELSE")}},null,["controls_if_elseif","controls_if_else"]);Kf("controls_if_tooltip",function(){this.Ke(function(){if(this.Hb||this.oc){if(!this.Hb&&this.oc)return q.CONTROLS_IF_TOOLTIP_2;if(this.Hb&&!this.oc)return q.CONTROLS_IF_TOOLTIP_3;if(this.Hb&&this.oc)return q.CONTROLS_IF_TOOLTIP_4}else return q.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))});
var Vj={onchange:function(a){this.lh||(this.lh=[null,null]);var b=Jh(this,"A"),c=Jh(this,"B");b&&c&&!df(b.u,c.u)&&(F(a.group),a=this.lh[0],a!==b&&(Od(b),!a||a.Vb||a.S||L(this,"A").connection.connect(a.u)),b=this.lh[1],b!==c&&(Od(c),!b||b.Vb||b.S||L(this,"B").connection.connect(b.u)),this.Ma(),F(!1));this.lh[0]=Jh(this,"A");this.lh[1]=Jh(this,"B")}};Kf("logic_compare",function(){Fh(this,Vj)});
(function(a,b){if(!b||"object"!=typeof b)throw Error('Error: Mixin "'+a+'" must be a object');Kf(a,function(){Fh(this,b)})})("logic_ternary",{Lo:null,onchange:function(a){var b=Jh(this,"THEN"),c=Jh(this,"ELSE"),d=this.u.K;if((b||c)&&d)for(var e=0;2>e;e++){var f=1==e?b:c;f&&!df(f.u,d)&&(F(a.group),d===this.Lo?(Od(this),d.F().Ma()):(Od(f),f.Ma()),F(!1))}this.Lo=d}});function Wj(a,b,c){this.Uo=!0;Wj.i.constructor.call(this,a,b,c);this.lj=this.kj=this.Lb=null;this.Ji=!1;this.g=null}I(Wj,mh);Wj.prototype.dg="";Wj.N=function(a){var b=db(a.text);return new Wj(b,void 0,a)};g=Wj.prototype;g.kg=!0;g.zm="text";g.ad=function(a){Wj.i.ad.call(this,a);"boolean"==typeof a.spellcheck&&(this.Uo=a.spellcheck)};
g.Df=function(){if(this.D().Hm){for(var a=0,b=0,c=0,d;d=this.o.A[c];c++){for(var e=0;d.ga[e];e++)a++;d.connection&&b++}this.Ji=1>=a&&this.o.u&&!b}else this.Ji=!1;this.Ji?this.mk=this.o.J():oh(this);ph(this)};g.tf=function(a){return null===a||void 0===a?null:String(a)};g.tn=function(){if(this.Ff){this.jl=!1;var a=this.Ga;this.Ga=this.Lb.ap;this.o&&0==D&&E(new (H("change"))(this.o,"field",this.name||null,a,this.Ga))}};g.Eg=function(a){this.jl=!0;this.Ga=a;this.Ff||(this.kd=!0)};
g.Ha=function(){this.o&&this.D().Hm&&(this.za?this.za.setAttribute("stroke",this.o.style.Bc):this.o.wa.Ca.setAttribute("fill",this.D().Cm))};g.Ee=function(){Wj.i.Ee.call(this);if(this.Ff){Xj(this);var a=this.Lb;this.jl?(jc(a,"blocklyInvalidInput"),Ye(a,"invalid",!1)):(z(a,"blocklyInvalidInput"),Ye(a,"invalid",!0))}};g.Le=function(a,b){this.g=this.o.j;a=b||!1;!a&&(Ta||Ma||Oa)?Yj(this):(jh(this,this.o.s,this.Lr.bind(this)),this.Lb=this.xm(),this.Ff=!0,a||(this.Lb.focus({preventScroll:!0}),this.Lb.select()))};
function Yj(a){Cj(q.CHANGE_VALUE_TITLE,th(a),function(b){null!==b&&Hd(this,b)}.bind(a))}
g.xm=function(){var a=eh;z(nh(this),"editing");var b=document.createElement("input");b.className="blocklyHtmlInput";b.setAttribute("spellcheck",this.Uo);var c=Zi(this.g),d=this.D().Xe*c+"pt";a.style.fontSize=d;b.style.fontSize=d;d=4*c+"px";if(this.Ji){d=Dc(this);d=(d.bottom-d.top)/2+"px";var e=this.o.getParent()?this.o.getParent().style.Bc:this.o.style.Bc;b.style.border=1*c+"px solid "+e;a.style.borderRadius=d;a.style.transition="box-shadow 0.25s ease 0s";this.D().Fp&&(a.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+
4*c+"px")}b.style.borderRadius=d;a.appendChild(b);b.value=b.defaultValue=String(this.Ga);b.ap=this.Ga;b.wo=null;Xj(this);this.kj=u(b,"keydown",this,this.Ml);this.lj=u(b,"input",this,this.Wq);return b};g.Lr=function(){this.Ff=!1;this.jl=!0;uh(this);this.Vq&&this.Vq(this.Ga);this.kj&&(v(this.kj),this.kj=null);this.lj&&(v(this.lj),this.lj=null);var a=eh.style;a.width="auto";a.height="auto";a.fontSize="";a.transition="";a.boxShadow="";this.Lb=null;jc(nh(this),"editing")};
g.Ml=function(a){if(13==a.keyCode)kh(),Jc();else if(27==a.keyCode)Hd(this,this.Lb.ap),kh(),Jc();else if(9==a.keyCode){kh();Jc();var b=this.o,c=!a.shiftKey,d=new hi;bh(d,Af(this));var e=d.Gb;c?d.next():d.pd();(c=d.Gb)&&c!==e&&(e=c.O,Hf(e)&&e.Le(void 0),b.j.Kf&&bh(b.j.vf(),c));a.preventDefault()}};g.Wq=function(){var a=this.Lb.value;a!==this.Lb.wo&&(this.Lb.wo=a,F(!0),Hd(this,a),uh(this),Xj(this),F(!1))};
function Xj(a){var b=eh,c=Dc(a);b.style.width=c.right-c.left+"px";b.style.height=c.bottom-c.top+"px";a=new r(a.o.s?c.right-b.offsetWidth:c.left,c.top);b.style.left=a.x+"px";b.style.top=a.y+"px"}g.Wn=function(){return!0};g.Vk=function(){return this.Ff&&this.Lb?this.Lb.value:null};C(Qc,"field_input",Wj);function Zj(a,b,c){this.rg=!1;this.De=0;this.kp=360;this.rh=15;Zj.i.constructor.call(this,a,b,c);this.ij=this.ri=this.si=this.aj=this.Kg=this.xn=null}I(Zj,Wj);Zj.prototype.dg=0;Zj.N=function(a){return new Zj(a.angle,void 0,a)};g=Zj.prototype;g.kg=!0;
g.ad=function(a){Zj.i.ad.call(this,a);switch(a.mode){case "compass":this.rg=!0;this.De=90;break;case "protractor":this.rg=!1,this.De=0}var b=a.clockwise;"boolean"==typeof b&&(this.rg=b);b=a.offset;null!=b&&(b=Number(b),isNaN(b)||(this.De=b));b=a.wrap;null!=b&&(b=Number(b),isNaN(b)||(this.kp=b));a=a.round;null!=a&&(a=Number(a),isNaN(a)||(this.rh=a))};g.Df=function(){Zj.i.Df.call(this);this.Xo=x(fc,{},null);this.Xo.appendChild(document.createTextNode("\u00b0"));this.Ua.appendChild(this.Xo)};
g.Ee=function(){Zj.i.Ee.call(this);ak(this)};g.Le=function(a){Zj.i.Le.call(this,a,Ta||Ma||Oa);this.Ik();sc.appendChild(this.xn);a=this.o.style.Bc;rc.style.backgroundColor=this.o.style.Zc;rc.style.borderColor=a;Cc(this,this.Jk.bind(this));ak(this)};
g.Ik=function(){var a=x(dc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",height:"100px",width:"100px",style:"touch-action: none"},null),b=x(Pb,{cx:50,cy:50,r:49,"class":"blocklyAngleCircle"},a);this.Kg=x($b,{"class":"blocklyAngleGauge"},a);this.aj=x(Zb,{x1:50,y1:50,"class":"blocklyAngleLine"},a);for(var c=0;360>c;c+=15)x(Zb,{x1:99,y1:50,x2:99-(0==c%45?10:5),y2:50,"class":"blocklyAngleMarks",transform:"rotate("+
c+",50,50)"},a);this.si=u(a,"click",this,this.Jq);this.ri=u(b,"click",this,this.Bo,!0,!0);this.ij=u(b,"mousemove",this,this.Bo,!0,!0);this.xn=a};g.Jk=function(){this.si&&(v(this.si),this.si=null);this.ri&&(v(this.ri),this.ri=null);this.ij&&(v(this.ij),this.ij=null);this.aj=this.Kg=null};g.Jq=function(){vc===this&&Ic();kh()};
g.Bo=function(a){var b=this.Kg.ownerSVGElement.getBoundingClientRect(),c=a.clientX-b.left-50;a=a.clientY-b.top-50;b=Math.atan(-a/c);isNaN(b)||(b=180*b/Math.PI,0>c?b+=180:0<a&&(b+=360),b=this.rg?this.De+360-b:360-(this.De-b),bk(this,b))};function bk(a,b){a.rh&&(b=Math.round(b/a.rh)*a.rh);b=ck(a,b);b!=a.Ga&&(a.kd=!0,a.Ff&&(a.Lb.value=String(b)),Hd(a,b))}
function ak(a){if(a.Kg){var b=(Number(th(a))+a.De)%360*Math.PI/180,c=["M ",50,",",50],d=50,e=50;if(!isNaN(b)){var f=Number(a.rg),h=a.De*Math.PI/180,k=49*Math.cos(h),l=-49*Math.sin(h);f&&(b=2*h-b);d+=49*Math.cos(b);e-=49*Math.sin(b);b=Math.abs(Math.floor((b-h)/Math.PI)%2);f&&(b=1-b);c.push(" l ",k,",",l," A ",49,",",49," 0 ",b," ",f," ",d,",",e," z")}a.Kg.setAttribute("d",c.join(""));a.aj.setAttribute("x2",d);a.aj.setAttribute("y2",e)}}
g.Ml=function(a){Zj.i.Ml.call(this,a);var b;37===a.keyCode?b=this.o.s?1:-1:39===a.keyCode?b=this.o.s?-1:1:40===a.keyCode?b=-1:38===a.keyCode&&(b=1);b&&(bk(this,this.Ga+b*this.rh),a.preventDefault(),a.stopPropagation())};g.tf=function(a){a=Number(a);return isNaN(a)||!isFinite(a)?null:ck(this,a)};function ck(a,b){b%=360;0>b&&(b+=360);b>a.kp&&(b-=360);return b}var dk=".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",");
if(Yd)throw Error("CSS already injected");Array.prototype.push.apply(Zd,dk);dk.length=0;C(Qc,"field_angle",Zj);function ek(a,b,c,d,e,f){this.eh=-Infinity;this.ah=Infinity;this.Of=0;this.tk=null;ek.i.constructor.call(this,a,e,f);f||(fk(this,b),gk(this,c),hk(this,d),Hd(this,this.Ga))}I(ek,Wj);ek.prototype.dg=0;ek.N=function(a){return new ek(a.value,void 0,void 0,void 0,void 0,a)};ek.prototype.kg=!0;ek.prototype.ad=function(a){ek.i.ad.call(this,a);fk(this,a.min);gk(this,a.max);hk(this,a.precision)};function fk(a,b){null==b?a.eh=-Infinity:(b=Number(b),isNaN(b)||(a.eh=b))}
function gk(a,b){null==b?a.ah=Infinity:(b=Number(b),isNaN(b)||(a.ah=b))}function hk(a,b){a.Of=Number(b)||0;var c=String(a.Of);-1!=c.indexOf("e")&&(c=a.Of.toLocaleString("en-US",{maximumFractionDigits:20}));var d=c.indexOf(".");a.tk=-1==d?b?0:null:c.length-d-1}
ek.prototype.tf=function(a){if(null===a)return null;a=String(a);a=a.replace(/O/ig,"0");a=a.replace(/,/g,"");a=a.replace(/infinity/i,"Infinity");a=Number(a||0);if(isNaN(a))return null;a=Math.min(Math.max(a,this.eh),this.ah);this.Of&&isFinite(a)&&(a=Math.round(a/this.Of)*this.Of);null!=this.tk&&(a=Number(a.toFixed(this.tk)));return a};ek.prototype.xm=function(){var a=ek.i.xm.call(this);-Infinity<this.eh&&Ye(a,"valuemin",this.eh);Infinity>this.ah&&Ye(a,"valuemax",this.ah);return a};
C(Qc,"field_number",ek);function Ch(a){this.fh=a}g=Ch.prototype;g.ef=null;g.Uc=null;g.Pj="  ";g.sp=60;g.di=[];g.Ui=null;function ik(a,b){return b+a.replace(/(?!\n$)\n/g,"\n"+b)}
function jk(a,b){!1===a.Ui&&console.warn("Generator init was not called before blockToCode was called.");if(!b)return"";if(!b.isEnabled())return jk(a,ob(b));if(b.zb())return jk(a,od(b,!1)[0]);var c=a[b.type];if("function"!=typeof c)throw Error('Language "'+a.fh+'" does not know how to generate code for block type "'+b.type+'".');c=c.call(b,b);if(Array.isArray(c)){if(!b.u)throw TypeError("Expecting string from statement block: "+b.type);return[a.hm(b,c[0]),c[1]]}if("string"==typeof c)return a.ef&&
!b.Hj&&(c=kk(a.ef,b)+c),a.Uc&&!b.Hj&&(c+=kk(a.Uc,b)),a.hm(b,c);if(null===c)return"";throw SyntaxError("Invalid code generated: "+c);}
function lk(a,b,c,d){if(isNaN(d))throw TypeError("Expecting valid order from block: "+b.type);var e=Jh(b,c);if(!e)return"";c=jk(a,e);if(""===c)return"";if(!Array.isArray(c))throw TypeError("Expecting tuple from value block: "+e.type);b=c[0];c=c[1];if(isNaN(c))throw TypeError("Expecting valid order from value block: "+e.type);if(!b)return"";e=!1;var f=Math.floor(d),h=Math.floor(c);if(f<=h&&(f!=h||0!=f&&99!=f))for(e=!0,f=0;f<a.di.length;f++)if(a.di[f][0]==d&&a.di[f][1]==c){e=!1;break}e&&(b="("+b+")");
return b}function mk(a,b){var c=S;a=Jh(a,b);b=jk(c,a);if("string"!=typeof b)throw TypeError("Expecting code from statement block: "+(a&&a.type));b&&(b=ik(b,c.Pj));return b}function kk(a,b){b=b.id.replace(/\$/g,"$$$$");return a.replace(/%1/g,"'"+b+"'")}g.Wj="";function nk(a){var b=S;b.Wj+=a+","}g.X=function(){this.vk=Object.create(null);this.uq=Object.create(null)};g.hm=function(a,b){return b};g.finish=function(a){delete this.vk;delete this.uq;return a};g.Ro=function(a){return a};var S=new Ch("JavaScript");nk("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(n).join(","));S.Nm=0;S.fs=1.1;S.ci=1.2;S.cf=2;S.$r=3;S.Vr=3;S.Qr=4.1;S.hs=4.2;S.Uj=4.3;S.Rj=4.4;S.gs=4.5;S.js=4.6;S.Wr=4.7;S.Or=4.8;
S.Yr=5;S.Om=5.1;S.Xr=5.2;S.ds=5.3;S.Qm=6.1;S.$h=6.2;S.Sr=7;S.Pm=8;S.Zr=8;S.bs=8;S.Rp=9;S.Pr=10;S.Tr=11;S.Rr=12;S.bi=13;S.Sj=14;S.ai=15;S.Nr=16;S.ks=17;S.Ur=18;S.Tj=99;S.di=[[S.cf,S.ci],[S.cf,S.cf],[S.ci,S.ci],[S.ci,S.cf],[S.Rj,S.Rj],[S.Om,S.Om],[S.$h,S.$h],[S.bi,S.bi],[S.Sj,S.Sj]];S.Ui=!1;
S.X=function(a){Object.getPrototypeOf(this).X.call(this);this.Pd?this.Pd.reset():this.Pd=new lj(this.Wj);this.Pd.nm(a.ea);for(var b=this.Pd,c=md(a),d=0;d<c.length;d++)mj(b,c[d].Ya(),"VARIABLE");b=this.Pd;c=nj(a);c=c[0].concat(c[1]);for(d=0;d<c.length;d++)mj(b,c[d][0],"PROCEDURE");b=[];c=jf(a);d=Object.create(null);for(var e=0,f;f=c[e];e++){var h=f.xs;!h&&f.xq&&(h=f.xq,wj[f.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+f.type+"')"),wj[f.type]=
!0));if(h)for(f=h(),h=0;h<f.length;h++)d[f[h]]=!0}d=Object.keys(d);for(c=0;c<d.length;c++)b.push(mj(this.Pd,d[c],"DEVELOPER_VARIABLE"));a=md(a);for(c=0;c<a.length;c++)b.push(mj(this.Pd,a[c].Ya(),"VARIABLE"));b.length&&(this.vk.variables="var "+b.join(", ")+";");this.Ui=!0};S.finish=function(a){var b=kd(this.vk);a=Object.getPrototypeOf(this).finish.call(this,a);this.Ui=!1;this.Pd.reset();return b.join("\n\n")+"\n\n\n"+a};S.Ro=function(a){return a+";\n"};
S.gr=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};S.Cs=function(a){return a.split(/\n/g).map(this.gr).join(" + '\\n' +\n")};
S.hm=function(a,b){var c="";if(!a.u||!a.u.K){var d=a.mc.text;d&&(d=Aa(d,this.sp-3),c+=ik(d+"\n","// "));for(var e=0;e<a.A.length;e++)if(1==a.A[e].type){var f=a.A[e].connection.I();if(f){d=[];f=nb(f,!0);for(var h=0;h<f.length;h++){var k=f[h].mc.text;k&&d.push(k)}d.length&&d.push("");(d=d.join("\n"))&&(c+=ik(d,"// "))}}}a=a.C&&a.C.I();a=jk(this,a);return c+b+a};
S.ws=function(a,b,c,d,e){c=c||0;e=e||this.Tj;a.j.options.oj&&c--;var f=a.j.options.oj?"1":"0";a=0<c?lk(this,a,b,this.$h)||f:0>c?lk(this,a,b,this.Qm)||f:d?lk(this,a,b,this.Uj)||f:lk(this,a,b,e)||f;if(/^\s*-?\d+(\.\d+)?\s*$/.test(a))a=Number(a)+c,d&&(a=-a);else{if(0<c){a=a+" + "+c;var h=this.$h}else 0>c&&(a=a+" - "+-c,h=this.Qm);d&&(a=c?"-("+a+")":"-"+a,h=this.Uj);h=Math.floor(h);e=Math.floor(e);h&&e>=h&&(a="("+a+")")}return a};S.Bs={};S.controls_if=function(a){var b=0,c="";S.ef&&(c+=kk(S.ef,a));do{var d=lk(S,a,"IF"+b,S.Tj)||"false";var e=mk(a,"DO"+b);S.Uc&&(e=ik(kk(S.Uc,a),S.Pj)+e);c+=(0<b?" else ":"")+"if ("+d+") {\n"+e+"}";++b}while(L(a,"IF"+b));if(L(a,"ELSE")||S.Uc)e=mk(a,"ELSE"),S.Uc&&(e=ik(kk(S.Uc,a),S.Pj)+e),c+=" else {\n"+e+"}";return c+"\n"};
S.logic_compare=function(a){var b={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[mf(a,"OP")],c="=="==b||"!="==b?S.Rp:S.Pm,d=lk(S,a,"A",c)||"0";a=lk(S,a,"B",c)||"0";return[d+" "+b+" "+a,c]};S.logic_operation=function(a){var b="AND"==mf(a,"OP")?"&&":"||",c="&&"==b?S.bi:S.Sj,d=lk(S,a,"A",c);a=lk(S,a,"B",c);if(d||a){var e="&&"==b?"true":"false";d||(d=e);a||(a=e)}else a=d="false";return[d+" "+b+" "+a,c]};S.logic_negate=function(a){var b=S.Rj;return["!"+(lk(S,a,"BOOL",b)||"true"),b]};
S.logic_boolean=function(a){return["TRUE"==mf(a,"BOOL")?"true":"false",S.Nm]};S.logic_ternary=function(a){var b=lk(S,a,"IF",S.ai)||"false",c=lk(S,a,"THEN",S.ai)||"null";a=lk(S,a,"ELSE",S.ai)||"null";return[b+" ? "+c+" : "+a,S.ai]};var ok={am:"\u12a0\u121b\u122d\u129b",ar:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",be:"\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0456","be-tarask":"Tara\u0161kievica",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",bn:"\u09ac\u09be\u0982\u09b2\u09be",br:"Brezhoneg",ca:"Catal\u00e0",cs:"\u010cesky",da:"Dansk",de:"Deutsch",el:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",en:"English",eo:"Esperanto",es:"Espa\u00f1ol",eu:"Euskara",fa:"\u0641\u0627\u0631\u0633\u06cc",
fi:"Suomi",fo:"F\u00f8royskt",fr:"Fran\u00e7ais",gl:"Galego",ha:"Hausa",he:"\u05e2\u05d1\u05e8\u05d9\u05ea",hi:"\u0939\u093f\u0928\u094d\u0926\u0940",hr:"Hrvatski",hu:"Magyar",hy:"\u0570\u0561\u0575\u0565\u0580\u0567\u0576",ia:"Interlingua",id:"Bahasa Indonesia",ig:"As\u1ee5s\u1ee5 Igbo",is:"\u00cdslenska",it:"Italiano",ja:"\u65e5\u672c\u8a9e",kab:"Taqbaylit",kn:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",ko:"\ud55c\uad6d\uc5b4",lt:"Lietuvi\u0173",lv:"Latvie\u0161u",ms:"Bahasa Melayu",my:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c",
nb:"Norsk (bokm\u00e5l)",nl:"Nederlands, Vlaams",pl:"Polski",pms:"Piemont\u00e8is",pt:"Portugu\u00eas","pt-br":"Portugu\u00eas Brasileiro",ro:"Rom\u00e2n\u0103",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",sc:"Sardu",sk:"Sloven\u010dina",sl:"Sloven\u0161\u010dina",sq:"Shqip",sr:"\u0421\u0440\u043f\u0441\u043a\u0438","sr-latn":"Srpski",sv:"Svenska",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",ti:"\u1275\u130d\u122d\u129b",tr:"T\u00fcrk\u00e7e",uk:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",
ur:"\u0627\u064f\u0631\u062f\u064f\u0648\u202c",vi:"Ti\u1ebfng Vi\u1ec7t",yo:"\u00c8d\u00e8 Yor\u00f9b\u00e1","zh-hans":"\u7b80\u4f53\u4e2d\u6587","zh-hant":"\u6b63\u9ad4\u4e2d\u6587"},pk=window.BlocklyGamesLang,qk=window.BlocklyGamesLanguages,rk=["ar","fa","he","ur"].includes(pk),sk=/\.html$/.test(window.location.pathname),T=document.getElementById.bind(document);
function tk(a){try{if(a.lineno||a.colno){var b=Date.now();if(!(tk.Yn+1E4>b)){tk.Yn=b;var c=new XMLHttpRequest,d="error="+encodeURIComponent(a.error&&a.error.stack||a.message+" "+a.filename+" "+a.lineno+":"+a.colno)+"&amp;url="+encodeURIComponent(window.location);c.open("POST","/errorReporter");c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");c.send(d);console.log("Error reported.")}}}catch(e){console.log(a.error)}}tk.Yn=0;sk||window.addEventListener("error",tk);
var U,uk=Math,vk=uk.floor,wk=Number,xk,yk=window.location.search.match(RegExp("[?&]level=([^&]+)"));xk=yk?decodeURIComponent(yk[1].replace(/\+/g,"%20")):"NaN";var zk=vk.call(uk,wk(xk));U=isNaN(zk)?1:Math.max(1,Math.min(zk,10));
function Ak(a){document.title=V("Games.name",!1)+(a&&" : ")+a;document.dir=rk?"rtl":"ltr";document.head.parentElement.setAttribute("lang",pk);if(a=T("languageMenu")){for(var b=[],c=ba(qk),d=c.next();!d.done;d=c.next())d=d.value,b.push([ok[d],d]);b.sort(function(e,f){return e[0]>f[0]?1:e[0]<f[0]?-1:0});a.options.length=0;b=ba(b);for(c=b.next();!c.done;c=b.next())d=ba(c.value),c=d.next().value,d=d.next().value,c=new Option(c,d),d===pk&&(c.selected=!0),a.options.add(c);1>=a.options.length&&(a.style.display=
"none")}for(a=1;10>=a;a++)b=T("level"+a),c=!!Bk(a),b&&c&&(b.className+=" level_done");(a=document.querySelector('meta[name="viewport"]'))&&725>screen.availWidth&&a.setAttribute("content","width=725, initial-scale=.35, user-scalable=no");sk||setTimeout(Ck,1)}function Bk(a){var b=Dk;try{var c=window.localStorage[b+a]}catch(d){}return c}
function Ek(a,b){if(!a)throw TypeError("Element not found: "+a);"string"===typeof a&&(a=T(a));a.addEventListener("click",b,!0);a.addEventListener("touchend",function(c){c.preventDefault();b(c)},!0)}function Fk(a){a%=360;0>a&&(a+=360);return a}function V(a,b){a=window.BlocklyGamesMsg[a];void 0===a&&(a="[Unknown message: ${name}]");return b?Gk(a):a}function Gk(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}
function Ck(){function a(c){(a.q=a.q||[]).push(arguments)}window.GoogleAnalyticsObject="GoogleAnalyticsFunction";window.GoogleAnalyticsFunction=a;a.l=1*new Date;var b=document.createElement("script");b.async=1;b.src="//www.google-analytics.com/analytics.js";document.head.appendChild(b);a("create","UA-50448074-1","auto");a("send","pageview")};S.bird_noWorm=function(){return["noWorm()",S.cf]};S.bird_heading=function(a){return"heading("+Number(mf(a,"ANGLE"))+", 'block_id_"+a.id+"');\n"};S.bird_position=function(a){return["get"+mf(a,"XY").charAt(0)+"()",S.cf]};S.bird_compare=function(a){var b="LT"===mf(a,"OP")?"<":">",c=S.Pm,d=lk(S,a,"A",c)||"0";a=lk(S,a,"B",c)||"0";return[d+" "+b+" "+a,c]};S.bird_and=function(a){var b=S.bi,c=lk(S,a,"A",b);a=lk(S,a,"B",b);c||a?(c||(c="true"),a||(a="true")):a=c="false";return[c+" && "+a,b]};
S.bird_ifElse=function(a){var b=lk(S,a,"CONDITION",S.Tj)||"false",c=mk(a,"DO");a=mk(a,"ELSE");return"if ("+b+") {\n"+c+"} else {\n"+a+"}\n"};If.controls_if.Sq=If.controls_if.X;If.controls_if.X=function(){this.Sq();this.Bj(!1);this.yj(!1)};S.math_number=function(a){a=Number(mf(a,"NUM"));return[a,0<=a?S.Nm:S.Uj]};function Hk(){var a=V("Games.bird",!0),b="";var c='\n&nbsp;\n<button id="linkButton" title="'+V("Games.linkTooltip",!0)+'">\n  <img src="common/1x1.gif" class="link icon21">\n</button>\n';b&&(b=" &nbsp; "+b);a='\n<span id="title">\n  <a href="'+(sk?"index.html":"./")+"?lang="+pk+'">'+V("Games.name",!0)+"</a> : "+a+"\n</span>\n";if(U){var d=" &nbsp ";for(var e=1;10>=e;e++){var f="?lang="+pk+"&level="+e;d+=" ";d=e===U?d+('<span class="level_number level_done" id="level'+e+'">'+e+"</span>"):10===e?d+
('<a class="level_number" id="level'+e+'" href="'+f+'">'+e+"</a>"):d+('<a class="level_dot" id="level'+e+'" href="'+f+'"></a>')}}else d="";b='\n\n<table width="100%" style="display:none;">\n  <tr>\n    <td>\n      <h1>\n        '+(a+"\n        "+d+'\n      </h1>\n    </td>\n    <td id="header_cta" class="farSide">\n      <select id="languageMenu"></select>\n      '+c+"\n      \n      "+b+'\n    </td>\n  </tr>\n</table>\n\n\n<div id="visualization">\n  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgBird" width="400px" height="400px">\n  </svg>\n</div>\n\n<table width=400>\n  <tr>\n    <td style="width: 190px;">\n    </td>\n    <td>\n      <button id="runButton" class="primary" title="')+
V("Games.runTooltip",!0)+'">\n        <img src="common/1x1.gif" class="run icon21"> '+V("Games.runProgram",!0)+'\n      </button>\n      <button id="resetButton" class="primary" style="display: none" title="'+V("Games.resetTooltip",!0)+'">\n        <img src="common/1x1.gif" class="stop icon21"> '+V("Games.resetProgram",!0)+"\n      </button>\n    </td>\n  </tr>\n</table>\n\n";c='<block type="bird_heading"></block>\n';2<=U&&(c+='<block type="bird_noWorm" disabled="'+(4===U||5===U)+'"></block>\n');
4<=U&&(c+='\n<block type="bird_compare">\n  <field name="OP">LT</field>\n  <value name="A">\n    <block type="bird_position" movable="false">\n      <field name="XY">X</field>\n    </block>\n  </value>\n  <value name="B">\n    <block type="math_number" movable="false">\n      <field name="NUM">50</field>\n    </block>\n  </value>\n</block>\n');5<=U&&(c+='\n<block type="bird_compare">\n  <field name="OP">LT</field>\n  <value name="A">\n    <block type="bird_position" movable="false">\n      <field name="XY">Y</field>\n    </block>\n  </value>\n  <value name="B">\n    <block type="math_number" movable="false">\n      <field name="NUM">50</field>\n    </block>\n  </value>\n</block>\n');
8<=U&&(c+='<block type="bird_and"></block>\n');return b+('<xml id="toolbox" xmlns="https://developers.google.com/blockly/xml">'+c+'</xml>\n<div id="blockly"></div>\n\n\n<div id="dialogShadow" class="dialogAnimate"></div>\n<div id="dialogBorder"></div>\n<div id="dialog"></div>\n\n\n<div id="dialogDone" class="dialogHiddenContent">\n  <div style="font-size: large; margin: 1em;">')+(V("Games.congratulations",!0)+'</div>\n  <div id="dialogLinesText" style="font-size: large; margin: 1em;"></div>\n  <pre id="containerCode"></pre>\n  <div id="dialogDoneText" style="font-size: large; margin: 1em;"></div>\n  <div id="dialogDoneButtons" class="farSide" style="padding: 1ex 3ex 0">\n    <button class="addHideHandler">'+
Gk(q.DIALOG_CANCEL)+'</button>\n    <button id="doneOk" class="secondary">'+Gk(q.DIALOG_OK)+'</button>\n  </div>\n</div>\n\n\n<div id="dialogAbort" class="dialogHiddenContent">\n  ')+(V("Games.helpAbort",!0)+'\n  <div class="farSide" style="padding: 1ex 3ex 0">\n    <button class="addHideHandler">'+Gk(q.DIALOG_CANCEL)+'</button>\n    <button id="abortOk" class="secondary">'+Gk(q.DIALOG_OK)+'</button>\n  </div>\n</div>\n\n\n<div id="dialogStorage" class="dialogHiddenContent">\n  <div id="containerStorage"></div>\n  \n<div class="farSide" style="padding: 1ex 3ex 0">\n  <button class="secondary addHideHandler">')+
(Gk(q.DIALOG_OK)+'</button>\n</div>\n\n</div>\n\n\n\n<div id="dialogHelp1" class="dialogHiddenContent">\n  <table><tr><td rowspan=2>\n    <img src="common/help.png">\n  </td><td>\n    <div class="farSide"><img src="bird/help_heading.png" class="mirrorImg" height=27 width=141></div>\n  </td></tr><tr><td>\n    ')+(V("Bird.helpHeading",!0)+'\n  </td></tr></table>\n</div>\n<div id="dialogHelp2" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>\n    '+V("Bird.helpHasWorm",
!0)+'\n  </td><td>\n    <img src="bird/help_up.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelp4" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>\n    '+V("Bird.helpX",!0)+'\n  </td><td>\n    <img src="bird/help_up.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelp5" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="bird/help_up.png">\n  </td><td>\n    '+V("Bird.helpElse",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelp6" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="bird/help_up.png">\n  </td><td>\n    '+
V("Bird.helpElseIf",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelp8" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="bird/help_up.png">\n  </td><td>\n    '+V("Bird.helpAnd",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogMutatorHelp" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="bird/help_mutator.png" class="mirrorImg" height=58 width=107>\n  </td><td>\n    '+V("Bird.helpMutator",
!0)+"\n  </td></tr></table>\n</div>\n\n")};function Ik(){}Ik.prototype.Jl=function(){};Ik.prototype.Il=function(){};Ik.prototype.Kl=function(){};function Jk(){Jk.i.constructor.call(this);this.Nj=!1}I(Jk,Ik);function ig(a,b,c){b instanceof Q?(b=!b.getParent()&&b.Lc(),a.Nj=b&&!c):a.Nj=b.Lc();return a.Nj};function Kk(a,b){Kk.i.constructor.call(this,b);this.If=a}I(Kk,Qd);Kk.prototype.type="trashcan_open";Kk.prototype.R=function(){var a=Kk.i.R.call(this);a.isOpen=this.If;return a};Kk.prototype.N=function(a){Kk.i.N.call(this,a);this.If=a.isOpen};C(Pc,"trashcan_open",Kk);function fj(a){fj.i.constructor.call(this);this.g=a;this.id="trashcan";this.Dd=[];this.Xb=null;0>=this.g.options.ej||(a=new je({scrollbars:!0,parentWorkspace:this.g,rtl:this.g.s,oneBasedIndex:this.g.options.oj,renderer:this.g.options.uj,rendererOverrides:this.g.options.vj,move:{scrollbars:!0}}),a.Cb=3==this.g.Cb?2:3,this.Xb=new (Yc(Uc,this.g.options,!0))(a),vf(this.g,this.Uq.bind(this)))}I(fj,Jk);g=fj.prototype;g.gf=47;g.Sh=44;g.$e=16;g.Jm=20;g.Np=20;g.Zh=10;g.Xj=0;g.Yj=32;g.Ip=.1;g.Vi=!1;g.zl=0;
g.v=null;g.Ij=null;g.ol=0;g.Nd=0;g.Zi=0;g.Kj=0;g.Qn=!1;
g.ya=function(){this.v=x(Xb,{"class":"blocklyTrash"},null);var a=String(Math.random()).substring(2);var b=x(Qb,{id:"blocklyTrashBodyClipPath"+a},this.v);x(cc,{width:this.gf,height:this.Sh,y:this.$e},b);var c=x(Yb,{width:96,x:-this.Xj,height:124,y:-this.Yj,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.v);c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.jh+"sprites.png");b=x(Qb,{id:"blocklyTrashLidClipPath"+a},this.v);x(cc,{width:this.gf,height:this.$e},b);this.Ij=
x(Yb,{width:96,x:-this.Xj,height:124,y:-this.Yj,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.v);this.Ij.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.jh+"sprites.png");Cb(this.v,"mousedown",this,this.eq);Cb(this.v,"mouseup",this,this.click);Cb(c,"mouseover",this,this.Qq);Cb(c,"mouseout",this,this.Oq);this.ak();return this.v};
g.X=function(){0<this.g.options.ej&&(lc(this.Xb.ya(dc),B(this.g)),this.Xb.X(this.g));Eb(this.g.$c,{component:this,weight:1,zd:[Nb,Ib,Mb,Lb]});this.Qn=!0;this.Uf(!1)};g.m=function(){Gb(this.g.$c,"trashcan");this.v&&(A(this.v),this.v=null);this.g=this.Ij=null;clearTimeout(this.ol)};
g.position=function(a,b){if(this.Qn){var c=new Da(this.gf,this.Sh+this.$e);var d=this.Np;var e=this.Jm,f=this.g,h=f.Y&&!!f.Y.Z;0===(2!==a.Dr.position?0:1)?(d=a.Zj.left+d,h&&f.s&&(d+=me)):(d=a.Zj.left+a.ip.width-c.width-d,h&&!f.s&&(d-=me));a=a.Zj.top+a.ip.height-c.height-e;f.Y&&f.Y.la&&(a-=me);d=new wa(a,a+c.height,d,d+c.width);c=this.Jm;f=d.left;a=d.right-d.left;e=d.bottom-d.top;h=0;for(var k;k=b[h];h++)d.left>k.right||d.right<k.left||d.top>k.bottom||d.bottom<k.top||(d=k.top-e-c,d=new wa(d,d+e,f,
f+a),h=-1);b=d;this.Kj=b.top;this.Zi=b.left;this.v.setAttribute("transform","translate("+this.Zi+","+this.Kj+")")}};g.Lg=function(){return new wa(this.Kj,this.Kj+this.Sh+this.$e,this.Zi,this.Zi+this.gf)};g.Dn=function(){if(!this.v)return null;var a=this.v.getBoundingClientRect(),b=a.top+this.Yj-this.Zh;a=a.left+this.Xj-this.Zh;return new wa(b,b+this.$e+this.Sh+2*this.Zh,a,a+this.gf+2*this.Zh)};g.Jl=function(){this.Uf(this.Nj)};g.Il=function(){this.Uf(!1)};
g.Kl=function(){setTimeout(this.Uf.bind(this,!1),100)};g.Uf=function(a){this.Vi!=a&&(clearTimeout(this.ol),this.Vi=a,this.ak())};g.ak=function(){this.Nd+=this.Vi?.2:-.2;this.Nd=Math.min(Math.max(this.Nd,this.zl),1);Lk(this,45*this.Nd);this.v.style.opacity=.4+.4*this.Nd;this.Nd>this.zl&&1>this.Nd&&(this.ol=setTimeout(this.ak.bind(this),20))};function Lk(a,b){var c=3==a.g.Cb;a.Ij.setAttribute("transform","rotate("+(c?-b:b)+","+(c?4:a.gf-4)+","+(a.$e-2)+")")}
g.click=function(){if(this.Dd.length&&(!this.Xb||!this.Xb.isVisible())){var a=this.Dd.map(sd);this.Xb.show(a);Ij(this,!0)}};function Ij(a,b){a=new (H("trashcan_open"))(b,a.g.id);E(a)}g.eq=function(a){this.Xb&&this.Xb.isVisible()||!this.Dd.length||a.stopPropagation()};g.Qq=function(){this.Dd.length&&this.Uf(!0)};g.Oq=function(){this.Uf(!1)};
g.Uq=function(a){if(!(0>=this.g.options.ej)&&"delete"==a.type&&a.Mf.tagName&&"shadow"!=a.Mf.tagName.toLowerCase()){for(var b=a=a.Mf.cloneNode(!0);b;){b.removeAttribute&&(b.removeAttribute("x"),b.removeAttribute("y"),b.removeAttribute("id"),b.removeAttribute("disabled"),"comment"==b.nodeName&&(b.removeAttribute("h"),b.removeAttribute("w"),b.removeAttribute("pinned")));var c=b.firstChild||b.nextSibling;if(!c)for(c=b.parentNode;c;){if(c.nextSibling){c=c.nextSibling;break}c=c.parentNode}b=c}a=rd(a);if(-1==
this.Dd.indexOf(a)){for(this.Dd.unshift(a);this.Dd.length>this.g.options.ej;)this.Dd.pop();this.zl=a=this.Ip;this.Vi||Lk(this,45*a)}}};function Mk(a){Mk.i.constructor.call(this);a.uh=this.pr.bind(this);var b=this.g=new Ii(a),c=new Ai(this.g,this);b.sb=c;b.rc=b.sb.rc.bind(b.sb);this.g.Ld=!0;this.g.ta(this.ld);this.id=fb();this.s=!!a.s;this.ae=a.Cb;this.Lk=[];this.cj=[];this.og=[];this.Ja=[];this.Wl=[];this.Yf=this.g.pa.D().gi;this.T=null}I(Mk,Jk);g=Mk.prototype;g.ie=!0;g.ld=!1;g.ke=!0;g.na=8;g.af=Mk.prototype.na;g.Hp=3*Mk.prototype.af;g.Up=2.5;g.ma=0;g.ob=0;g.qq=70;
g.ya=function(a){this.v=x(a,{"class":"blocklyFlyout",style:"display: none"},null);this.Sa=x($b,{"class":"blocklyFlyoutBackground"},this.v);this.v.appendChild(this.g.ya());this.g.Va.subscribe(this.Sa,"flyoutBackgroundColour","fill");this.g.Va.subscribe(this.Sa,"flyoutOpacity","fill-opacity");return this.v};
g.X=function(a){this.T=a;this.g.T=a;this.g.Y=new ke(this.g,!1,!0,"blocklyFlyoutScrollbar",this.Up);this.wb();Array.prototype.push.apply(this.Lk,u(this.v,"wheel",this,this.Kr));this.ie||(this.Ii=this.Mk.bind(this),vf(this.T,this.Ii));Array.prototype.push.apply(this.Lk,u(this.Sa,"mousedown",this,this.Rd));this.g.Fd=this.T.Fd.bind(this.T);this.g.nm(this.T.ea);var b=this.g;b.qj=new hf(b);Eb(a.$c,{component:this,weight:1,zd:[Ib,Mb]})};
g.m=function(){this.wb();Gb(this.g.$c,this.id);v(this.Lk);this.Ii&&(lb(this.T.Ja,this.Ii),this.Ii=null);this.g&&(this.g.Va.unsubscribe(this.Sa),this.g.T=null,this.g.m(),this.g=null);this.v&&(A(this.v),this.v=null);this.T=this.Sa=null};g.Hd=function(){return this.ma};g.isVisible=function(){return this.ld};g.ta=function(a){var b=a!=this.isVisible();this.ld=a;b&&(this.ie||Si(this.g),this.Kh())};g.Ie=function(a){var b=a!=this.ke;this.ke=a;b&&this.Kh()};
g.Kh=function(){var a=this.ke?this.isVisible():!1;this.v.style.display=a?"block":"none";this.g.Y.Ie(a)};g.wb=function(){if(this.isVisible()){this.ta(!1);for(var a=0,b;b=this.Ja[a];a++)v(b);this.Ja.length=0;this.Vd&&(lb(this.g.Ja,this.Vd),this.Vd=null)}};
g.show=function(a){this.g.eb(!1);this.wb();Nk(this);"string"==typeof a&&(a=Ok(this,a));this.ta(!0);a=ge(a);a=Pk(this,a);Qk(this,a.lq,a.vq);this.Ja.push(u(this.Sa,"mouseover",this,function(){for(var b=this.g.sa(!1),c=0,d;d=b[c];c++)d.ph()}));this.ma=0;this.g.eb(!0);this.$l();this.Mk();this.position();this.Vd=this.$l.bind(this);vf(this.g,this.Vd)};
function Pk(a,b){var c=[],d=[];a.Wl.length=0;for(var e=a.Hp,f=0,h;h=b[f];f++){if(h.custom){var k=Ok(a,h.custom);k=ge(k);b.splice.apply(b,[f,1].concat(k));h=b[f]}switch(h.kind.toUpperCase()){case "BLOCK":k=h;var l=k;h=null;var m=l.blockxml;m&&"string"!=typeof m?h=m:m&&"string"==typeof m?(h=sd(m),l.blockxml=h):l.type&&(h=J("xml"),h.setAttribute("type",l.type),h.setAttribute("disabled",l.disabled),l.blockxml=h);if(!h)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");
l=h;h=a;m=ud(l,h.g);m.isEnabled()||h.Wl.push(m);h=m;k=parseInt(k.gap||l.getAttribute("gap"),10);d.push(isNaN(k)?e:k);c.push({type:"block",block:h});break;case "SEP":k=d;l=e;h=parseInt(h.gap,10);!isNaN(h)&&0<k.length?k[k.length-1]=h:k.push(l);break;case "LABEL":k=Rk(a,h,!0);c.push({type:"button",button:k});d.push(e);break;case "BUTTON":k=Rk(a,h,!1),c.push({type:"button",button:k}),d.push(e)}}return{lq:c,vq:d}}
function Ok(a,b){b=a.g.T.sm[b]||null;if("function"!=typeof b)throw TypeError("Couldn't find a callback function when opening a toolbox category.");a=b(a.g.T);if(!Array.isArray(a))throw new TypeError("Result of toolbox category callback must be an array.");return a}function Rk(a,b,c){if(!ka.Gp)throw Error("Missing require for Blockly.FlyoutButton");return new ka.Gp(a.g,a.T,b,c)}
function Nk(a){for(var b=a.g.sa(!1),c=0,d;d=b[c];c++)d.j==a.g&&d.m(!1,!1);for(c=0;c<a.cj.length;c++)if(b=a.cj[c])Ve(b),A(b);for(c=a.cj.length=0;b=a.og[c];c++)b.m();a.og.length=0;a.g.qj.clear()}function Sk(a,b){return function(c){var d=a.T.Fd(c);d&&(Yg(d,b),Xg(d,c,a))}}g.Rd=function(a){var b=this.T.Fd(a);b&&Xg(b,a,this)};
function Tg(a,b){var c=null;D++;var d=a.T.uf();a.T.eb(!1);try{var e=a.T;if(!b.J())throw Error("oldBlock is not rendered.");var f=pd(b,!0);e.eb(!1);var h=ud(f,e);if(!h.J())throw Error("block is not rendered.");var k=$a(e.ua),l=$a(a.g.ua),m=b.aa();m.scale(a.g.scale);var p=ua(va(l,m),k);p.scale(1/e.scale);h.moveBy(p.x,p.y);c=h}finally{D--}Ge();b=Ad(a.T,d);if(0==D){F(!0);for(d=0;d<b.length;d++)e=b[d],E(new (H("var_create"))(e));E(new (H("create"))(c))}a.ie?a.wb():a.Mk();return c}
g.Mk=function(){for(var a=this.g.sa(!1),b=0,c;c=a[b];b++)if(-1==this.Wl.indexOf(c))for(var d=sf(this.T,mb(c));c;)c.Qc(d),c=ob(c)};
g.$l=function(){this.Vd&&lb(this.g.Ja,this.Vd);this.g.scale=this.T.scale;for(var a=0,b=this.g.sa(!1),c=0,d;d=b[c];c++){var e=mg(d).width;d.u&&(e-=this.Yf);a=Math.max(a,e)}for(c=0;d=this.og[c];c++)a=Math.max(a,d.width);a+=1.5*this.af+this.Yf;a*=this.g.scale;a+=me;if(this.ma!=a){for(c=0;d=b[c];c++){if(this.s){e=d.aa().x;var f=a/this.g.scale-this.af;d.u||(f-=this.Yf);d.moveBy(f-e,0)}d.Bn&&(e=d.Bn,f=d,d=mg(f),e.setAttribute("width",d.width),e.setAttribute("height",d.height),f=f.aa(),e.setAttribute("y",
f.y),e.setAttribute("x",this.s?f.x-d.width:f.x))}if(this.s)for(c=0;d=this.og[c];c++)b=d.ys().y,d.moveTo(a/this.g.scale-d.width-this.af-this.Yf,b);this.T.Cb!=this.ae||2!=this.ae||this.T.qa||this.T.translate(this.T.scrollX+a,this.T.scrollY);this.ma=a;this.position();Si(this.T)}this.Vd&&vf(this.g,this.Vd)};function Rg(a){return a.g.Y?a.g.Y.isVisible():!1};function Tk(a){Tk.i.constructor.call(this,a)}I(Tk,Mk);g=Tk.prototype;g.pr=function(a){if(this.isVisible()){var b=this.g.sb,c=b.Gd(),d=Gg(b);b=yi(b);"number"==typeof a.y&&(this.g.scrollY=-(c.top+(c.height-d.height)*a.y));this.g.translate(this.g.scrollX+b.left,this.g.scrollY+b.top)}};
g.position=function(){if(this.isVisible()&&this.T.isVisible()){var a=Gg(this.T.sb);this.ob=a.height;var b=this.ma-this.na;a=a.height-2*this.na;var c=3==this.ae,d=b+this.na;d=["M "+(c?d:0)+",0"];d.push("h",c?-b:b);d.push("a",this.na,this.na,0,0,c?0:1,c?-this.na:this.na,this.na);d.push("v",Math.max(0,a));d.push("a",this.na,this.na,0,0,c?0:1,c?this.na:-this.na,this.na);d.push("h",c?b:-b);d.push("z");this.Sa.setAttribute("d",d.join(" "));this.isVisible()?(c=this.T.sb,b=yi(c),a=Gg(c),c=xi(c),c=this.T.Cb==
this.ae?this.T.qa?2==this.ae?c.width:a.width-this.ma:2==this.ae?0:a.width:2==this.ae?0:a.width+b.left-this.ma):c=0;b=this.ma;a=this.ob;this.v.setAttribute("width",b);this.v.setAttribute("height",a);Vi(this.g,b,a);"svg"==this.v.tagName?mc(this.v,"translate("+c+"px,0px)"):this.v.setAttribute("transform","translate("+c+",0)");if(b=this.g.Y)b.zj(c,0),b.resize(),b.la&&b.la.setPosition(b.la.position.x,b.la.position.y),b.Z&&b.Z.setPosition(b.Z.position.x,b.Z.position.y)}};
g.Qo=function(){var a=this.g.Y;a.Z&&a.Z.set(0,!0)};g.Kr=function(a){var b=cb(a);if(b.y){var c=this.g.sb,d=c.Gd();b=Gg(c).top-d.top+b.y;c=this.g.Y;c.Z&&c.Z.set(b,!0);kh();Jc()}a.preventDefault();a.stopPropagation()};
function Qk(a,b,c){a.g.scale=a.T.scale;for(var d=a.af,e=a.s?d:d+a.Yf,f=0,h;h=b[f];f++)if("block"==h.type){h=h.block;for(var k=nb(h,!1),l=0,m;m=k[l];l++)m.Za=!0;h.V();m=h.J();k=mg(h);l=h.u?e-a.Yf:e;h.moveBy(l,d);var p=a,t=h,y=f;l=x(cc,{"fill-opacity":0,x:a.s?l-k.width:l,y:d,height:k.height,width:k.width},null);l.fc=t;Re(l);p.g.ua.insertBefore(l,t.J());t.Bn=l;p.cj[y]=l;p=a;p.Ja.push(u(m,"mousedown",null,Sk(p,h)));p.Ja.push(u(l,"mousedown",null,Sk(p,h)));p.Ja.push(Cb(m,"mouseenter",h,h.ii));p.Ja.push(Cb(m,
"mouseleave",h,h.ph));p.Ja.push(Cb(l,"mouseenter",h,h.ii));p.Ja.push(Cb(l,"mouseleave",h,h.ph));d+=k.height+c[f]}else"button"==h.type&&(k=a,l=h.button,m=e,p=d,t=l.ya(),l.moveTo(m,p),l.show(),k.Ja.push(u(t,"mousedown",k,k.Rd)),k.og.push(l),d+=h.button.height+c[f])}g.Dn=function(){if(!this.v||this.ie||!this.isVisible())return null;var a=this.v.getBoundingClientRect(),b=a.left;return 2==this.ae?new wa(-1E9,1E9,-1E9,b+a.width):new wa(-1E9,1E9,b,1E9)};C(Uc,"default",Tk);function Uk(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=b[d];e;)setTimeout(e.He.bind(e,a),c),e=ob(e),c+=10}function Vk(a,b){if(a.Lc())Array.prototype.push.apply(b,nb(a,!1));else{a=od(a,!1);for(var c=0;c<a.length;c++)Vk(a[c],b)}}function Wk(a){var b=[];a=a.sa(!0);for(var c=0;c<a.length;c++)Vk(a[c],b);return b}function Xk(a,b){F(b);var c=a.shift();c&&(c.j?(c.m(!1,!0),setTimeout(Xk,10,a,b)):Xk(a,b));F(!1)}
Rh.register({lb:function(){return q.UNDO},Ba:function(a){return 0<a.j.Qe.length?"enabled":"disabled"},va:function(a){uf(a.j,!1)},Nb:"workspace",id:"undoWorkspace",weight:1});Rh.register({lb:function(){return q.REDO},Ba:function(a){return 0<a.j.oh.length?"enabled":"disabled"},va:function(a){uf(a.j,!0)},Nb:"workspace",id:"redoWorkspace",weight:2});
Rh.register({lb:function(){return q.CLEAN_UP},Ba:function(a){return a.j.$a()?1<a.j.sa(!1).length?"enabled":"disabled":"hidden"},va:function(a){a=a.j;a.eb(!1);F(!0);for(var b=a.sa(!0),c=0,d=0,e;e=b[d];d++)if(e.$a()){var f=e.aa();e.moveBy(-f.x,c-f.y);ki(e);c=e.aa().y+mg(e).height+a.pa.D().gg}F(!1);a.eb(!0)},Nb:"workspace",id:"cleanWorkspace",weight:3});
Rh.register({lb:function(){return q.COLLAPSE_ALL},Ba:function(a){if(a.j.options.collapse){a=a.j.sa(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(!c.isCollapsed())return"enabled";c=ob(c)}return"disabled"}return"hidden"},va:function(a){Uk(!0,a.j.sa(!0))},Nb:"workspace",id:"collapseWorkspace",weight:4});
Rh.register({lb:function(){return q.EXPAND_ALL},Ba:function(a){if(a.j.options.collapse){a=a.j.sa(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(c.isCollapsed())return"enabled";c=ob(c)}return"disabled"}return"hidden"},va:function(a){Uk(!1,a.j.sa(!0))},Nb:"workspace",id:"expandWorkspace",weight:5});
Rh.register({lb:function(a){if(a.j)return a=Wk(a.j).length,1==a?q.DELETE_BLOCK:q.DELETE_X_BLOCKS.replace("%1",String(a))},Ba:function(a){if(a.j)return 0<Wk(a.j).length?"enabled":"disabled"},va:function(a){if(a.j){ni(a.j);var b=Wk(a.j),c=fb();2>b.length?Xk(b,c):of(q.DELETE_ALL_BLOCKS.replace("%1",b.length),function(d){d&&Xk(b,c)})}},Nb:"workspace",id:"workspaceDelete",weight:6});
Rh.register({lb:function(){return q.DUPLICATE_BLOCK},Ba:function(a){a=a.block;return!a.Za&&a.Lc()&&a.$a()?(tf(a.j)?sf(a.j,mb(a,!0)):1)?"enabled":"disabled":"hidden"},va:function(a){if(a.block){a=a.block;var b=Yi,c=Dj;Gj(a);Xi(a.j);Yi=b;Dj=c}},Nb:"block",id:"blockDuplicate",weight:1});
Rh.register({lb:function(a){return a.block.lc?q.REMOVE_COMMENT:q.ADD_COMMENT},Ba:function(a){a=a.block;return Ha||a.Za||!a.j.options.jq||a.isCollapsed()||!a.yb()?"hidden":"enabled"},va:function(a){a=a.block;a.lc?a.Tf(null):a.Tf("")},Nb:"block",id:"blockComment",weight:2});
Rh.register({lb:function(a){return Tf(a.block)?q.EXTERNAL_INPUTS:q.INLINE_INPUTS},Ba:function(a){a=a.block;if(!a.Za&&a.$a()&&!a.isCollapsed())for(var b=1;b<a.A.length;b++)if(3!=a.A[b-1].type&&3!=a.A[b].type)return"enabled";return"hidden"},va:function(a){a.block.Je(!Tf(a.block))},Nb:"block",id:"blockInline",weight:3});
Rh.register({lb:function(a){return a.block.isCollapsed()?q.EXPAND_BLOCK:q.COLLAPSE_BLOCK},Ba:function(a){a=a.block;return!a.Za&&a.$a()&&a.j.options.collapse?"enabled":"hidden"},va:function(a){a.block.He(!a.block.isCollapsed())},Nb:"block",id:"blockCollapseExpand",weight:4});
Rh.register({lb:function(a){return a.block.isEnabled()?q.DISABLE_BLOCK:q.ENABLE_BLOCK},Ba:function(a){a=a.block;return!a.Za&&a.j.options.disable&&a.yb()?Eh(a)?"disabled":"enabled":"hidden"},va:function(a){a=a.block;var b=Zc;b||F(!0);a.Qc(!a.isEnabled());b||F(!1)},Nb:"block",id:"blockDisable",weight:5});
Rh.register({lb:function(a){var b=a.block;a=nb(b,!1).length;(b=ob(b))&&(a-=nb(b,!1).length);return 1==a?q.DELETE_BLOCK:q.DELETE_X_BLOCKS.replace("%1",String(a))},Ba:function(a){return!a.block.Za&&a.block.Lc()?"enabled":"hidden"},va:function(a){F(!0);a.block&&Fj(a.block);F(!1)},Nb:"block",id:"blockDelete",weight:6});
Rh.register({lb:function(){return q.HELP},Ba:function(a){a=a.block;return("function"==typeof a.Cf?a.Cf():a.Cf)?"enabled":"hidden"},va:function(a){a.block.showHelp()},Nb:"block",id:"blockHelp",weight:7});function W(a,b){return" "+a+","+b+" "}function Yk(a,b){return" "+a+b.join("")}function Zk(a,b){return" M "+a+","+b+" "}function N(a,b){return" m "+a+","+b+" "}function $k(a,b){return" l "+a+","+b+" "}function O(a,b){return" "+a+" "+b+" "}function al(a,b,c){return"a "+b+" "+b+" "+a+c};function bl(){this.zc=0;this.Vp=3;this.Qb=5;this.Mm=8;this.hb=10;this.Vm=this.Qb;this.mg=15;this.ff=5;this.gi=8;this.Qp=15;this.Qj=4;this.Pp=12;this.wp=16;this.vp=this.Bm=this.mg;this.na=8;this.Zp=this.hg=15;this.Tm=0;this.Um=20;this.pp=4;this.$p=this.Qb;this.aq=this.hb;this.rp=this.Qb;this.qp=this.hb;this.ym=!1;this.Xp=15;this.Yp=100;this.Wp=15;this.gg=24;this.yp=14.5;this.xp=this.mg+11;this.Ap=2;this.zp=this.gg;this.Sm=N(0,0);this.Lp=12;this.Mp=6;this.Xe=11;this.Ye="normal";this.We="sans-serif";
this.Gm=this.Xh=-1;this.Wh=4;this.Dm=16;this.eg=5;this.Cm="#fff";this.Oj=!Ha&&!Ia;this.Em=this.Dm;this.Cp=this.Bp=this.Fm=!1;this.Ep=this.eg;this.fg=12;this.Dp="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";
this.Fp=!1;this.sj=String(Math.random()).substring(2);this.Gi="";this.Kk=null;this.sn="";this.zg=this.on=this.yk=null;this.Am="#cc0a0a";this.Km="#4286f4";this.Uh=100;this.Wm=5;this.Th=10;this.tp=2;this.up=4;this.Hm=!1;this.Jp="#000000";this.Im=.2;this.Rm={Tp:1,bf:2}}g=bl.prototype;
g.X=function(){this.Ze=this.tl();this.bf=this.ul();this.df=this.wl();this.Vj=this.vl();var a=this.na;this.Yh={width:a,height:a,Vl:al("0 0,0",a,W(-a,a)),pj:al("0 0,0",a,W(a,a))};a=this.na;this.jg={tm:N(0,a)+al("0 0,1",a,W(a,-a)),Fr:al("0 0,1",a,W(a,a)),fq:al("0 0,1",a,W(-a,a)),gk:al("0 0,1",a,W(-a,-a)),lr:a}};
g.xh=function(){this.li=Object.create(null);var a=document.createElement("span");a.style.font=this.Ye+" "+(this.Xe+"pt ")+this.We;a.textContent="Hg";var b=document.createElement("div");b.style.width="1px";b.style.height="0px";var c=document.createElement("div");c.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;");c.appendChild(a);c.appendChild(b);document.body.appendChild(c);try{var d={};c.style.alignItems="baseline";d.kc=b.offsetTop-a.offsetTop;c.style.alignItems="flex-end";
d.height=b.offsetTop-a.offsetTop}finally{document.body.removeChild(c)}a=d;this.Xh=a.height;this.Gm=a.kc};function oi(a,b){var c="auto_"+b;a.li[c]||(a.li[c]=cl({colourPrimary:b}));return{style:a.li[c],name:c}}function ii(a,b){return a.li[b||""]||(b&&0==b.indexOf("auto_")?oi(a,b.substring(5)).style:cl({colourPrimary:"#000000"}))}
function cl(a){var b={};a&&jd(b,a);a=pb(b.colourPrimary||"#000");b.Zc=a.Qg;b.colourSecondary?a=pb(b.colourSecondary).Qg:(a=b.Zc,a=ra("#fff",a,.6)||a);b.ui=a;b.colourTertiary?a=pb(b.colourTertiary).Qg:(a=b.Zc,a=ra("#fff",a,.3)||a);b.Bc=a;b.Hc=b.hat||"";return b}g.m=function(){this.Kk&&A(this.Kk);this.yk&&A(this.yk);this.on&&A(this.on);this.zg=null};g.tl=function(){var a=this.Lp,b=this.Mp;return{height:a,width:b,path:" l"+[W(b,a/4),W(2*-b,a/2),W(b,a/4)].join("")}};
g.wl=function(){var a=this.Xp,b=this.Yp;return{height:a,width:b,path:Yk("c",[W(30,-a),W(70,-a),W(b,0)])}};g.vl=function(){function a(f){f=f?-1:1;var h=-f,k=c/2;return Yk("c",[W(0,f*(k+2.5)),W(-b,h*(k+.5)),W(-b,f*k)])+Yk("s",[W(b,2.5*h),W(b,f*k)])}var b=this.gi,c=this.mg,d=a(!0),e=a(!1);return{type:this.Rm.Tp,width:b,height:c,bc:e,kh:d}};
g.ul=function(){function a(h){return" l"+[W(h*d,c),W(3*h,0),W(h*d,-c)].join("")}var b=this.Qp,c=this.Qj,d=(b-3)/2,e=a(1),f=a(-1);return{type:this.Rm.bf,width:b,height:c,Ud:e,Do:f}};function hg(a,b){switch(b.type){case 1:case 2:return a.Vj;case 4:case 3:return a.bf;default:throw Error("Unknown connection type");}}
g.ya=function(a,b,c){c=this.Rk(c);b="blockly-renderer-style-"+b;this.zg=document.getElementById(b);c=c.join("\n");if(this.zg)this.zg.firstChild.textContent=c;else{var d=document.createElement("style");d.id=b;d.appendChild(document.createTextNode(c));document.head.insertBefore(d,document.head.firstChild);this.zg=d}a=x(Rb,{},a);b=x(Wb,{id:"blocklyEmbossFilter"+this.sj},a);x(Tb,{"in":"SourceAlpha",stdDeviation:1,result:"blur"},b);c=x(Vb,{"in":"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,
"lighting-color":"white",result:"specOut"},b);x(Ub,{x:-5E3,y:-1E4,z:2E4},c);x(Sb,{"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},b);x(Sb,{"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},b);this.Gi=b.id;this.Kk=b;a=x(ac,{id:"blocklyDisabledPattern"+this.sj,patternUnits:"userSpaceOnUse",width:10,height:10},a);x(cc,{width:10,height:10,fill:"#aaa"},a);x($b,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},a);this.sn=a.id;this.yk=a};
g.Rk=function(a){return[a+" .blocklyText, ",a+" .blocklyFlyoutLabelText {","font: "+this.Ye+" "+this.Xe+"pt "+this.We+";","}",a+" .blocklyText {","fill: #fff;","}",a+" .blocklyNonEditableText>rect,",a+" .blocklyEditableText>rect {","fill: "+this.Cm+";","fill-opacity: .6;","stroke: none;","}",a+" .blocklyNonEditableText>text,",a+" .blocklyEditableText>text {","fill: #000;","}",a+" .blocklyFlyoutLabelText {","fill: #000;","}",a+" .blocklyText.blocklyBubbleText {","fill: #000;","}",a+" .blocklyEditableText:not(.editing):hover>rect {",
"stroke: #fff;","stroke-width: 2;","}",a+" .blocklyHtmlInput {","font-family: "+this.We+";","font-weight: "+this.Ye+";","}",a+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",a+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",a+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",a+" .blocklyReplaceable .blocklyPathLight,",a+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",a+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.Im+
";","stroke: none;","}"]};function dl(a){this.lf=this.U=this.type=this.height=this.width=0;this.h=a;this.ac=this.h.hg};function el(a,b){el.i.constructor.call(this,a);this.jb=b;this.shape=hg(this.h,b);this.ve=!!this.shape.isDynamic;this.type|=1024}I(el,dl);function fl(a,b){fl.i.constructor.call(this,a,b);this.type|=8192;this.height=this.ve?0:this.shape.height;this.ec=this.width=this.ve?0:this.shape.width;this.Fb=this.h.ff;this.ug=0}I(fl,el);function gl(a,b){gl.i.constructor.call(this,a,b);this.type|=2048;this.height=this.shape.height;this.width=this.shape.width}I(gl,el);
function hl(a,b){hl.i.constructor.call(this,a,b);this.type|=4096;this.height=this.shape.height;this.width=this.shape.width}I(hl,el);function il(a,b){il.i.constructor.call(this,a,b.connection);this.type|=128;this.input=b;this.align=b.align;(this.Cd=b.connection&&b.connection.I()?b.connection.I():null)?(a=mg(this.Cd),this.tg=a.width,this.xi=a.height):this.xi=this.tg=0;this.Fb=this.ug=0}I(il,el);
function jl(a,b){jl.i.constructor.call(this,a,b);this.type|=256;this.Cd?(this.width=this.tg,this.height=this.xi):(this.height=this.h.xp,this.width=this.h.yp);this.nf=this.ve?this.shape.height(this.height):this.shape.height;this.Cc=this.ve?this.shape.width(this.height):this.shape.width;this.Cd||(this.width+=this.Cc*(this.ve?2:1));this.Fb=this.ve?this.shape.Fb(this.nf):this.h.ff;this.ug=this.ve?this.shape.ug(this.Cc):0}I(jl,il);
function kl(a,b){kl.i.constructor.call(this,a,b);this.type|=512;this.height=this.Cd?this.xi+this.h.Tm:this.h.zp;this.width=this.h.Zp+this.shape.width}I(kl,il);function ll(a,b){ll.i.constructor.call(this,a,b);this.type|=64;this.height=this.Cd?this.xi-this.h.ff-this.h.Qb:this.shape.height;this.width=this.shape.width+this.h.Ap;this.Fb=this.h.ff;this.nf=this.shape.height;this.Cc=this.shape.width}I(ll,il);function ml(a,b){ml.i.constructor.call(this,a);this.icon=b;this.isVisible=b.isVisible();this.type|=4;a=new Da(Qj.prototype.ei,Qj.prototype.ei-2);this.height=a.height;this.width=a.width}I(ml,dl);function nl(a){nl.i.constructor.call(this,a);this.type|=524288;this.height=this.h.Ze.height;this.width=this.h.Ze.width}I(nl,dl);function ol(a,b){ol.i.constructor.call(this,a);this.yn=b;this.yb=b.Vh;this.tq=!1;this.type|=1;a=this.yn.Og();this.height=a.height;this.width=a.width}I(ol,dl);
function pl(a){pl.i.constructor.call(this,a);this.type|=2;this.height=this.h.df.height;this.width=this.h.df.width;this.jf=this.height}I(pl,dl);function ql(a,b){ql.i.constructor.call(this,a);this.type=(b&&"left"!=b?131072:32768)|16384;this.width=this.height=this.h.zc}I(ql,dl);function rl(a,b){rl.i.constructor.call(this,a);this.type=(b&&"left"!=b?262144:65536)|16384;this.width=this.h.na;this.height=this.h.na/2}I(rl,dl);
function sl(a,b){sl.i.constructor.call(this,a);this.type|=40;this.width=b;this.height=this.h.Wp}I(sl,dl);function tl(a){this.type=1048576;this.elements=[];this.U=this.La=this.xc=this.minWidth=this.minHeight=this.width=this.height=0;this.In=this.Bf=this.Yk=this.Ia=this.Jd=!1;this.h=a;this.ac=this.h.hg;this.align=null}tl.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.");};function ul(a){for(var b=a.elements.length-1,c;c=a.elements[b];b--)if(c.type&128)return c;return null}tl.prototype.Gj=function(){return!0};tl.prototype.Hg=function(){return!0};
function vl(a){vl.i.constructor.call(this,a);this.type|=2097152;this.jf=this.Xc=0;this.Hq=!1;this.connection=null}I(vl,tl);vl.prototype.Zk=function(a){var b=(a.Hc?"cap"===a.Hc:this.h.ym)&&!a.u&&!a.G,c=a.G&&a.G.I();return!!a.u||b||(c?ob(c)==a:!1)};
vl.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&2?c=Math.max(c,e.jf):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.Xc=this.jf=c;this.xc=this.width};vl.prototype.Gj=function(){return!1};vl.prototype.Hg=function(){return!1};function wl(a){wl.i.constructor.call(this,a);this.type|=4194304;this.Jn=!1;this.connection=null;this.kc=this.Dg=0}I(wl,tl);
wl.prototype.Zk=function(a){return!!a.u||!!ob(a)};wl.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&4096?c=Math.max(c,e.height):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.Dg=c;this.xc=this.width};wl.prototype.Gj=function(){return!1};wl.prototype.Hg=function(){return!1};
function xl(a,b,c){xl.i.constructor.call(this,a);this.type|=24;this.width=c;this.height=b;this.Cn=!1;this.xc=0;this.elements=[new sl(this.h,c)]}I(xl,tl);xl.prototype.measure=function(){};function yl(a){yl.i.constructor.call(this,a);this.type|=8388608;this.jn=0}I(yl,tl);
yl.prototype.measure=function(){this.width=this.minWidth;this.height=this.minHeight;for(var a=0,b=0,c;c=this.elements[b];b++)this.width+=c.width,c.type&128&&(c.type&512?a+=c.tg:c.type&64&&0!=c.tg&&(a+=c.tg-c.Cc)),c.type&8||(this.height=Math.max(this.height,c.height));this.jn=a;this.xc=this.width+a};yl.prototype.Hg=function(){return!this.Jd&&!this.Ia};function zl(a,b){this.B=b;this.pa=a;this.h=this.pa.D();this.u=b.u?new fl(this.h,b.u):null;this.Gf=Tf(b)&&!b.isCollapsed();this.isCollapsed=b.isCollapsed();this.zb=b.zb();this.s=b.s;this.$d=this.width=this.ag=this.height=0;this.rows=[];this.Sn=[];this.Mn=[];this.Ka=new vl(this.h);this.ra=new wl(this.h);this.Fj=this.ec=0}g=zl.prototype;
g.measure=function(){var a=!!this.B.G,b=(this.B.Hc?"cap"===this.B.Hc:this.h.ym)&&!this.u&&!a,c=this.Ka.Zk(this.B)?ql:rl;this.Ka.elements.push(new c(this.h));b?(a=new pl(this.h),this.Ka.elements.push(a),this.Ka.Xc=a.jf):a&&(this.Ka.Hq=!0,this.Ka.connection=new gl(this.h,this.B.G),this.Ka.elements.push(this.Ka.connection));this.B.A.length&&3==this.B.A[0].type&&!this.B.isCollapsed()?this.Ka.minHeight=this.h.aq:this.Ka.minHeight=this.h.$p;c=ql;this.Ka.elements.push(new c(this.h,"right"));this.rows.push(this.Ka);
a=new yl(this.h);this.Sn.push(a);c=kg(this.B);b=0;for(var d;d=c[b];b++){var e=new ml(this.h,d);this.isCollapsed&&d.iq?this.Mn.push(e):a.elements.push(e)}d=null;for(b=0;c=this.B.A[b];b++)if(c.isVisible()){!d||3!=c.type&&3!=d.type&&(1!=c.type&&5!=c.type||this.Gf)||(this.rows.push(a),a=new yl(this.h),this.Sn.push(a));for(d=0;e=c.ga[d];d++)a.elements.push(new ol(this.h,e,c));this.$m(c,a);d=c}this.isCollapsed&&(a.In=!0,a.elements.push(new nl(this.h)));(a.elements.length||a.Bf)&&this.rows.push(a);this.Xl();
this.rows.push(this.ra);this.Zm();a=this.rows;this.rows=[];for(b=0;b<a.length;b++)if(this.rows.push(a[b]),b!=a.length-1){c=this.rows;d=c.push;e=a[b];var f=a[b+1],h=new xl(this.h,this.Fn(e,f),this.width-this.ec);e.Ia&&(h.Cn=!0);f.Ia&&(h.Ds=!0);d.call(c,h)}for(d=c=b=a=0;e=this.rows[d];d++)e.measure(),b=Math.max(b,e.width),e.Ia&&(a=Math.max(a,e.width-ul(e).width)),c=Math.max(c,e.xc);this.$d=a;this.width=b;for(d=0;e=this.rows[d];d++)e.Ia&&(e.$d=this.$d);this.ag=Math.max(b,c);this.u&&(this.ec=this.u.width,
this.width+=this.u.width,this.ag+=this.u.width);this.$j();this.zn()};g.Xl=function(){this.ra.Jn=!!this.B.C;this.ra.minHeight=this.B.A.length&&3==this.B.A[this.B.A.length-1].type?this.h.qp:this.h.rp;this.ra.Zk(this.B)?this.ra.elements.push(new ql(this.h)):this.ra.elements.push(new rl(this.h));this.ra.Jn&&(this.ra.connection=new hl(this.h,this.B.C),this.ra.elements.push(this.ra.connection));this.ra.elements.push(new ql(this.h,"right"))};
g.$m=function(a,b){this.Gf&&1==a.type?(b.elements.push(new jl(this.h,a)),b.Yk=!0):3==a.type?(b.elements.push(new kl(this.h,a)),b.Ia=!0):1==a.type?(b.elements.push(new ll(this.h,a)),b.Jd=!0):5==a.type&&(b.minHeight=Math.max(b.minHeight,a.F()&&a.F().S?this.h.vp:this.h.Bm),b.Bf=!0);null==b.align&&(b.align=a.align)};
g.Zm=function(){for(var a=0,b;b=this.rows[a];a++){var c=b.elements;b.elements=[];b.Gj()&&b.elements.push(new sl(this.h,this.me(null,c[0])));if(c.length){for(var d=0;d<c.length-1;d++)b.elements.push(c[d]),b.elements.push(new sl(this.h,this.me(c[d],c[d+1])));b.elements.push(c[c.length-1]);b.Hg()&&b.elements.push(new sl(this.h,this.me(c[c.length-1],null)))}}};
g.me=function(a,b){if(!a&&b&&b.type&512)return this.h.Um;if(a&&a.type&128&&!b){if(a.type&64)return this.h.zc;if(a.type&256)return this.h.hb;if(a.type&512)return this.h.zc}return a&&a.type&32768&&b&&(b.type&2048||b.type&4096)?b.ac:a&&a.type&65536&&b&&(b.type&2048||b.type&4096)?b.ac-this.h.na:this.h.Qb};g.$j=function(){for(var a=0,b;b=this.rows[a];a++)if(b.Ia)Al(this,b);else{var c=this.Mg(b)-b.width;0<c&&Bl(b,c);b.type&6291456&&(b.xc=b.width)}};g.Mg=function(){return this.width-this.ec};
function Bl(a,b){a:{var c=0;for(var d;d=a.elements[c];c++)if(d.type&8){c=d;break a}c=null}a:{d=a.elements.length-1;for(var e;e=a.elements[d];d--)if(e.type&8){d=e;break a}d=null}if(a.Jd||a.Ia)a.xc+=b;-1==a.align?d.width+=b:0==a.align?(c.width+=b/2,d.width+=b/2):1==a.align?c.width+=b:d.width+=b;a.width+=b}function Al(a,b){var c=ul(b),d=b.width-c.width,e=a.$d;d=e-d;0<d&&Bl(b,d);d=b.width;e=a.Mg(b);c.width+=e-d;c.height=Math.max(c.height,b.height);b.width+=e-d;b.xc=Math.max(b.width,a.$d+b.jn)}g.Fn=function(){return this.h.Qb};
g.En=function(a,b){return b.type&8?a.La+b.height/2:a.type&4194304?(a=a.La+a.height-a.Dg,b.type&4096?a+b.height/2:a-b.height/2):a.type&2097152?b.type&2?a.Xc-b.height/2:a.Xc+b.height/2:a.La+a.height/2};function Cl(a,b){for(var c=b.U,d=0,e;e=b.elements[d];d++)e.type&8&&(e.height=b.height),e.U=c,e.lf=a.En(b,e),c+=e.width}
g.zn=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++)d.La=b,d.U=this.ec,b+=d.height,a=Math.max(a,d.xc),Cl(this,d);this.u&&this.B.C&&this.B.C.isConnected()&&(a=Math.max(a,mg(this.B.C.I()).width));this.ag=a+this.ec;this.height=b;this.Fj=this.Ka.Xc;this.ra.kc=b-this.ra.Dg};function Dl(a,b){this.B=a;this.M=b;a.aa();this.Ri=this.W="";this.h=b.pa.D()}g=Dl.prototype;g.nc=function(){El(this);Fl(this);Gl(this);this.B.wa.lm(this.W+"\n"+this.Ri);this.M.s&&this.B.wa.Pk();Hl(this)};function Hl(a){a.B.height=a.M.height;a.B.width=a.M.ag}function El(a){for(var b=0,c;c=a.M.Mn[b];b++)c.icon.pb.setAttribute("display","none")}function Fl(a){a.Gk();for(var b=1;b<a.M.rows.length-1;b++){var c=a.M.rows[b];c.In?a.Fg(c):c.Ia?a.Fk(c):c.Jd?a.Hk(c):a.vn(c)}a.Ck();a.Ek()}
g.Gk=function(){var a=this.M.Ka,b=a.elements,c=this.M.Ka;if(c.connection){var d=c.U+c.ac;$h(c.connection.jb,this.M.s?-d:d,0)}this.W+=N(a.U,this.M.Fj);for(c=0;d=b[c];c++)d.type&65536?this.W+=this.h.jg.tm:d.type&262144?this.W+=this.h.jg.Fr:d.type&2048?this.W+=d.shape.Ud:d.type&2?this.W+=this.h.df.path:d.type&8&&(this.W+=O("h",d.width));this.W+=O("v",a.height)};g.Fg=function(a){this.W+=this.h.Ze.path+O("v",a.height-this.h.Ze.height)};
g.Hk=function(a){var b=ul(a);this.Ho(a);var c="function"==typeof b.shape.bc?b.shape.bc(b.height):b.shape.bc;this.W+=O("H",b.U+b.width)+c+O("v",a.height-b.nf)};g.Fk=function(a){var b=ul(a);this.W+=O("H",b.U+b.ac+b.shape.width)+(b.shape.Do+O("h",-(b.ac-this.h.Yh.width))+this.h.Yh.Vl)+O("v",a.height-2*this.h.Yh.height)+this.h.Yh.pj+O("H",a.U+a.width);this.Ko(a)};g.vn=function(a){this.W+=O("V",a.La+a.height)};
g.Ck=function(){var a=this.M.ra,b=a.elements;this.Jo();for(var c=0,d="",e=b.length-1,f;f=b[e];e--)f.type&4096?d+=f.shape.Do:f.type&32768?d+=O("H",a.U):f.type&65536?d+=this.h.jg.gk:f.type&262144?(d+=this.h.jg.fq,c=this.h.jg.lr):f.type&8&&(d+=O("h",-1*f.width));this.W+=O("V",a.kc-c);this.W+=d};
g.Ek=function(){var a=this.M.u;if(this.M.u){var b=this.M.ec+this.M.u.ug;$h(this.B.u,this.M.s?-b:b,this.M.u.Fb)}a&&(b=a.Fb+a.height,a="function"==typeof a.shape.kh?a.shape.kh(a.height):a.shape.kh,this.W+=O("V",b)+a);this.W+="z"};
function Gl(a){for(var b=0,c;c=a.M.rows[b];b++)for(var d=0,e;e=c.elements[d];d++)if(e.type&256)a.Dk(e);else if(e.type&4||e.type&1){var f=a;if(e.type&1)var h=e.yn.J();else e.type&4&&(h=e.icon.pb);var k=e.lf-e.height/2,l=e.U,m="";f.M.s&&(l=-(l+e.width),e.tq&&(l+=e.width,m="scale(-1 1)"));e.type&4?(h.setAttribute("display","block"),h.setAttribute("transform","translate("+l+","+k+")"),mi(e.icon)):h.setAttribute("transform","translate("+l+","+k+")"+m);f.M.zb&&h.setAttribute("display","none")}}
g.Dk=function(a){var b=a.height,c=a.Fb;this.Ri+=Zk(a.U+a.Cc,a.lf-b/2)+O("v",c)+a.shape.bc+O("v",b-(a.nf+c))+O("h",a.width-a.Cc)+O("v",-b)+"z";this.Io(a)};g.Io=function(a){var b=a.lf-a.height/2;if(a.jb){var c=a.U+a.Cc+a.ug;this.M.s&&(c*=-1);$h(a.jb,c,b+a.Fb)}};g.Ko=function(a){var b=ul(a);if(b.jb){var c=a.U+a.$d+b.ac;this.M.s&&(c*=-1);$h(b.jb,c,a.La)}};g.Ho=function(a){var b=ul(a);if(b.jb){var c=a.U+a.width;this.M.s&&(c*=-1);$h(b.jb,c,a.La)}};
g.Jo=function(){var a=this.M.ra;if(a.connection){var b=a.connection,c=b.U;$h(b.jb,this.M.s?-c:c,a.kc)}};function Il(a,b,c,d){var e=a?a.j.id:void 0;d&&"workspace"==d.getType()&&(e=d.O.id);Il.i.constructor.call(this,e);this.$=a?a.id:null;this.to=c;this.oo=d;this.Kc=b}I(Il,Qd);Il.prototype.type="marker_move";Il.prototype.R=function(){var a=Il.i.R.call(this);a.isCursor=this.Kc;a.blockId=this.$;a.oldNode=this.to;a.newNode=this.oo;return a};Il.prototype.N=function(a){Il.i.N.call(this,a);this.Kc=a.isCursor;this.$=a.blockId;this.to=a.oldNode;this.oo=a.newNode};C(Pc,"marker_move",Il);function Ti(a,b,c){this.g=a;this.yl=c;this.ih=null;this.h=b;this.qf=null;a=this.Kc()?this.h.Am:this.h.Km;this.Tb=c.nk||a}g=Ti.prototype;g.J=function(){return this.v};g.Ng=function(){return this.yl};g.Kc=function(){return"cursor"==this.yl.type};
g.ya=function(){var a=this.Kc()?"blocklyCursor":"blocklyMarker";this.v=x(Xb,{"class":a},null);this.od=x(Xb,{width:this.h.Uh,height:this.h.Wm},this.v);this.Od=x(cc,{width:this.h.Uh,height:this.h.Wm,style:"display: none"},this.od);this.ze=x(cc,{"class":"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.od);this.ye=x($b,{transform:"",style:"display: none"},this.od);this.nd=x($b,{transform:"",style:"display: none",fill:"none","stroke-width":this.h.up},this.od);this.Kc()&&(a={attributeType:"XML",
attributeName:"fill",dur:"1s",values:this.Tb+";transparent;transparent;",repeatCount:"indefinite"},x(Ob,a,this.Od),x(Ob,a,this.ye),a.attributeName="stroke",x(Ob,a,this.nd));return this.v};function Jl(a,b){a.Kc()?(a.ih&&a.ih.sd(null),b.sd(a.J())):(a.ih&&a.ih.Zd(null),b.Zd(a.J()));a.ih=b}
g.nc=function(a,b){if(b){this.h=this.g.pa.D();var c=this.Kc()?this.h.Am:this.h.Km;this.Tb=this.yl.nk||c;this.Od.setAttribute("fill",this.Tb);this.ze.setAttribute("stroke",this.Tb);this.ye.setAttribute("fill",this.Tb);this.nd.setAttribute("stroke",this.Tb);this.Kc()&&(c=this.Tb+";transparent;transparent;",this.Od.firstChild.setAttribute("values",c),this.ye.firstChild.setAttribute("values",c),this.nd.firstChild.setAttribute("values",c));c=b.O.type;if("block"==b.getType())Kl(this,b);else if("output"==
b.getType())Kl(this,b);else if(1==c){var d=b.O;c=d.F();var e=d.Ce.x,f=d.Ce.y;d=Zk(0,0)+hg(this.h,d).bc;this.ye.setAttribute("d",d);this.ye.setAttribute("transform","translate("+e+","+f+")"+(this.g.s?" scale(-1 1)":""));this.qf=this.ye;Jl(this,c);Ll(this)}else if(3==c)f=b.O,c=f.F(),e=0,f=f.Ce.y,d=mg(c).width,this.g.s&&(e=-d),Ml(this,e,f,d),Jl(this,c),Ll(this);else if("previous"==b.getType())Kl(this,b);else if("field"==b.getType())c=b.O,e=c.Og().width,f=c.Og().height,Nl(this,0,0,e,f),Jl(this,c),Ll(this);
else if("workspace"==b.getType())e=b.mp,c=e.x,e=e.y,this.g.s&&(c-=this.h.Uh),Ml(this,c,e,this.h.Uh),Jl(this,this.g),Ll(this);else if("stack"==b.getType()){c=b.O;f=mg(c);e=f.width+this.h.Th;f=f.height+this.h.Th;var h=d=-this.h.Th/2,k=-this.h.Th/2;this.g.s&&(h=-(e+d));Nl(this,h,k,e,f);Jl(this,c);Ll(this)}c=b.F();a=new (H("marker_move"))(c,this.Kc(),a,b);E(a);a=this.qf.childNodes[0];void 0!==a&&a.beginElement&&a.beginElement()}else this.wb()};
function Kl(a,b){b=b.F();var c=b.width,d=b.height,e=.75*d,f=a.h.tp;if(b.G){var h=hg(a.h,b.G);a.nd.setAttribute("d",N(-f,e)+O("V",-f)+O("H",a.h.hg)+h.Ud+O("H",c+2*f)+O("V",e))}else b.u?(h=hg(a.h,b.u),a.nd.setAttribute("d",N(c,0)+O("h",-(c-h.width))+O("v",a.h.ff)+h.bc+O("V",d)+O("H",c))):a.nd.setAttribute("d",N(-f,e)+O("V",-f)+O("H",c+2*f)+O("V",e));a.g.s&&a.nd.setAttribute("transform","scale(-1 1)");a.qf=a.nd;Jl(a,b);Ll(a)}function Ll(a){a.wb();a.qf.style.display=""}
function Ml(a,b,c,d){a.Od.setAttribute("x",b);a.Od.setAttribute("y",c);a.Od.setAttribute("width",d);a.qf=a.Od}function Nl(a,b,c,d,e){a.ze.setAttribute("x",b);a.ze.setAttribute("y",c);a.ze.setAttribute("width",d);a.ze.setAttribute("height",e);a.qf=a.ze}g.wb=function(){this.Od.style.display="none";this.ze.style.display="none";this.ye.style.display="none";this.nd.style.display="none"};g.m=function(){this.v&&A(this.v)};function Ol(a,b,c){this.vg=c;this.Tc=a;this.Ca=x($b,{"class":"blocklyPath"},this.Tc);this.style=b;this.xl=this.Ag=null}g=Ol.prototype;g.lm=function(a){this.Ca.setAttribute("d",a)};g.Pk=function(){this.Ca.setAttribute("transform","scale(-1 1)")};g.sd=function(a){a?(this.Tc.appendChild(a),this.Ag=a):this.Ag=null};g.Zd=function(a){a?(this.Ag?this.Tc.insertBefore(a,this.Ag):this.Tc.appendChild(a),this.xl=a):this.xl=null};
g.Ha=function(a){this.Ca.setAttribute("stroke",this.style.Bc);this.Ca.setAttribute("fill",this.style.Zc);this.cp(a.S);this.um(!a.isEnabled()||Eh(a))};g.td=function(a){this.style=a};function gg(a,b,c){c?z(a.Tc,b):jc(a.Tc,b)}g.bp=function(a){a?this.Ca.setAttribute("filter","url(#"+this.vg.Gi+")"):this.Ca.setAttribute("filter","none")};g.cp=function(a){a&&(this.Ca.setAttribute("stroke","none"),this.Ca.setAttribute("fill",this.style.ui))};
g.um=function(a){gg(this,"blocklyDisabled",a);a&&this.Ca.setAttribute("fill","url(#"+this.vg.sn+")")};function Pl(a){this.name=a;this.Tl=this.h=null}g=Pl.prototype;g.pc=function(){return this.name+"-renderer"};g.X=function(a,b){this.h=this.rl();b&&(this.Tl=b,jd(this.h,b));this.h.xh(a);this.h.X()};g.ya=function(a,b){this.h.ya(a,this.name+"-"+b.name,"."+this.pc()+"."+b.pc())};g.bm=function(a,b){var c=this.D();c.m();this.h=this.rl();this.Tl&&jd(this.h,this.Tl);this.h.sj=c.sj;this.h.xh(b);this.h.X();this.ya(a,b)};g.m=function(){this.h&&this.h.m()};g.rl=function(){return new bl};
g.ho=function(a){return new zl(this,a)};g.bo=function(a,b){return new Dl(a,b)};g.co=function(a,b){return new Ol(a,b,this.h)};g.D=function(){return this.h};g.V=function(a){var b=this.ho(a);b.measure();this.bo(a,b).nc()};function Ql(){Ql.i.constructor.call(this);this.Oj=!1;this.Na=1;this.Op=30;this.Tm=-this.Qj/2}I(Ql,bl);Ql.prototype.Rk=function(a){return Ql.i.Rk.call(this,a).concat([a+" .blocklyInsertionMarker>.blocklyPathLight,",a+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.Im+";","stroke: none;","}"])};function Rl(a){this.M=a;this.Sg=this.H="";this.Oa=this.M.s;a=a.pa;this.h=a.D();this.Kb=a.Kb;this.xb=this.Kb.OFFSET;this.Sl=this.Kb.Sp;this.Ef=this.Kb.Kp;this.nh=this.Kb.Vj;this.Rq=this.Kb.bf;this.xr=this.Kb.df;this.Xn=this.Kb.Ze}Rl.prototype.Fg=function(a){this.M.s&&(this.H+=this.Xn.Ud+O("v",a.height-this.Xn.height-this.xb))};function Sl(a,b){var c=b.U+b.width-a.xb;b.Cn&&(a.H+=O("H",c));a.Oa&&(a.H+=O("H",c),b.height>a.xb&&(a.H+=O("V",b.La+b.height-a.xb)))};function Tl(a,b){Tl.i.constructor.call(this,a,b);this.Cd&&(this.width+=this.h.Na,this.height+=this.h.Na)}I(Tl,jl);function Ul(a,b){Ul.i.constructor.call(this,a,b);this.Cd&&(this.height+=this.h.Na)}I(Ul,kl);function Vl(a,b){Vl.i.constructor.call(this,a,b)}I(Vl,zl);g=Vl.prototype;g.Xl=function(){Vl.i.Xl.call(this);this.B.A.length&&3==this.B.A[this.B.A.length-1].type||(this.ra.minHeight=this.h.Qb-this.h.Na)};g.$m=function(a,b){this.Gf&&1==a.type?(b.elements.push(new Tl(this.h,a)),b.Yk=!0):3==a.type?(b.elements.push(new Ul(this.h,a)),b.Ia=!0):1==a.type?(b.elements.push(new ll(this.h,a)),b.Jd=!0):5==a.type&&(b.minHeight=Math.max(b.minHeight,this.h.Bm),b.Bf=!0);this.Gf||null!=b.align||(b.align=a.align)};
g.Zm=function(){for(var a=!1,b=0,c;c=this.rows[b];b++)c.Jd&&(a=!0);for(b=0;c=this.rows[b];b++){var d=c.elements;c.elements=[];c.Gj()&&c.elements.push(new sl(this.h,this.me(null,d[0])));if(d.length){for(var e=0;e<d.length-1;e++){c.elements.push(d[e]);var f=this.me(d[e],d[e+1]);c.elements.push(new sl(this.h,f))}c.elements.push(d[d.length-1]);c.Hg()&&(f=this.me(d[d.length-1],null),a&&c.Bf&&(f+=this.h.gi),c.elements.push(new sl(this.h,f)))}}};
g.me=function(a,b){if(!a)return b&&b.type&1&&b.yb?this.h.Qb:b&&b.type&256?this.h.Mm:b&&b.type&512?this.h.Um:this.h.hb;if(!(a.type&128)&&(!b||b.type&512))return a.type&1&&a.yb?this.h.Qb:a.type&4?2*this.h.hb+1:a.type&2?this.h.zc:a.type&6144?this.h.hb:a.type&65536?this.h.Pp:a.type&524288?this.h.zc:this.h.hb;if(a.type&128&&!b){if(a.type&64)return this.h.zc;if(a.type&256)return this.h.hb;if(a.type&512)return this.h.zc}if(!(a.type&128)&&b&&b.type&128){if(a.type&1&&a.yb){if(b.type&256||b.type&64)return this.h.Vp}else{if(b.type&
256||b.type&64)return this.h.Mm;if(b.type&512)return this.h.hb}return this.h.hb-1}if(a.type&4&&b&&!(b.type&128))return this.h.hb;if(a.type&256&&b&&b.type&1)return b.yb?this.h.Qb:this.h.hb;if(a.type&32768&&b){if(b.type&2)return this.h.zc;if(b.type&2048)return b.ac;if(b.type&4096)return a=(this.s?1:-1)*this.h.Na/2,b.ac+a}if(a.type&65536&&b){if(b.type&2048)return b.ac-this.h.na;if(b.type&4096)return a=(this.s?1:-1)*this.h.Na/2,b.ac-this.h.na+a}return a.type&1&&b&&b.type&1&&a.yb==b.yb||b&&b.type&524288?
this.h.hb:this.h.Qb};g.Fn=function(a,b){return a.type&2097152&&b.type&4194304?this.h.wp:a.type&2097152||b.type&4194304?this.h.zc:a.Jd&&b.Jd?this.h.hb:!a.Ia&&b.Ia?this.h.pp:a.Ia&&b.Ia||!a.Ia&&b.Bf||a.Bf?this.h.hb:this.h.Qb};
g.En=function(a,b){if(b.type&8)return a.La+b.height/2;if(a.type&4194304)return a=a.La+a.height-a.Dg,b.type&4096?a+b.height/2:a-b.height/2;if(a.type&2097152)return b.type&2?a.Xc-b.height/2:a.Xc+b.height/2;var c=a.La;b.type&1||b.type&4?(c+=b.height/2,(a.Yk||a.Ia)&&b.height+this.h.Vm<=a.height&&(c+=this.h.Vm)):c=b.type&256?c+b.height/2:c+a.height/2;return c};
g.$j=function(){if(this.Gf){for(var a=0,b=null,c=this.rows.length-1,d;d=this.rows[c];c--)d.El=a,d.type&8388608&&(d.Ia&&Al(this,d),b&&b.Ia&&d.width<b.width?d.El=b.width:a=d.width,b=d);for(c=a=0;d=this.rows[c];c++)d.Ia?a=this.Mg(d):d.type&8?d.width=Math.max(a,d.El):(a=Math.max(a,d.El)-d.width,0<a&&Bl(d,a),a=d.width)}else Vl.i.$j.call(this)};g.Mg=function(a){return this.Gf&&a.Ia?this.$d+this.h.Op+this.ec:Vl.i.Mg.call(this,a)};
g.zn=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++){d.La=b;d.U=this.ec;b+=d.height;a=Math.max(a,d.xc);var e=b-this.Ka.jf;d==this.ra&&e<this.h.gg&&(e=this.h.gg-e,this.ra.height+=e,b+=e);Cl(this,d)}this.u&&this.B.C&&this.B.C.isConnected()&&(a=Math.max(a,mg(this.B.C.I()).width-this.h.Na));this.ra.kc=b-this.ra.Dg;this.ag=a+this.ec+this.h.Na;this.width+=this.h.Na;this.height=b+this.h.Na;this.Fj=this.Ka.Xc};function Wl(a,b){Wl.i.constructor.call(this,a,b);this.Ic=new Rl(b)}I(Wl,Dl);g=Wl.prototype;g.nc=function(){El(this);Fl(this);Gl(this);var a=this.B.wa;a.lm(this.W+"\n"+this.Ri);var b=this.Ic;a.Ne.setAttribute("d",b.H+"\n"+b.Sg);this.M.s&&a.Pk();Hl(this)};
g.Gk=function(){var a=this.Ic,b=this.M.Ka;a.H+=N(b.U,a.M.Fj);for(var c=0,d;d=b.elements[c];c++)d.type&32768?a.H+=a.Kb.Sm:d.type&65536?a.H+=a.Sl.tm(a.Oa):d.type&2048?a.H+=a.Rq.Ud:d.type&2?a.H+=a.xr.path(a.Oa):d.type&8&&0!=d.width&&(a.H+=O("H",d.U+d.width-a.xb));a.H+=O("H",b.U+b.width-a.xb);Sl(this.Ic,this.M.Ka);Wl.i.Gk.call(this)};g.Fg=function(a){this.Ic.Fg(a);Wl.i.Fg.call(this,a)};
g.Hk=function(a){var b=this.Ic,c=ul(a);if(b.Oa){var d=a.height-c.nf;b.H+=Zk(c.U+c.width-b.xb,a.La)+b.nh.bc(b.Oa)+O("v",d)}else b.H+=Zk(c.U+c.width,a.La)+b.nh.bc(b.Oa);Wl.i.Hk.call(this,a)};g.Fk=function(a){var b=this.Ic,c=ul(a);if(b.Oa){var d=a.height-2*b.Ef.height;b.H+=Zk(c.U,a.La)+b.Ef.Vl(b.Oa)+O("v",d)+b.Ef.pj(b.Oa)+$k(a.width-c.U-b.Ef.width,0)}else b.H+=Zk(c.U,a.La+a.height)+b.Ef.pj(b.Oa)+$k(a.width-c.U-b.Ef.width,0);Wl.i.Fk.call(this,a)};
g.vn=function(a){Sl(this.Ic,a);this.W+=O("H",a.U+a.width)+O("V",a.La+a.height)};g.Ck=function(){var a=this.Ic,b=this.M.ra;if(a.Oa)a.H+=O("V",b.kc-a.xb);else{var c=a.M.ra.elements[0];c.type&32768?a.H+=Zk(b.U+a.xb,b.kc-a.xb):c.type&65536&&(a.H+=Zk(b.U,b.kc),a.H+=a.Sl.gk())}Wl.i.Ck.call(this)};
g.Ek=function(){var a=this.Ic,b=a.M.u;b&&(b=b.Fb+b.height,a.Oa?a.H+=Zk(a.M.ec,b):(a.H+=Zk(a.M.ec+a.xb,a.M.ra.kc-a.xb),a.H+=O("V",b)),a.H+=a.nh.kh(a.Oa));a.Oa||(b=a.M.Ka,a.H=b.elements[0].type&65536?a.H+O("V",a.Sl.height):a.H+O("V",b.Xc+a.xb));Wl.i.Ek.call(this)};
g.Dk=function(a){var b=this.Ic,c=b.xb,d=a.U+a.Cc,e=a.lf-a.height/2,f=a.width-a.Cc,h=e+c;b.Oa?(e=a.height-(a.Fb+a.nf)+c,b.Sg+=Zk(d-c,h)+O("v",a.Fb-c)+b.nh.bc(b.Oa)+O("v",e)+O("h",f)):b.Sg+=Zk(a.U+a.width+c,h)+O("v",a.height)+O("h",-f)+Zk(d,e+a.Fb)+b.nh.bc(b.Oa);Wl.i.Dk.call(this,a)};g.Io=function(a){var b=a.lf-a.height/2;if(a.jb){var c=a.U+a.Cc+this.h.Na;this.M.s&&(c*=-1);$h(a.jb,c,b+a.Fb+this.h.Na)}};
g.Ko=function(a){var b=ul(a);if(b.jb){var c=a.U+a.$d+b.ac;c=this.M.s?-1*c:c+this.h.Na;$h(b.jb,c,a.La+this.h.Na)}};g.Ho=function(a){var b=ul(a);if(b.jb){var c=a.U+a.width+this.h.Na;this.M.s&&(c*=-1);$h(b.jb,c,a.La)}};g.Jo=function(){var a=this.M.ra;if(a.connection){var b=a.connection,c=b.U;$h(b.jb,(this.M.s?-c:c)+this.h.Na/2,a.kc+this.h.Na)}};function Xl(a){this.pf=a;this.OFFSET=.5;this.Sm=N(this.OFFSET,this.OFFSET)}g=Xl.prototype;g.X=function(){this.Kp=Yl(this);this.Sp=Zl(this);this.Vj=this.vl();this.bf=this.ul();this.Ze=this.tl();this.df=this.wl()};function Yl(a){var b=a.pf.na;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b+a)-a,d=N(c,c)+al("0 0,0",b,W(-c-a,b-c)),e=al("0 0,0",b+a,W(b+a,b+a)),f=N(c,-c)+al("0 0,0",b+a,W(b-c,c+a));return{width:b+a,height:b,Vl:function(h){return h?d:""},pj:function(h){return h?e:f}}}
function Zl(a){var b=a.pf.na;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b-a)+a,d=N(c,c)+al("0 0,1",b-a,W(b-c,-c+a)),e=N(a,b)+al("0 0,1",b-a,W(b,-b+a)),f=-c,h=N(c,f)+al("0 0,1",b-a,W(-c+a,-f-b));return{height:b,tm:function(k){return k?d:e},gk:function(){return h}}}
g.vl=function(){var a=this.pf.gi,b=this.pf.mg,c=N(-2,-b+3.4)+$k(-.45*a,-2.1),d=O("v",2.5)+N(.97*-a,2.5)+Yk("q",[W(.05*-a,10),W(.3*a,9.5)])+N(.67*a,-1.9)+O("v",2.5),e=O("v",-1.5)+N(-.92*a,-.5)+Yk("q",[W(-.19*a,-5.5),W(0,-11)])+N(.92*a,1),f=N(-5,b-.7)+$k(.46*a,-2.1);return{width:a,height:b,kh:function(h){return h?c:e},bc:function(h){return h?d:f}}};g.ul=function(){return{Ud:O("h",this.OFFSET)+this.pf.bf.Ud}};g.tl=function(){return{Ud:$k(5.1,2.6)+N(-10.2,6.8)+$k(5.1,2.6),height:12,width:10.2}};
g.wl=function(){var a=N(25,-8.7)+Yk("c",[W(29.7,-6.2),W(57.2,-.5),W(75,8.7)]),b=Yk("c",[W(17.8,-9.2),W(45.3,-14.9),W(75,-8.7)])+Zk(100.5,this.pf.df.height+.5);return{path:function(c){return c?a:b}}};function $l(a,b,c){this.vg=c;this.Tc=a;this.Eh=x($b,{"class":"blocklyPathDark",transform:"translate(1,1)"},this.Tc);this.Ca=x($b,{"class":"blocklyPath"},this.Tc);this.Ne=x($b,{"class":"blocklyPathLight"},this.Tc);this.pk="#000000";this.style=b}I($l,Ol);g=$l.prototype;g.lm=function(a){this.Ca.setAttribute("d",a);this.Eh.setAttribute("d",a)};g.Pk=function(){this.Ca.setAttribute("transform","scale(-1 1)");this.Ne.setAttribute("transform","scale(-1 1)");this.Eh.setAttribute("transform","translate(1,1) scale(-1 1)")};
g.Ha=function(a){this.Ne.style.display="";this.Eh.style.display="";this.Ne.setAttribute("stroke",this.style.Bc);this.Eh.setAttribute("fill",this.pk);$l.i.Ha.call(this,a);this.Ca.setAttribute("stroke","none")};g.td=function(a){this.style=a;this.pk=ra("#000",this.style.Zc,.2)||this.pk};g.bp=function(a){a?(this.Ca.setAttribute("filter","url(#"+this.vg.Gi+")"),this.Ne.style.display="none"):(this.Ca.setAttribute("filter","none"),this.Ne.style.display="inline")};
g.cp=function(a){a&&(this.Ne.style.display="none",this.Eh.setAttribute("fill",this.style.ui),this.Ca.setAttribute("stroke","none"),this.Ca.setAttribute("fill",this.style.ui))};g.um=function(a){$l.i.um.call(this,a);a&&this.Ca.setAttribute("stroke","none")};function am(a){am.i.constructor.call(this,a);this.Kb=null}I(am,Pl);g=am.prototype;g.X=function(a,b){am.i.X.call(this,a,b);this.Kb=new Xl(this.D());this.Kb.X()};g.bm=function(a,b){am.i.bm.call(this,a,b);this.Kb.X()};g.rl=function(){return new Ql};g.ho=function(a){return new Vl(this,a)};g.bo=function(a,b){return new Wl(a,b)};g.co=function(a,b){return new $l(a,b,this.D())};C(Rc,"geras",am);(function(){var a={name:"escape",Ba:function(b){return!b.options.readOnly},va:function(){Ge();return!0}};sj.register(a);R(27,a.name)})();(function(){var a={name:"delete",Ba:function(b){return!b.options.readOnly&&M&&M.Lc()},va:function(b,c){c.preventDefault();if($g())return!1;Fj(M);return!0}};sj.register(a);R(46,a.name);R(8,a.name)})();
(function(){var a={name:"copy",Ba:function(c){return!c.options.readOnly&&!$g()&&M&&M.Lc()&&M.$a()},va:function(c,d){d.preventDefault();Ge();Gj(M);return!0}};sj.register(a);var b=uj(67,[17]);R(b,a.name);b=uj(67,[18]);R(b,a.name);b=uj(67,[91]);R(b,a.name)})();(function(){var a={name:"cut",Ba:function(c){return!c.options.readOnly&&!$g()&&M&&M.Lc()&&M.$a()&&!M.j.Ld},va:function(){Gj(M);Fj(M);return!0}};sj.register(a);var b=uj(88,[17]);R(b,a.name);b=uj(88,[18]);R(b,a.name);b=uj(88,[91]);R(b,a.name)})();
(function(){var a={name:"paste",Ba:function(c){return!c.options.readOnly&&!$g()},va:function(){return Hj()}};sj.register(a);var b=uj(86,[17]);R(b,a.name);b=uj(86,[18]);R(b,a.name);b=uj(86,[91]);R(b,a.name)})();(function(){var a={name:"undo",Ba:function(c){return!c.options.readOnly&&!$g()},va:function(c){Ge();uf(c,!1);return!0}};sj.register(a);var b=uj(90,[17]);R(b,a.name);b=uj(90,[18]);R(b,a.name);b=uj(90,[91]);R(b,a.name)})();
(function(){var a={name:"redo",Ba:function(c){return!$g()&&!c.options.readOnly},va:function(c){Ge();uf(c,!0);return!0}};sj.register(a);var b=uj(90,[16,17]);R(b,a.name);b=uj(90,[16,18]);R(b,a.name);b=uj(90,[16,91]);R(b,a.name);b=uj(89,[17]);R(b,a.name)})();var bm=null,cm=null,dm=null;function em(){var a=bm();fm("xml="+encodeURIComponent(a),gm)}var hm=new Map;function fm(a,b){var c=void 0===c?"POST":c;hm.has("/storage")&&hm.get("/storage").abort();var d=new XMLHttpRequest;hm.set("/storage",d);d.onload=function(){200===this.status?b&&b.call(d):im(V("Games.httpRequestError",!1)+"\nXHR status: "+d.status);hm.delete("/storage")};d.open(c,"/storage");"POST"===c&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(a)}
function gm(){window.location.hash=this.responseText.trim();im(V("Games.linkAlert",!1).replace("%1",window.location.href));dm=bm()}function jm(){var a=this.responseText.trim();a.length?cm(a):im(V("Games.hashError",!1).replace("%1",window.location.hash));dm=bm()}function im(a){if("object"===typeof X){var b=T("linkButton");X.Br(b,a)}else alert(a)};var K=null,km="";function lm(){var a=V("Games.bird",!1);Ak(a);if(a=T("linkButton"))sk?a.style.display="none":(bm=mm,cm=nm,Ek(a,em));(a=T("languageMenu"))&&a.addEventListener("change",om,!0)}
function pm(){var a='<xml><block type="'+(1===U?"bird_heading":5>U?"bird_ifElse":"controls_if")+'" x="70" y="70" deletable="false"></block></xml>';if(!sk&&1<window.location.hash.length)fm("key="+encodeURIComponent(window.location.hash.substring(1)),jm);else{try{var b=window.sessionStorage.ao}catch(d){}b&&delete window.sessionStorage.ao;var c=Bk(U);(a=b||c||a)&&nm(a)}}function nm(a){a=sd(a);K.clear();td(a,K);a=K;a.Qe.length=0;a=a.oh.length=0;for(var b;b=bd[a];a++)b.cb=!1}
function mm(){var a=ld(!0);if(1===K.sa(!1).length&&a.querySelector){var b=a.querySelector("block");b&&(b.removeAttribute("x"),b.removeAttribute("y"))}return rd(a)}function qm(){null!==dm&&dm!==mm()&&(window.location.hash="",dm=null)}function rm(){var a={rtl:rk,trashcan:!0},b=T("toolbox");b&&(a.toolbox=b);a.media="third-party/blockly/media/";a.oneBasedIndex=!1;K=aj(a);vf(K,qm)}function sm(){window.location=(sk?"index.html":"./")+"?lang="+pk}
function om(){window.sessionStorage&&(window.sessionStorage.ao=mm());var a=T("languageMenu");a=encodeURIComponent(a.options[a.selectedIndex].value);var b=window.location.search;b=1>=b.length?"?lang="+a:/[?&]lang=[^&]*/.test(b)?b.replace(/([?&]lang=)[^&]*/,"$1"+a):b.replace(/\?/,"?lang="+a+"&");window.location=window.location.protocol+"//"+window.location.host+window.location.pathname+b}
function tm(){10>U?location=location.protocol+"//"+location.host+location.pathname+"?lang="+pk+"&level="+(U+1):sm()}function um(a){if("click"===a.type&&"touchend"===vm&&wm+2E3>Date.now()||vm===a.type&&wm+400>Date.now())return a.preventDefault(),a.stopPropagation(),!0;vm=a.type;wm=Date.now();return!1}var vm=null,wm=0;var X={te:!1,pn:null,Ai:null,Ci:null,Ei:null,Di:null,Dj:function(a,b,c,d,e,f){function h(){if(X.te){m.style.visibility="visible";m.style.zIndex=10;p.style.visibility="hidden";var y=a.getElementsByClassName("primary");y.length||(y=a.getElementsByClassName("secondary"),y.length||(y=a.getElementsByTagName("button")));y.length&&y[0].focus()}}if(!a)throw TypeError("Content not found: "+a);for(var k=a.getElementsByClassName("addHideHandler"),l;l=k[0];)l.addEventListener("click",X.Rg,!0),l.addEventListener("touchend",
X.Rg,!0),l.classList.remove("addHideHandler");X.te&&X.Rg(!1);Ec&&Ge(!0);X.te=!0;X.pn=b;X.Ai=f;var m=T("dialog");f=T("dialogShadow");var p=T("dialogBorder"),t;for(t in e)m.style[t]=e[t];d&&(f.style.visibility="visible",f.style.opacity=.3,f.style.zIndex=9,d=document.createElement("div"),d.id="dialogHeader",m.appendChild(d),X.Ci=Cb(d,"mousedown",null,X.oq));m.appendChild(a);a.classList.remove("dialogHiddenContent");try{b.blur()}catch(y){}c&&b?(X.bj(b,!1,.2),X.bj(m,!0,.8),setTimeout(h,175)):h()},qn:0,
rn:0,oq:function(a){X.xk();if(!ab(a)){var b=T("dialog");X.qn=b.offsetLeft-a.clientX;X.rn=b.offsetTop-a.clientY;X.Ei=Cb(document,"mouseup",null,X.xk);X.Di=Cb(document,"mousemove",null,X.pq);a.stopPropagation()}},pq:function(a){var b=T("dialog"),c=X.qn+a.clientX;a=X.rn+a.clientY;a=Math.max(a,0);a=Math.min(a,window.innerHeight-b.offsetHeight);c=Math.max(c,0);c=Math.min(c,window.innerWidth-b.offsetWidth);b.style.left=c+"px";b.style.top=a+"px"},xk:function(){X.Ei&&(v(X.Ei),X.Ei=null);X.Di&&(v(X.Di),X.Di=
null)},Rg:function(a){function b(){d.style.zIndex=-1;d.style.visibility="hidden";T("dialogBorder").style.visibility="hidden"}a=void 0===a?!0:a;if(X.te){X.xk();X.Ci&&(v(X.Ci),X.Ci=null);X.te=!1;X.Ai&&X.Ai();X.Ai=null;var c=a?X.pn:null;a=T("dialog");var d=T("dialogShadow");d.style.opacity=0;c&&a?(X.bj(a,!1,.8),X.bj(c,!0,.2),setTimeout(b,175)):b();a.style.visibility="hidden";a.style.zIndex=-1;for((c=T("dialogHeader"))&&c.parentNode.removeChild(c);a.firstChild;)c=a.firstChild,c.classList.add("dialogHiddenContent"),
document.body.appendChild(c)}},bj:function(a,b,c){function d(){e.style.width=f.width+"px";e.style.height=f.height+"px";e.style.left=f.x+"px";e.style.top=f.y+"px";e.style.opacity=c}if(a){var e=T("dialogBorder"),f=X.getBBox(a);b?(e.className="dialogAnimate",setTimeout(d,1)):(e.className="",d());e.style.visibility="visible"}},getBBox:function(a){var b=Ga(a);b={x:b.x,y:b.y};a.getBBox?(a=a.getBBox(),b.height=a.height,b.width=a.width):(b.height=a.offsetHeight,b.width=a.offsetWidth);return b},Br:function(a,
b){var c=T("containerStorage");c.textContent="";b=ba(b.split("\n"));for(var d=b.next();!d.done;d=b.next()){var e=document.createElement("p");e.appendChild(document.createTextNode(d.value));c.appendChild(e)}c=T("dialogStorage");X.Dj(c,a,!0,!0,{width:"50%",left:"25%",top:"5em"},X.Ar);X.vr()},Ym:function(){if(!Bk(U))if(X.te||K.Ra())setTimeout(X.Ym,15E3);else{var a=T("dialogAbort"),b=T("abortOk");b.addEventListener("click",sm,!0);b.addEventListener("touchend",sm,!0);X.Dj(a,null,!1,!0,{width:"40%",left:"30%",
top:"3em"},function(){document.body.removeEventListener("keydown",X.Xm,!0)});document.body.addEventListener("keydown",X.Xm,!0)}},Bi:function(a){!X.te||13!==a.keyCode&&27!==a.keyCode&&32!==a.keyCode||(X.Rg(!0),a.stopPropagation(),a.preventDefault())},vr:function(){document.body.addEventListener("keydown",X.Bi,!0)},Ar:function(){document.body.removeEventListener("keydown",X.Bi,!0)},Xm:function(a){X.Bi(a);13!==a.keyCode&&32!==a.keyCode||sm()}};window.BlocklyDialogs=X;var xm="";function ym(a){if(a){var b=a.match(/^block_id_([^']+)$/);b&&(a=b[1])}Wi(a)}function zm(a){a=a.replace(/(,\s*)?'block_id_[^']+'\)/g,")");return a.replace(/\s+$/,"")}function Am(){setTimeout(function(){var a=document.createElement("script");a.type="text/javascript";a.src="third-party/JS-Interpreter/compressed.js";document.head.appendChild(a)},1)}
function Bm(){setTimeout(function(){var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.href="common/prettify.css";document.head.appendChild(a);a=document.createElement("script");a.type="text/javascript";a.src="common/prettify.js";document.head.appendChild(a)},1)}
function Cm(){var a=T("dialogDone");if(K){var b=T("dialogLinesText");b.textContent="";var c=xm;c=zm(c);var d=c.replace(/\/\/[^\n]*/g,"");d=d.replace(/\/\*.*\*\//g,"");d=d.replace(/[ \t]+\n/g,"\n");d=d.replace(/\n+/g,"\n");d=d.trim();d=d.split("\n").length;var e=T("containerCode");e.textContent=c;"function"===typeof prettyPrintOne&&(c=e.innerHTML,c=prettyPrintOne(c,"js"),e.innerHTML=c);c=1===d?V("Games.linesOfCode1",!1):V("Games.linesOfCode2",!1).replace("%1",String(d));b.appendChild(document.createTextNode(c))}b=
10>U?V("Games.nextLevel",!1).replace("%1",String(U+1)):V("Games.finalLevel",!1);c=T("doneOk");c.addEventListener("click",tm,!0);c.addEventListener("touchend",tm,!0);X.Dj(a,null,!1,!0,{width:"40%",left:"30%",top:"3em"},function(){document.body.removeEventListener("keydown",Dm,!0)});document.body.addEventListener("keydown",Dm,!0);T("dialogDoneText").textContent=b}function Dm(a){X.Bi(a);13!==a.keyCode&&32!==a.keyCode||tm()};var Dk="bird",Em,Y,Fm,Gm,Hm,Im=[],Jm=[];function Z(a,b,c,d){this.Ph=a;this.Qh=b;this.x1=c;this.y1=d}
var Km=[{start:new r(20,20),Sc:90,gb:new r(50,50),Mb:new r(80,80),jc:[]},{start:new r(20,20),Sc:0,gb:new r(80,20),Mb:new r(80,80),jc:[new Z(0,50,60,50)]},{start:new r(20,70),Sc:270,gb:new r(50,20),Mb:new r(80,70),jc:[new Z(50,50,50,100)]},{start:new r(20,80),Sc:0,gb:null,Mb:new r(80,20),jc:[new Z(0,0,65,65)]},{start:new r(80,80),Sc:270,gb:null,Mb:new r(20,20),jc:[new Z(0,100,65,35)]},{start:new r(20,40),Sc:0,gb:new r(80,20),Mb:new r(20,80),jc:[new Z(0,59,50,59)]},{start:new r(80,80),Sc:180,gb:new r(80,
20),Mb:new r(20,20),jc:[new Z(0,70,40,70),new Z(70,50,100,50)]},{start:new r(20,25),Sc:90,gb:new r(80,25),Mb:new r(80,75),jc:[new Z(50,0,50,25),new Z(75,50,100,50),new Z(50,100,50,75),new Z(0,50,25,50)]},{start:new r(80,70),Sc:180,gb:new r(20,20),Mb:new r(80,20),jc:[new Z(0,69,31,100),new Z(40,50,71,0),new Z(80,50,100,50)]},{start:new r(20,20),Sc:90,gb:new r(80,50),Mb:new r(20,20),jc:[new Z(40,60,60,60),new Z(40,60,60,30),new Z(60,30,100,30)]}][U-1];
function Lm(){var a=T("svgBird");Km.jc.push(new Z(-5,-5,-5,105),new Z(-5,105,105,105),new Z(105,105,105,-5),new Z(105,-5,-5,-5));for(var b=ba(Km.jc),c=b.next();!c.done;c=b.next())c=c.value,x("line",{x1:c.Ph/100*400,y1:400*(1-c.Qh/100),x2:c.x1/100*400,y2:400*(1-c.y1/100),stroke:"#CCB","stroke-width":10,"stroke-linecap":"round"},a);x("image",{id:"nest",height:100,width:100},a).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","bird/nest.png");Km.gb&&(b=x("g",{id:"worm"},a),x("image",{height:100,
width:100},b).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","bird/worm.png"));b=x("clipPath",{id:"birdClipPath"},a);x("rect",{id:"clipRect",height:120,width:120},b);x("image",{id:"bird",height:480,width:1440,"clip-path":"url(#birdClipPath)"},a).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","bird/birds-120.png");x("rect",{"class":"edges",height:400,width:400},a);b=3<U;c=4<U;for(var d=1,e=.1;.9>e;e+=.1)b&&x("line",{"class":"edges",x1:400*e,y1:400,x2:400*e,y2:400-9*d},a),c&&
x("line",{"class":"edges",x1:0,y1:400*e,x2:9*e*d,y2:400*e},a),2===d&&(b&&x("text",{"class":"edgeX",x:400*e+2,y:396},a).appendChild(document.createTextNode(Math.round(100*e))),c&&x("text",{"class":"edgeY",x:3,y:400*e-2},a).appendChild(document.createTextNode(Math.round(100-100*e)))),d=1===d?2:1}var Mm=0;
function Nm(){if(!K.Ra()&&!Bk(U)){var a=rd(ld()),b=wi(K).g.sa(!0),c=T("dialogHelp"+U),d=null,e=null;if(1===U){if((a.includes(">90<")||!a.includes("bird_heading"))&&!fh){e={width:"370px",top:"140px"};e[rk?"right":"left"]="215px";var f=K.sa(!0);d=(f.length?f:b)[0].J()}}else if(2===U)a.includes("bird_noWorm")||(e={width:"350px",top:"170px"},e[rk?"right":"left"]="180px",d=b[1].J());else if(4===U)a.includes("bird_compare")||(e={width:"350px",top:"230px"},e[rk?"right":"left"]="180px",d=b[2].J());else if(5===
U){if(Mm||(Mm=setInterval(Nm,100)),!a.includes("mutation else")){e=K.sa(!1);var h=ba(e);for(e=h.next();!e.done&&(f=e.value,"controls_if"!==f.type);e=h.next());f.Ab.isVisible()?(c=T("dialogMutatorHelp"),d=wi(f.Ab.g).g.sa(!0)[1].J(),f=Ga(d),e={width:"340px",top:f.y+60+"px"},e.left=f.x-(rk?310:0)+"px"):(h=Ga(f.J()),e={width:"340px",top:h.y+100+"px"},e.left=h.x-(rk?280:0)+"px",d=f.J())}}else if(6===U){if(!a.includes("mutation")){e=K.sa(!1);f=ba(e);for(e=f.next();!e.done&&(h=e.value,"controls_if"!==h.type);e=
f.next());f=Ga(h.J());e={width:"350px",top:f.y+220+"px"};e.left=f.x-(rk?350:0)+"px";d=h.J()}}else 8!==U||a.includes("bird_and")||(e={width:"350px",top:"360px"},e[rk?"right":"left"]="450px",d=b[4].J());c&&e?c.parentNode!==T("dialog")&&X.Dj(c,d,!0,!1,e,null):X.Rg(!1)}}
function Om(a){Jm.forEach(clearTimeout);Jm.length=0;Y=new r(Km.start.x,Km.start.y);Gm=Fm=Km.Sc;Hm=!Km.gb;a?(Pm(3),Jm.push(setTimeout(function(){Pm(2);Jm.push(setTimeout(function(){Pm(1)},400))},400))):Pm(1);if(a=T("worm"))a.setAttribute("transform","translate("+(Km.gb.x/100*400-50)+" "+(400*(1-Km.gb.y/100)-50)+")"),jc(a,"eaten");a=T("nest");a.setAttribute("x",Km.Mb.x/100*400-50);a.setAttribute("y",400*(1-Km.Mb.y/100)-50)}
function Qm(a){if(!um(a)){a=T("runButton");var b=T("resetButton");b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px");a.style.display="none";b.style.display="inline";Om(!1);Rm()}}function Sm(a){um(a)||(T("runButton").style.display="inline",T("resetButton").style.display="none",Wi(null),Om(!1))}var Tm=0,Um=1,Vm=-1,Wm=2,Xm=-2;
function Ym(a,b){function c(e){a.setProperty(b,e,a.createNativeFunction(d,!1))}var d=function(e,f){var h=e*Math.PI/180;Y.x+=Math.cos(h);Y.y+=Math.sin(h);Im.push(["move",Y.x,Y.y,e,f]);if(Hm&&15>ta(Y,Km.Mb))throw Im.push(["play","quack",null]),Zm(Km.Mb),Im.push(["finish",null]),!0;!Hm&&Km.gb&&15>ta(Y,Km.gb)&&(Zm(Km.gb),Im.push(["worm",null]),Im.push(["play","worm",null]),Hm=!0);a:{e=ba(Km.jc);for(f=e.next();!f.done;f=e.next()){f=f.value;h=Y;var k=f.x1-f.Ph,l=f.y1-f.Qh,m=(h.x-f.Ph)*k+(h.y-f.Qh)*l,p=
k*k+l*l;m=p?m/p:-1;if(6>ta(h,0>m?new r(f.Ph,f.Qh):1<m?new r(f.x1,f.y1):new r(f.Ph+m*k,f.Qh+m*l))){e=!0;break a}}e=!1}if(e)throw Im.push(["play","whack",null]),!1;};c("heading");d=function(){return!Hm};c("noWorm");d=function(){return Y.x};c("getX");d=function(){return Y.y};c("getY")}
function Rm(){if("Interpreter"in window){Im.length=0;M&&Og(M);var a=S;var b=K;b||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),b=Ec);var c=[];a.X(b);b=b.sa(!0);for(var d=0,e;e=b[d];d++){var f=jk(a,e);Array.isArray(f)&&(f=f[0]);f&&(e.u&&(f=a.Ro(f),a.ef&&!e.Hj&&(f=kk(a.ef,e)+f),a.Uc&&!e.Hj&&(f+=kk(a.Uc,e))),c.push(f))}c=c.join("\n");c=a.finish(c);c=c.replace(/^\s+\n/,"");c=c.replace(/\n\s+$/,"\n");xm=a=c=c.replace(/[ \t]+\n/g,"\n");km=mm();c=a.indexOf("if (");b=a.indexOf("}\n");
-1!==c&&-1!==b&&(a=a.substring(c,b+2));c=Tm;a=new Interpreter("while(true) {\n"+a+"}",Ym);try{for(b=1E5;a.step();)if(0>=b--)throw Infinity;c=Vm}catch(h){Infinity===h?c=Wm:!0===h?c=Um:!1===h?c=Xm:(c=Xm,window.alert(h))}Em=c===Um?10:15;Om(!1);Jm.push(setTimeout($m,1))}else setTimeout(Rm,99)}
function $m(){Jm.length=0;var a=Im.shift();if(a){ym(a.pop());if("move"===a[0]||"goto"===a[0]){var b=ba(a);b.next();Y.x=b.next().value;Y.y=b.next().value;Fm=b.next().value;Pm("move"===a[0]?2:1)}else"worm"===a[0]?z(T("worm"),"eaten"):"finish"===a[0]?(Pm(3),window.localStorage&&(window.localStorage[Dk+U]=km),Cm()):"play"===a[0]&&K.Rb.play(a[1],.5);Jm.push(setTimeout($m,5*Em))}else ym(null)}
function Pm(a){var b=Fk(Gm-Fm);180<b&&(b-=360);Gm=10>=Math.abs(b)?Fm:Fk(Gm+(0>b?10:-10));b=(14-Math.round(Gm/360*12))%12;var c=Gm%30;15<=c&&(c-=30);c*=-1;if(1===a)var d=0;else if(3===a)d=3;else if(2===a)d=Math.round(Date.now()/100)%3;else throw Error("Unknown pose.");a=Y.x/100*400-60;var e=400*(1-Y.y/100)-60,f=T("bird");f.setAttribute("x",a-120*b);f.setAttribute("y",e-120*d);f.setAttribute("transform","rotate("+c+", "+(a+60)+", "+(e+60)+")");b=T("clipRect");b.setAttribute("x",a);b.setAttribute("y",
e)}function Zm(a){var b=Math.round(ta(Y,a));a=Fk(180*Math.atan2(a.y-Y.y,a.x-Y.x)/Math.PI);for(var c=a*Math.PI/180,d=0;d<b;d++)Y.x+=Math.cos(c),Y.y+=Math.sin(c),Im.push(["goto",Y.x,Y.y,a,null])}
(function(a){function b(){window.BlocklyGamesMsg?(window.BlocklyMsg&&(q=window.BlocklyMsg),a()):setTimeout(b,99)}window.addEventListener("load",b)})(function(){function a(){b.style.top=Math.max(10,c.offsetTop-window.pageYOffset)+"px";b.style.left=rk?"10px":"420px";b.style.width=window.innerWidth-440+"px"}Kj([{type:"bird_noWorm",message0:V("Bird.noWorm",!1),output:"Boolean",colour:330,tooltip:V("Bird.noWormTooltip",!1)},{type:"bird_heading",message0:V("Bird.heading",!1)+"%1",args0:[{type:"field_angle",
name:"ANGLE",angle:90}],previousStatement:null,nextStatement:null,colour:290,tooltip:V("Bird.headingTooltip",!1)},{type:"bird_position",message0:"%1",args0:[{type:"field_dropdown",name:"XY",options:[["x","X"],["y","Y"]]}],output:"Number",colour:330,tooltip:V("Bird.positionTooltip",!1)},{type:"bird_compare",message0:"%1%2%3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["\u200f<","LT"],["\u200f>","GT"]]},{type:"input_value",name:"B",check:"Number"}],
inputsInline:!0,output:"Boolean",colour:"%{BKY_LOGIC_HUE}",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["bird_compare_tooltip"]},{type:"bird_and",message0:"%1%{BKY_LOGIC_OPERATION_AND}%2",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}"},{type:"bird_ifElse",message0:"%{BKY_CONTROLS_IF_MSG_IF}%1%{BKY_CONTROLS_IF_MSG_THEN}%2%{BKY_CONTROLS_IF_MSG_ELSE}%3",
args0:[{type:"input_value",name:"CONDITION",check:"Boolean"},{type:"input_statement",name:"DO"},{type:"input_statement",name:"ELSE"}],colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_CONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}"},{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",colour:"%{BKY_MATH_HUE}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]}]);Kf("bird_compare_tooltip",
Pf({LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}"}));document.body.innerHTML=Hk();lm();var b=T("blockly"),c=T("visualization");window.addEventListener("scroll",function(){a(null);ej(K)});window.addEventListener("resize",a);a(null);rm();K.Rb.load(["bird/quack.ogg","bird/quack.mp3"],"quack");K.Rb.load(["bird/whack.mp3","bird/whack.ogg"],"whack");K.Rb.load(["bird/worm.mp3","bird/worm.ogg"],"worm");1<U&&vf(K,gd);nk("noWorm,heading,getX,getY");Lm();pm();Om(!0);Ek("runButton",
Qm);Ek("resetButton",Sm);setTimeout(function(){vf(K,Nm);Nm()},5E3);8<U&&setTimeout(X.Ym,3E5);Am();Bm()});
